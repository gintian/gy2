<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>工作计划监控</title>
	
	<meta http-equiv="content-type"content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7">
	
    <script language="JavaScript"src="../../../module/utils/js/template.js"></script>
    
     <script language='JavaScript' src='../../../module/workplan/workplanhr/worktrackcookies.js'></script>
    <script language='JavaScript' src='../../../components/tableFactory/tableFactory.js'></script>
 	<script type="text/javascript" src="../../../components/personPicker/PersonPicker.js"></script>
 	<style>
 		.x-monthpicker-item-inner{margin:0px 2px;}
 	</style>
  </head>
  <script type="text/javascript">
      /**
       * 解析url中带的参数 返回Object
       */
      function getRequest(url) {
          var theRequest = new Object();
          if (url.indexOf("?") != -1) {
              var str = url.substr(1);
              var strs = str.split("&");
              for (var i = 0; i < strs.length; i++) {
                  var param = strs[i];
                  var params = param.split("=");
                  if (params.length > 1)
                      theRequest[params[0]] = params[1]
                  else
                      theRequest[params[0]] = "";
              }
          }
          return theRequest;
      }

 		var url = window.location.search;
        var parmval = getRequest(url);
 		var type = parmval.type || "";//计划监控类型（个人 or 部门）
 		if(Ext.isEmpty(type)){
 			Ext.showAlert("链接参数配置出错，请检查后重试!");
 		}
 		var currentPage =parmval.currentPage || 1;
 		var submittype = parmval.submittype || "" //查询类型
  		Ext.Loader.setPath('WorkPlanHrUL','../../../module/workplan/workplanhr');
  		Ext.Loader.setPath('PeriodCascadeForTrackUL','../../../module/workplan/workplanhr');
  		Ext.onReady(function(){
  			Ext.require('WorkPlanHrUL.WorkPlanHr',function(){
  				Ext.create('WorkPlanHrUL.WorkPlanHr',{
  				    plantype:type,
                    submittype:submittype,
                    currentPage:currentPage
  				});
  			});
  		});
  </script>
  <body> 
  </body>
</html>
