/****************************************************************************
 **
 ** This file is part of yFiles AJAX 2.1.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Unauthorized redistribution of this file and reverse engineering are
 ** strictly forbidden.
 **
 ** Copyright (c) 2006 - 2013 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
//>>built
require({cache:{"yfiles/client/tiles/SquelchClickMode":function(){define("yfiles/client/tiles/SquelchClickMode",["dojo/_base/declare","yfiles/client/tiles/InputMode"],function(i,e){return i([e],{_clickHandle:null,_attachEventListeners:function(){this._clickHandle=dojo.connect(this._canvas,"onClick",this,"deactivate")},_detachEventListeners:function(){dojo.disconnect(this._clickHandle)}})})},"yfiles/client/tiles/InputMode":function(){define("yfiles/client/tiles/InputMode",["dojo/_base/declare","dojo/Evented",
"yfiles/client/tiles/Graph","yfiles/client/tiles/HitTest"],function(i,e){return i([e],{_canvas:null,_hitTest:null,_active:!1,_child:null,_oldCursor:null,_parent:null,_childDeactivateHandle:null,constructor:function(c){this._active=!1;this._child=null;this._canvas=c;this._oldCursor=c.domNode.style.cursor;this._hitTest=this._canvas.getHitTest()},isActive:function(){return this._active||this._child&&this._child.isActive()},activate:function(){if(!this._active)this._child&&this._child.isActive()?this._child.deactivate():
(this._child=null,this._active=!0,this._attachEventListeners());this.onActivated()},onActivated:function(){},onDeactivated:function(){},deactivate:function(){if(this._active)this._child&&this._child.deactivate(),this._active=!1,this._detachEventListeners();this.onDeactivated()},getGraph:function(){return this._canvas.getGraph()},setCursor:function(c,a){if(!a&&!this._oldCursor)this._oldCursor=this._canvas.domNode.style.cursor;else if(a)this._oldCursor=a;this._canvas.domNode.style.cursor=c},restoreCursor:function(){this._canvas.domNode.style.cursor=
this._oldCursor},setChild:function(c){if(!this._active)return!1;this._child=c;c._parent=this;this._childDeactivateHandle=dojo.connect(this._child,"deactivate",this,"_reactivate");this._detachEventListeners();this._active=!1;c.activate();return!0},onReactivate:function(){},setEdgeTestSensitivity:function(c){this._hitTest.setEdgeTestSensitivity(c)},_attachEventListeners:function(){},_detachEventListeners:function(){},_reactivate:function(){dojo.disconnect(this._childDeactivateHandle);var c=this._child;
this._child=null;this._active=!0;this._attachEventListeners();this.onReactivate(c)}})})},"yfiles/client/tiles/widget/Rubberband":function(){define("yfiles/client/tiles/widget/Rubberband",["dojo/_base/declare","dojo/dnd/Moveable","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(i,e,c,a){return i([c,a],{templateString:'<div data-dojo-attach-point="root" style="display:none;overflow:hidden;"><div data-dojo-attach-point="area" class="yFilesRubberbandArea" style="position:absolute;display:none;font-size:1px;"></div></div>',
fixCanvas:!1,releaseCanvas:!1,root:null,area:null,canvas:null,_mouseX:0,_mouseY:0,_initialX:0,_initialY:0,_resizeAreaHandles:null,_showAreaHandles:null,_mouseMoveHandles:null,postCreate:function(){this._resizeAreaHandles=[];this._showAreaHandles=[];this._mouseMoveHandles=[]},activate:function(a){this.canvas=a;if(this.fixCanvas)this.canvas.fixed=!0;this._showAreaHandles.push(this.connect(this.canvas,"onMouseDown","_showArea"));this._showAreaHandles.push(this.connect(this.canvas,"onTouchStart","_showArea"))},
activateAt:function(a,c){this.canvas=a;if(this.fixCanvas)this.canvas.fixed=!0;this._showAreaAt(c)},deactivate:function(){this._hideArea();this.onDeactivated()},onAreaResized:function(){},onAreaDone:function(){},onDeactivated:function(){},_disconnectHandles:function(a){for(;0<a.length;)this.disconnect(a.pop())},_showArea:function(){this._disconnectHandles(this._showAreaHandles);this._showAreaAt(this.canvas.getMousePosition())},_showAreaAt:function(a){var c=a.y;this._initialX=a.x;this._initialY=c;a=
this.area;a.style.width="1px";a.style.height="1px";a.style.left=this._initialX+"px";a.style.top=this._initialY+"px";dojo.style(a,"opacity",0.2);a.style.display="block";this.root.style.display="block";this._resizeAreaHandles.push(this.connect(this.canvas,"onMouseMove","_resizeArea"));this._resizeAreaHandles.push(this.connect(this.canvas,"onTouchMove","_onTouchMove"));this._mouseMoveHandles.push(this.connect(this.canvas,"onMouseUp","_areaDone"));this._mouseMoveHandles.push(this.connect(this.canvas,
"onTouchEnd","_onTouchEnd"))},_onTouchMove:function(a){this.canvas.isMainTouch(a)&&this._resizeArea(a)},_resizeArea:function(a){a=this.canvas.toLocal(a.pageX,a.pageY);this._mouseX=a.x;this._mouseY=a.y;var a=this._mouseX-this._initialX,c=this._mouseY-this._initialY,d=this._initialX,h=this._initialY,g=a,l=c,k=this.area;if(!(0<=a))d=this._initialX+a,g=-a,k.style.left=d+"px";k.style.width=g+"px";if(!(0<=c))h=this._initialY+c,l=-c,k.style.top=h+"px";k.style.height=l+"px";this.onAreaResized(d,h,g,l)},_onTouchEnd:function(a){this.canvas.isMainTouch(a)&&
this._areaDone()},_areaDone:function(){var a=this.canvas,c=this.area,d=parseInt(c.style.left)-a.x,a=parseInt(c.style.top)-a.y,h=parseInt(c.style.width),c=parseInt(c.style.height);this._hideArea();this.onAreaDone(d,a,h,c);this.onDeactivated()},_hideArea:function(){if(this.releaseCanvas&&this.canvas)this.canvas.fixed=!1;this._disconnectHandles(this._showAreaHandles);this._disconnectHandles(this._mouseMoveHandles);this._disconnectHandles(this._resizeAreaHandles);window.status="";var a=this.area;a.style.display=
"none";a.style.left="-10px";a.style.top="-10px";a.style.width="1px";a.style.height="1px";this.root.style.display="none"}})})},"dojo/uacss":function(){define("dojo/uacss",["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(i,e,c,a,b){var f=b.doc.documentElement,b=a("ie"),d=a("opera"),h=Math.floor,g=a("ff"),l=i.boxModel.replace(/-/,""),d={dj_quirks:a("quirks"),dj_opera:d,dj_khtml:a("khtml"),dj_webkit:a("webkit"),dj_safari:a("safari"),dj_chrome:a("chrome"),dj_gecko:a("mozilla")};
if(b)d.dj_ie=!0,d["dj_ie"+h(b)]=!0,d.dj_iequirks=a("quirks");g&&(d["dj_ff"+h(g)]=!0);d["dj_"+l]=!0;var k="",m;for(m in d)d[m]&&(k+=m+" ");f.className=e.trim(f.className+" "+k);c(90,function(){if(!i.isBodyLtr()){var a="dj_rtl dijitRtl "+k.replace(/ /g,"-rtl ");f.className=e.trim(f.className+" "+a+"dj_rtl dijitRtl "+k.replace(/ /g,"-rtl "))}});return a})},"dojo/text":function(){define("dojo/text",["./_base/kernel","require","./has","./_base/xhr"],function(i,e,c,a){var b;b=function(b,d,c){a("GET",{url:b,
sync:!!d,load:c,headers:i.config.textPluginHeaders||{}})};var f={},d=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},h={},g={};i.cache=function(a,c,g){var h;"string"==typeof a?/\//.test(a)?(h=a,g=c):h=e.toUrl(a.replace(/\./g,"/")+(c?"/"+c:"")):(h=a+"",g=c);a=void 0!=g&&"string"!=typeof g?g.value:g;g=g&&g.sanitize;if("string"==typeof a)return f[h]=a,g?d(a):a;if(null===
a)return delete f[h],null;h in f||b(h,!0,function(a){f[h]=a});return g?d(f[h]):f[h]};return{dynamic:!0,normalize:function(a,b){var d=a.split("!"),c=d[0];return(/^\./.test(c)?b(c):c)+(d[1]?"!"+d[1]:"")},load:function(a,c,m){var a=a.split("!"),e=1<a.length,n=a[0],r=c.toUrl(a[0]),a="url:"+r,p=h,s=function(a){m(e?d(a):a)};n in f?p=f[n]:a in c.cache?p=c.cache[a]:r in f&&(p=f[r]);if(p===h)if(g[r])g[r].push(s);else{var j=g[r]=[s];b(r,!c.async,function(a){f[n]=f[r]=a;for(var b=0;b<j.length;)j[b++](a);delete g[r]})}else s(p)}}})},
"yfiles/client/tiles/ResizeHighlighter":function(){define("yfiles/client/tiles/ResizeHighlighter",["dojo/_base/declare","yfiles/client/tiles/GraphHighlighter"],function(i,e){return i([e],{_wrapped:null,_hotSpotSize:10,constructor:function(c,a){this._wrapped=c;this._hotSpotSize=a?a:10},drawNodeHighlight:function(c,a,b){this._wrapped.drawNodeHighlight(c,a,b);var c=this._hotSpotSize+"px",b=-this._hotSpotSize+"px",f=parseInt(a.style.width),d=(parseInt(a.style.height)-this._hotSpotSize)/2+"px",f=(f-this._hotSpotSize)/
2+"px",h=dojo.doc.createElement("div");a.appendChild(h);dojo.addClass(h,"yFilesResize");dojo.addClass(h,"yFilesResizeNW");dojo.style(h,{top:b,left:b,width:c,height:c,position:"absolute"});h=dojo.doc.createElement("div");a.appendChild(h);dojo.addClass(h,"yFilesResize");dojo.addClass(h,"yFilesResizeW");dojo.style(h,{left:b,top:d,width:c,height:c,position:"absolute"});h=dojo.doc.createElement("div");a.appendChild(h);dojo.addClass(h,"yFilesResize");dojo.addClass(h,"yFilesResizeSW");dojo.style(h,{bottom:b,
left:b,width:c,height:c,position:"absolute"});h=dojo.doc.createElement("div");a.appendChild(h);dojo.addClass(h,"yFilesResize");dojo.addClass(h,"yFilesResizeS");dojo.style(h,{bottom:b,left:f,width:c,height:c,position:"absolute"});h=dojo.doc.createElement("div");a.appendChild(h);dojo.addClass(h,"yFilesResize");dojo.addClass(h,"yFilesResizeSE");dojo.style(h,{bottom:b,right:b,width:c,height:c,position:"absolute"});h=dojo.doc.createElement("div");a.appendChild(h);dojo.addClass(h,"yFilesResize");dojo.addClass(h,
"yFilesResizeE");dojo.style(h,{right:b,top:d,width:c,height:c,position:"absolute"});d=dojo.doc.createElement("div");a.appendChild(d);dojo.addClass(d,"yFilesResize");dojo.addClass(d,"yFilesResizeNE");dojo.style(d,{top:b,right:b,width:c,height:c,position:"absolute"});d=dojo.doc.createElement("div");a.appendChild(d);dojo.addClass(d,"yFilesResize");dojo.addClass(d,"yFilesResizeN");dojo.style(d,{top:b,left:f,width:c,height:c,position:"absolute"})},drawEdgeHighlight:function(c,a,b,f){this._wrapped.drawEdgeHighlight(c,
a,b,f)}})})},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(i,e,c,a){c(90,function(){e("highcontrast")&&i.add(a.body(),"dijit_a11y")});return e})},"yfiles/client/support/HitInfoData":function(){define("yfiles/client/support/HitInfoData",["dojo/_base/declare"],function(i){return i(null,{t:null,i:null,p:null,x:null,y:null,w:null,h:null,u:null,d:null,constructor:function(e){this.t=e.t;this.i=e.i;if("undefined"!==typeof e.p)this.p=
e.p;if("undefined"!==typeof e.x)this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h;if("undefined"!==typeof e.u)this.u=e.u;if("undefined"!==typeof e.d)this.d=e.d}})})},"yfiles/client/support/ViewportLimiter":function(){define("yfiles/client/support/ViewportLimiter",["dojo/_base/declare"],function(i){return i(null,{honorBothDimensions:!0,bounds:null,constructor:function(){},limitViewport:function(e,c){var a=this._toRect(this.getBounds(e,c)),c=this._toRect(c),b=this._toRect(c);if(null!=a){if(c.width>a.width||
c.height>a.height){var f=a.width/c.width,d=a.height/c.height;if(this.honorBothDimensions)f<d?(b.width=a.width,b.x=a.x,b.height=Math.min(a.height,c.height*f),c.y<a.y&&c.maxY()>a.maxY()?(c=this._fromCenter(c.center(),b.size()),b.y=c.center().y-0.5*b.height,b.y=b.y<a.y?a.y:b.maxY()>a.maxY()?a.maxY()-b.height:a.center().y-0.5*b.height):b.y=c.y<a.y?a.y:c.maxY()>a.maxY()?a.maxY()-b.height:c.center().y-0.5*b.height):(b.y=a.y,b.height=a.height,b.width=Math.min(a.width,c.width*d),c.x<a.x&&c.maxX()>a.maxX()?
(c=this._fromCenter(c.center(),b.size()),b.x=c.center().x-0.5*b.width,b.x=b.x<a.x?a.x:b.maxX()>a.maxX()?a.maxX()-b.width:a.center().x-0.5*b.width):b.x=c.x<a.x?a.x:c.maxX()>a.maxX()?a.maxX()-b.width:c.center().x-0.5*b.width);else{f=e.width;d=e.height;if(c.width>a.width){if(c.height<a.height)return b.y=Math.min(a.maxY()-c.height,Math.max(a.y,c.y)),b.width=f*b.height/d,b.x=a.center().x-0.5*b.width,b}else if(c.width<a.width)return b.x=Math.min(a.maxX()-c.width,Math.max(a.x,c.x)),b.height=d*b.width/f,
b.y=a.center().y-0.5*b.height,b;f/a.width<d/a.height?(b.width=a.width,b.x=a.x,b.height=d*b.width/f,b.y=a.center().y-0.5*b.height):(b.height=a.height,b.y=a.y,b.width=f*b.height/d,b.x=a.center().x-0.5*b.width)}return b}if(c.x<a.x)b.x=a.x;else if(c.maxX()>a.maxX())b.x=a.maxX()-c.width;if(c.y<a.y)b.y=a.y;else if(c.maxY()>a.maxY())b.y=a.maxY()-c.height;return b.toPlainRect()}return c.toPlainRect()},getBounds:function(){return this.bounds},_toRect:function(e){return null===e?null:{x:e.x,y:e.y,width:e.width||
e.maxX-e.minX,height:e.height||e.maxY-e.minY,maxX:function(){return this.x+this.width},maxY:function(){return this.y+this.height},center:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},size:function(){return{width:this.width,height:this.height}},toPlainRect:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}},_fromCenter:function(e,c){return this._toRect({x:e.x-(0<c.width?0.5*c.width:0),y:e.y-(0<c.height?0.5*c.height:0),height:c.height,width:c.width})}})})},
"yfiles/client/tiles/GraphBounds":function(){define("yfiles/client/tiles/GraphBounds",["dojo/_base/declare"],function(i){var e=i(null,{minX:null,maxX:null,minY:null,maxY:null,constructor:function(c,a,b,f){this.minX=c;this.maxX=a;this.minY=b;this.maxY=f},width:function(){return this.maxX-this.minX},height:function(){return this.maxY-this.minY},area:function(){return this.width()*this.height()},center:function(){return{x:this.minX+this.width()/2,y:this.minY+this.height()/2}},scale:function(c){return new e(c*
this.minX,c*this.maxX,c*this.minY,c*this.maxY)},round:function(){return new e(Math.floor(this.minX),Math.floor(this.maxX),Math.floor(this.minY),Math.floor(this.maxY))},union:function(c){return new e(Math.min(this.minX,c.minX),Math.max(this.maxX,c.maxX),Math.min(this.minY,c.minY),Math.max(this.maxY,c.maxY))},intersect:function(c){return new e(Math.max(this.minX,c.minX),Math.min(this.maxX,c.maxX),Math.max(this.minY,c.minY),Math.min(this.maxY,c.maxY))},shift:function(c,a){return new e(this.minX+c,this.maxX+
c,this.minY+a,this.maxY+a)},enlarge:function(c){return new e(this.minX-c,this.maxX+c,this.minY-c,this.maxY+c)}});return e})},"dijit/Viewport":function(){define("dijit/Viewport","dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),function(i,e,c,a,b,f){var d=new i;c(200,function(){var c=f.getBox();d._rlh=e(b.global,"resize",function(){var a=f.getBox();c.h==a.h&&c.w==a.w||(c=a,d.emit("resize"))});if(8==a("ie")){var g=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=
g)g=screen.deviceXDPI,d.emit("resize")},500)}});return d})},"dojo/parser":function(){define("dojo/parser","require,./_base/kernel,./_base/lang,./_base/array,./_base/config,./_base/html,./_base/window,./_base/url,./_base/json,./aspect,./date/stamp,./Deferred,./has,./query,./on,./ready".split(","),function(i,e,c,a,b,f,d,h,g,l,k,m,q,n,r,p){function s(a){var j=a._nameCaseMap,b=a.prototype;if(!j||j._extendCnt<u){var j=a._nameCaseMap={},d;for(d in b)"_"!==d.charAt(0)&&(j[d.toLowerCase()]=d);j._extendCnt=
u}return j}function j(a){var j=a.join();if(!v[j]){for(var b=[],d=0,g=a.length;d<g;d++){var h=a[d];b[b.length]=v[h]=v[h]||c.getObject(h)||~h.indexOf("/")&&i(h)}a=b.shift();v[j]=b.length?a.createSubclass?a.createSubclass(b):a.extend.apply(a,b):a}return v[j]}var u=0;l.after(c,"extend",function(){u++},!0);var v={},o={_clearCache:function(){u++;v={}},_functionFromScript:function(j,b){var d="",c="",g=j.getAttribute(b+"args")||j.getAttribute("args"),h=j.getAttribute("with"),g=(g||"").split(/\s*,\s*/);h&&
h.length&&a.forEach(h.split(/\s*,\s*/),function(a){d+="with("+a+"){";c+="}"});return new Function(g,d+j.innerHTML+c)},instantiate:function(j,b,d){var b=b||{},d=d||{},c=(d.scope||e._scopeName)+"Type",g="data-"+(d.scope||e._scopeName)+"-",h=g+"type",f=g+"mixins",u=[];a.forEach(j,function(a){var j=c in b?b[c]:a.getAttribute(h)||a.getAttribute(c);if(j){var d=a.getAttribute(f),j=d?[j].concat(d.split(/\s*,\s*/)):[j];u.push({node:a,types:j})}});return this._instantiate(u,b,d)},_instantiate:function(b,d,
c){b=a.map(b,function(a){var b=a.ctor||j(a.types);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,d,c,a.scripts,a.inherited)},this);!d._started&&!c.noStart&&a.forEach(b,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return b},construct:function(j,b,d,f,u,m){var t;var v=j&&j.prototype,f=f||{},p={};f.defaults&&c.mixin(p,f.defaults);m&&c.mixin(p,m);var i;q("dom-attributes-explicit")?i=b.attributes:q("dom-attributes-specified-flag")?
i=a.filter(b.attributes,function(a){return a.specified}):(m=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),i=a.map(m.split(/\s+/),function(a){var j=a.toLowerCase();return{name:a,value:"LI"==b.nodeName&&"value"==a||"enctype"==j?b.getAttribute(j):b.getAttributeNode(j).value}}));var o=f.scope||e._scopeName,m="data-"+o+"-",F={};"dojo"!==o&&(F[m+"props"]="data-dojo-props",F[m+"type"]="data-dojo-type",
F[m+"mixins"]="data-dojo-mixins",F[o+"type"]="dojoType",F[m+"id"]="data-dojo-id");for(var o=0,w,A=[],Q,I;w=i[o++];){var z=w.name,E=z.toLowerCase();w=w.value;switch(F[E]||E){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":I=w;break;case "data-dojo-id":case "jsid":Q=w;break;case "data-dojo-attach-point":case "dojoattachpoint":p.dojoAttachPoint=w;break;case "data-dojo-attach-event":case "dojoattachevent":p.dojoAttachEvent=w;break;case "class":p["class"]=b.className;
break;case "style":p.style=b.style&&b.style.cssText;break;default:if(z in v||(z=s(j)[E]||z),z in v)switch(typeof v[z]){case "string":p[z]=w;break;case "number":p[z]=w.length?Number(w):NaN;break;case "boolean":p[z]="false"!=w.toLowerCase();break;case "function":p[z]=""===w||-1!=w.search(/[^\w\.]+/i)?new Function(w):c.getObject(w,!1)||new Function(w);A.push(z);break;default:E=v[z],p[z]=E&&"length"in E?w?w.split(/\s*,\s*/):[]:E instanceof Date?""==w?new Date(""):"now"==w?new Date:k.fromISOString(w):
E instanceof h?e.baseUrl+w:g.fromJson(w)}else p[z]=w}}for(o=0;o<A.length;o++)i=A[o].toLowerCase(),b.removeAttribute(i),b[i]=null;if(I)try{I=g.fromJson.call(f.propsThis,"{"+I+"}"),c.mixin(p,I)}catch(K){throw Error(K.toString()+" in data-dojo-props='"+I+"'");}c.mixin(p,d);u||(u=j&&(j._noScript||v._noScript)?[]:n("> script[type^='dojo/']",b));d=[];f=[];I=[];A=[];if(u)for(o=0;o<u.length;o++){var G=u[o];b.removeChild(G);i=G.getAttribute(m+"event")||G.getAttribute("event");F=G.getAttribute(m+"prop");z=
G.getAttribute(m+"method");E=G.getAttribute(m+"advice");w=G.getAttribute("type");G=this._functionFromScript(G,m);i?"dojo/connect"==w?d.push({method:i,func:G}):"dojo/on"==w?A.push({event:i,func:G}):p[i]=G:"dojo/aspect"==w?d.push({method:z,advice:E,func:G}):"dojo/watch"==w?I.push({prop:F,func:G}):f.push(G)}t=(u=j.markupFactory||v.markupFactory)?u(p,b,j):new j(p,b),j=t;Q&&c.setObject(Q,j);for(o=0;o<d.length;o++)l[d[o].advice||"after"](j,d[o].method,c.hitch(j,d[o].func),!0);for(o=0;o<f.length;o++)f[o].call(j);
for(o=0;o<I.length;o++)j.watch(I[o].prop,I[o].func);for(o=0;o<A.length;o++)r(j,A[o].event,A[o].func);return j},scan:function(b,d){function c(a){if(!a.inherited){a.inherited={};var j=a.node,b=c(a.parent),j={dir:j.getAttribute("dir")||b.dir,lang:j.getAttribute("lang")||b.lang,textDir:j.getAttribute(v)||b.textDir},d;for(d in j)j[d]&&(a.inherited[d]=j[d])}return a.inherited}var g=[],h=[],f={},u=(d.scope||e._scopeName)+"Type",l="data-"+(d.scope||e._scopeName)+"-",k=l+"type",v=l+"textdir",l=l+"mixins",
n=b.firstChild,p=d.inherited;if(!p){var s=function(a,j){return a.getAttribute&&a.getAttribute(j)||a.parentNode&&s(a.parentNode,j)},p={dir:s(b,"dir"),lang:s(b,"lang"),textDir:s(b,v)},r;for(r in p)p[r]||delete p[r]}for(var p={inherited:p},o,z;;)if(n)if(1!=n.nodeType)n=n.nextSibling;else if(o&&"script"==n.nodeName.toLowerCase())(E=n.getAttribute("type"))&&/^dojo\/\w/i.test(E)&&o.push(n),n=n.nextSibling;else if(z)n=n.nextSibling;else{var E=n.getAttribute(k)||n.getAttribute(u);r=n.firstChild;if(!E&&(!r||
3==r.nodeType&&!r.nextSibling))n=n.nextSibling;else{z=null;if(E){var K=n.getAttribute(l);o=K?[E].concat(K.split(/\s*,\s*/)):[E];try{z=j(o)}catch(G){}z||a.forEach(o,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,h[h.length]=a)});K=z&&!z.prototype._noScript?[]:null;p={types:o,ctor:z,parent:p,node:n,scripts:K};p.inherited=c(p);g.push(p)}else p={node:n,scripts:o,parent:p};n=r;o=K;z=z&&z.prototype.stopParser&&!d.template}}else{if(!p||!p.node)break;n=p.node.nextSibling;z=!1;p=p.parent;o=p.scripts}var P=new m;
h.length?(q("dojo-debug-messages"),i(h,function(){P.resolve(a.filter(g,function(a){if(!a.ctor)try{a.ctor=j(a.types)}catch(b){}for(var c=a.parent;c&&!c.types;)c=c.parent;var g=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(g&&g.stopParser&&!d.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):P.resolve(g);return P.promise},_require:function(a){var a=g.fromJson("{"+a.innerHTML+"}"),j=[],b=[],d=new m,h;for(h in a)j.push(h),b.push(a[h]);i(b,function(){for(var a=
0;a<j.length;a++)c.setObject(j[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a){var j=new m,b=j.promise;j.resolve(!0);var d=this;n("script[type='dojo/require']",a).forEach(function(a){b=b.then(function(){return d._require(a)});a.parentNode.removeChild(a)});return b},parse:function(a,j){var b;!j&&a&&a.rootNode?(j=a,b=j.rootNode):a&&c.isObject(a)&&!("nodeType"in a)?j=a:b=a;b=b?f.byId(b):d.body();var j=j||{},g=j.template?{template:!0}:{},h=[],u=this,m=this._scanAmd(b,j).then(function(){return u.scan(b,
j)}).then(function(a){return h=h.concat(u._instantiate(a,g,j))}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});c.mixin(h,m);return h}};e.parser=o;b.parseOnLoad&&p(100,o,"parse");return o})},"dijit/form/_FormMixin":function(){define("dijit/form/_FormMixin","dojo/_base/array,dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/window".split(","),function(i,e,c,a,b,f){return e("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(a){var b=
[];i.forEach(a||this.getChildren(),function(a){"value"in a?b.push(a):b=b.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return b},reset:function(){i.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var a=!1;return i.every(i.map(this._getDescendantFormWidgets(),function(b){b._hasBeenBlurred=!0;var c=b.disabled||!b.validate||b.validate();!c&&!a&&(f.scrollIntoView(b.containerNode||b.domNode),b.focus(),a=!0);return c}),function(a){return a})},
setValues:function(a){c.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(b){var c={};i.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(c[a.name]||(c[a.name]=[])).push(a)});for(var g in c)if(c.hasOwnProperty(g)){var f=c[g],e=a.getObject(g,!1,b);void 0!==e&&(a.isArray(e)||(e=[e]),"boolean"==typeof f[0].checked?i.forEach(f,function(a){a.set("value",-1!=i.indexOf(e,a.value))}):f[0].multiple?
f[0].set("value",e):i.forEach(f,function(a,b){a.set("value",e[b])}))}},getValues:function(){c.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};i.forEach(this._getDescendantFormWidgets(),function(c){var g=c.name;if(g&&!c.disabled){var f=c.get("value");"boolean"==typeof c.checked?/Radio/.test(c.declaredClass)?!1!==f?a.setObject(g,f,b):(f=a.getObject(g,!1,b),void 0===f&&a.setObject(g,null,b)):
(c=a.getObject(g,!1,b),c||(c=[],a.setObject(g,c,b)),!1!==f&&c.push(f)):(c=a.getObject(g,!1,b),"undefined"!=typeof c?a.isArray(c)?c.push(f):a.setObject(g,[c,f],b):a.setObject(g,f,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var a=i.map(this._descendants,function(a){return a.get("state")||""});return 0<=i.indexOf(a,"Error")?"Error":0<=i.indexOf(a,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(a){this._descendants=
this._getDescendantFormWidgets();i.forEach(this._descendants,function(a){a._started||a.startup()});a||this._onChildChange()},_onChildChange:function(a){(!a||"state"==a||"disabled"==a)&&this._set("state",this._getState());if(!a||"value"==a||"disabled"==a||"checked"==a)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=
this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var a=this;this.own(b(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"yfiles/client/tiles/ZoomAreaMode":function(){define("yfiles/client/tiles/ZoomAreaMode",
"dojo/_base/declare,yfiles/client/tiles/InputMode,yfiles/client/tiles/GraphSelection,yfiles/client/tiles/HitTest,yfiles/client/tiles/widget/GraphCanvas,yfiles/client/tiles/widget/Rubberband".split(","),function(i,e,c,a,b,f){return i([e],{_rubberBand:null,_hideHandle:null,_applyHandle:null,constructor:function(){this._rubberBand=this._labelDialog=new f({canvas:this._canvas,fixCanvas:!0,releaseCanvas:!0});this._canvas.containerNode.appendChild(this._rubberBand.domNode)},activate:function(){this.inherited(arguments);
this._showZoomArea()},deactivate:function(){this.isActive()&&this._hideZoomArea();this.inherited(arguments)},_showZoomArea:function(){if(this._rubberBand)window.status="Click and drag to mark the zoom area.",this._rubberBand.activate(this._canvas),this._hideHandle=dojo.connect(this._rubberBand,"onDeactivated",this,"_hideZoomArea"),this._applyHandle=dojo.connect(this._rubberBand,"onAreaDone",this,"_applyZoomArea")},_hideZoomArea:function(){if(this._rubberBand)dojo.disconnect(this._hideHandle),dojo.disconnect(this._applyHandle),
this._rubberBand.deactivate(),window.status=""},_applyZoomArea:function(a,b,c,f){var e=this._canvas;9<c&&9<f&&(a+=c/2,b+=f/2,c=e.zoom*Math.min(e.width/c,e.height/f),e.center(a,b),e.setZoom(c));this.deactivate()}})})},"yfiles/client/svg/widget/SVGViewPort":function(){require({cache:{"url:yfiles/client/svg/widget/SVGViewPort.html":'<div data-dojo-attach-point="svgContainer" style="width:100%;height:100%;position:absolute;">\r\n</div>'}});define("yfiles/client/svg/widget/SVGViewPort",["dojo/_base/declare",
"dijit/_WidgetBase","dijit/_TemplatedMixin","yfiles/client/tiles/GraphBounds","dojo/text!./SVGViewPort.html"],function(i,e,c,a,b){return i([e,c],{svgContainer:null,svgRoot:null,svgElement:null,_graphCanvas:null,_showSVG_ElementBounds:!1,_svgZoomFactor:1,_customCopyAttribute:null,templateString:b,postCreate:function(){this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svgRoot=document.createElementNS("http://www.w3.org/2000/svg","g");this.svgElement.appendChild(this.svgRoot);
this.svgContainer.appendChild(this.svgElement);this.svgRoot.removeAttribute("viewBox");this.svgRoot.setAttribute("transform","");this.setTransform(this.svgRoot,{a:1,b:0,c:0,d:1,e:0,f:0})},setCanvas:function(a){this._graphCanvas=a},hasValidSVGRoot:function(){return void 0!=this.svgRoot&&null!=this.svgRoot&&this.svgRoot.getCTM&&null!=this.svgRoot.getCTM()},setTransform:function(a,b){a.setAttribute("transform","matrix("+b.a+","+b.b+","+b.c+","+b.d+","+b.e+","+b.f+")")},setScale:function(a,b){if(this.hasValidSVGRoot()){var c=
this.svgRoot.getCTM();c.a=a/this._svgZoomFactor;c.d=b/this._svgZoomFactor;this.setTransform(this.svgRoot,c);this.updateSVGElementSize();this.updateSVGContainerPosition();this._fixIEGradientDisplayBug()}},updateSVGElementSize:function(){var a=this.getWorldBounds(),b=this.getCurrentZoom(),c=this._graphCanvas.svgBorder,g=a.width()+2*c,a=a.height()+2*c,a=0<a?a:10;this.svgElement.setAttribute("width",(0<g?g:10)*b);this.svgElement.setAttribute("height",a*b)},updateSVGContainerPosition:function(){var a=
this._graphCanvas._contentBounds,b=this.getCurrentZoom();if(a&&0!=a.width()&&0!=a.height()){var c=this._graphCanvas.svgBorder,g=Math.round((a.minX-c)*b),a=Math.round((a.minY-c)*b);dojo.style(this.svgContainer,"left",g+"px");dojo.style(this.svgContainer,"top",a+"px")}},getWorldPoint:function(a,b){var c=this.svgElement.createSVGPoint();c.x=a;c.y=b;var g=this.svgRoot.getCTM();return c=c.matrixTransform(g.inverse())},getWorldBounds:function(){var b=this._graphCanvas.getWorldBounds();null==b&&(b=new a(0,
0,0,0));return b},applyTransform:function(a){if(this.hasValidSVGRoot()){var b=this.svgRoot.getCTM(),b=b.multiply(a);this.setTransform(this.svgRoot,b)}},zoomTo:function(a,b,c){this.hasValidSVGRoot()&&(b=this.getWorldPoint(b,c),c=this.svgElement.createSVGMatrix(),c=c.translate(b.x,b.y),c=c.scale(a),c=c.translate(-b.x,-b.y),this.applyTransform(c))},getCurrentZoom:function(){return this._graphCanvas.zoom},zoom:function(a){this.setScale(a,a)},setViewPoint:function(){if(this.hasValidSVGRoot()){var a=this.svgRoot.getCTM();
a.e=tx;a.f=ty;this.setTransform(this.svgRoot,a)}},showSVG:function(a,b){this._svgZoomFactor=b;this.clear();this.svgRoot.appendChild(this.cloneSVG_DOM(dojo.query("svg",a)[0]));this.updateSVGElementSize();this.updateSVGContainerPosition();var c=this.getCurrentZoom();this.setScale(c,c)},clear:function(){for(var a=this.svgRoot.lastChild;null!=a;)this.svgRoot.removeChild(a),a=this.svgRoot.lastChild},cloneSVG_DOM:function(a){var b=[];b.push(a);for(var a=null,c=[];0<b.length;){var g=b.pop(),e=c.pop(),k=
null;if(1==g.nodeType)k=document.createElementNS(g.namespaceURI,g.tagName),this.copyNodeAttributes(g,k);else if(3==g.nodeType)k=document.createTextNode(g.nodeValue);else continue;null==a&&(a=k);null!=e&&e.appendChild(k);for(g=g.lastChild;null!=g;)b.push(g),c.push(k),g=g.previousSibling}return a},copyNodeAttributes:function(a,b){if(a.attributes)for(var c=0;c<a.attributes.length;c++){var g=a.attributes[c];"function"===typeof this._customCopyAttribute?this._customCopyAttribute(a,g,b,this.copyAttribute):
this.copyAttribute(a,g,b)}},copyAttribute:function(a,b,c){null!=b.namespaceURI&&0<b.namespaceURI.length?c.setAttributeNS(b.namespaceURI,b.name,b.value):c.setAttribute(b.name,b.value)},setCustomCopyAttribute:function(a){this._customCopyAttribute=a},_fixIEGradientDisplayBug:function(){if(9>=dojo.isIE){var a=this;setTimeout(function(){a._graphCanvas.tilesFrame.style.cursor=a._graphCanvas.tilesFrame.style.cursor},1)}}})})},"yfiles/client/support/TouchPointHandler":function(){define("yfiles/client/support/TouchPointHandler",
["dojo/_base/declare","yfiles/client/support/_LongTouchPressTimer"],function(i,e){return i(null,{_canvas:null,_identifier:void 0,_longPressTimer:null,_lastX:void 0,_lastY:void 0,_touchStartEventTime:void 0,_touchStartEventLocation:null,_moveDelivered:!1,_lastTapLocation:{x:0,y:0},_lastTapCount:0,_lastTapTime:0,_lastEventTime:0,constructor:function(c,a){this._canvas=c;this._identifier=a;this._longPressTimer=new e(c,this,c.longPressTime)},onTouchStartCore:function(c){this._touchStartEventTime=this._lastEventTime=
(new Date).getTime();this._setLastLocation(c);var a=this._canvas.getWorldCoordinates(this._lastX,this._lastY);this._touchStartEventLocation=a;this._longPressTimer.stop();this._longPressTimer.touch=c;this._longPressTimer.worldCoords=a;this._longPressTimer.restart();this._canvas.onTouchStart(c,a)},onTouchMoveCore:function(c){var a=this._lastEventTime=(new Date).getTime();if(!this._equalsLastLocation(c)){this._setLastLocation(c);var b=this._canvas.getWorldCoordinates(this._lastX,this._lastY);if(a-this._touchStartEventTime<
this._canvas.longPressTime){var a=b.y-this._touchStartEventLocation.y,f=this._canvas.touchDragSize,d=this._canvas.zoom;if(Math.abs(b.x-this._touchStartEventLocation.x)>0.5*f.width*d||Math.abs(a)>0.5*f.height*d)this._touchStartEventTime=0,this._longPressTimer.stop(),this._moveDelivered=!0,this._canvas.onTouchMove(c,b)}else this._moveDelivered=!0,this._canvas.onTouchMove(c,b)}},onTouchEndCore:function(c){this._setLastLocation(c);this._longPressTimer.stop();var a=this._canvas.getWorldCoordinates(this._lastX,
this._lastY);this._canvas.onTouchEnd(c,a);var b=this._lastEventTime=(new Date).getTime();if(!this._moveDelivered){var f=this._canvas.zoom,d=0.5*this._canvas.doubleTapSize.width/f,f=0.5*this._canvas.doubleTapSize.height/f,h=Math.abs(this._lastTapLocation.x-a.x),g=Math.abs(this._lastTapLocation.y-a.y);h<d&&g<f?b-this._lastTapTime<this._canvas.doubleTapTime?this._lastTapCount++:this._lastTapCount=1:this._lastTapCount=1;this._lastTapLocation=a;this._lastTapTime=b;this._canvas.onTouchTapped(c,a,this._lastTapCount)}},
onTouchCancelCore:function(){},onTouchEnterCore:function(){},onTouchLeaveCore:function(){},_equalsLastLocation:function(c){c=this._canvas.toLocal(c.pageX,c.pageY);return c.x==this._lastX&&c.y==this._lastY},_setLastLocation:function(c){c=this._canvas.toLocal(c.pageX,c.pageY);this._lastX=c.x;this._lastY=c.y}})})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(i,e,c){return e("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);
if(!this.containerNode)this.containerNode=this.domNode},addChild:function(a,b){var f=this.containerNode;if(b&&"number"==typeof b){var d=this.getChildren();if(d&&d.length>=b)f=d[b-1].domNode,b="after"}c.place(a.domNode,f,b);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);if(a)(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(a,b){var c=this.getChildren(),
d=i.indexOf(this.getChildren(),a);return c[d+b]},getIndexOfChild:function(a){return i.indexOf(this.getChildren(),a)}})})},"dijit/a11yclick":function(){define("dijit/a11yclick","dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),function(i,e,c,a,b,f,d){function h(a){return(a.keyCode===c.ENTER||a.keyCode===c.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey}var g=null;b("dom-addeventlistener")?d.doc.addEventListener("keydown",function(a){g=
a.target},!0):function(){var a=function(a){g=a.srcElement};d.doc.attachEvent("onkeydown",a);f.addOnWindowUnload(function(){d.doc.detachEvent("onkeydown",a)})}();return function(a,c){if(/input|button/i.test(a.nodeName))return i(a,"click",c);var d=[i(a,"keydown",function(a){if(h(a))g=a.target,a.preventDefault()}),i(a,"keyup",function(a){h(a)&&a.target==g&&(g=null,i.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),i(a,"click",function(a){c.call(this,a)})];if(b("touch")){var f;d.push(i(a,"touchend",
function(a){var b=a.target;f=setTimeout(function(){f=null;i.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),i(a,"click",function(){f&&clearTimeout(f)}))}return{remove:function(){e.forEach(d,function(a){a.remove()});f&&(clearTimeout(f),f=null)}}}})},"yfiles/client/tiles/MoveViewportInputMode":function(){define("yfiles/client/tiles/MoveViewportInputMode",["dojo/_base/declare","dojo/dom-class","yfiles/client/tiles/InputMode"],function(i,e,c){return i([c],{_connectHandles:null,_lastCoords:null,_dragging:!1,
_timerHandle:null,delay:30,constructor:function(){this._lastCoords={x:0,y:0};this._connectHandles=[]},_attachEventListeners:function(){this._connectHandles.push(dojo.connect(this._canvas,"onTouchStart",this,"_onTouchStart"));this._connectHandles.push(dojo.connect(this._canvas,"onTouchMove",this,"_handleMove"));this._connectHandles.push(dojo.connect(this._canvas,"onTouchEnd",this,"_onTouchEnd"));this._connectHandles.push(dojo.connect(this._canvas,"onTouchLongPress",this,"_onTouchLongPress"));this._connectHandles.push(dojo.connect(this._canvas,
"onPinchStart",this,"_onPinchStart"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseDown",this,"_onMouseDown"));var a=this._canvas.domNode.ownerDocument;this._connectHandles.push(dojo.connect(a,"onmousemove",this,"_handleMouseMove"));this._connectHandles.push(dojo.connect(a,"onmouseup",this,"_onMouseUp"))},activate:function(){this.inherited(arguments)},deactivate:function(){this._dragging=!1;this.inherited(arguments)},_detachEventListeners:function(){for(;0<this._connectHandles.length;){var a=
this._connectHandles.pop();dojo.disconnect(a)}},_onTouchStart:function(a){this._startDrag(a)},_onTouchEnd:function(a,b){this._finishDrag(a);null!=this._parent&&(this.deactivate(),dojo.isFunction(this._parent._onTouchEnd)&&this._parent._onTouchEnd(a,b))},_clearTimeout:function(){this._timerHandle=null},_handleMouseMove:function(a){navigator.userAgent.match(/iPhone|iPod|iPad/i)||this._handleMove(a)},_handleMove:function(a){if(this._dragging&&!this._canvas.fixed)if(this._canvas.isBitmapMode()){if(null==
this._timerHandle)this._handleMoveCore(a),this._timerHandle=setTimeout(dojo.hitch(this,this._clearTimeout),this.delay)}else this._handleMoveCore(a)},_handleMoveCore:function(a){var b=(a.pageX-this._lastCoords.x)/this._canvas.zoom,c=(a.pageY-this._lastCoords.y)/this._canvas.zoom,d=this._canvas.getViewport();this._canvas.zoomTo(this._canvas.viewportLimiter.limitViewport(this._canvas,{x:d.x-b,y:d.y-c,width:d.width,height:d.height}));this._setLastCoords(a.pageX,a.pageY);this._canvas.recalculateTiles()},
_onTouchLongPress:function(a,b){null!=this._parent&&(this.deactivate(),dojo.isFunction(this._parent._onTouchLongPress)&&this._parent._onTouchLongPress(a,b))},_onPinchStart:function(a,b,c){this._finishDrag();null!=this._parent&&dojo.isFunction(this._parent._onPinchStart)&&(this.deactivate(),this._parent._onPinchStart(a,b,c))},_setLastCoords:function(a,b){this._lastCoords.x=a;this._lastCoords.y=b},_onMouseDown:function(a){this._startDrag(a)},_onMouseUp:function(a){this._finishDrag(a);null!=this._parent&&
(this.deactivate(),dojo.isFunction(this._parent._onMouseUp)&&this._parent._onMouseUp(a))},_startDrag:function(a){if(!this._canvas.fixed)this._dragging=!0,e.add(this._canvas.tilesFrame,"yFilesMove"),this._setLastCoords(a.pageX,a.pageY)},_finishDrag:function(a){"undefined"!=typeof a&&this.isDragging()&&this._handleMoveCore(a);this._timerHandle=null;this._dragging=!1;e.remove(this._canvas.tilesFrame,"yFilesMove")},isDragging:function(){return this._dragging}})})},"yfiles/client/tiles/MoveSelectionMode":function(){define("yfiles/client/tiles/MoveSelectionMode",
"dojo/_base/declare,dojo/request/xhr,yfiles/client/tiles/InputMode,yfiles/client/tiles/Graph,yfiles/client/tiles/GraphSelection,yfiles/client/tiles/HitTest,yfiles/client/tiles/widget/GraphCanvas,yfiles/client/tiles/HierarchyManager".split(","),function(i,e,c,a,b,f){return i([c],{_selection:null,_startPosition:null,_div:null,_drag:null,_hierarchy:null,_MouseUpHandle:null,_MouseMoveHandle:null,_routeEdges:!1,constructor:function(a,b,c,f){this._selection=b;if(c)this._hierarchy=c;if(f)this._routeEdges=
f;a=dojo.doc.createElement("div");a.style.position="absolute";this._canvas.containerNode.appendChild(a);this._div=a},activate:function(){this.inherited(arguments);0==this._selection.getNodes().length?this.deactivate():(this._startPosition=this._canvas.getMousePosition(),this._showGhosts())},deactivate:function(){this._hideGhosts();this.inherited(arguments)},setRouteEdges:function(a){this._routeEdges=a},isRouteEdges:function(){return this._routeEdges},_onMouseUp:function(a){this._moveNodesSwitchGroups(a);
this.deactivate()},_showGhosts:function(){this._div.style.left="0px";this._div.style.top="0px";for(var a=this._selection.getNodes(),b=0;b<a.length;b++){var c=this._hitTest.getBoundsForId(a[b]),f=this._canvas.zoom,e=dojo.doc.createElement("div");this._div.appendChild(e);e.style.position="absolute";e.style.cursor="move";var m=this._canvas.highlightNodeSurroundPixels;dojo.style(e,"left",this._canvas.x+c.minX*f-m+"px");dojo.style(e,"top",this._canvas.y+c.minY*f-m+"px");dojo.style(e,"width",c.width()*
f+2*m+"px");dojo.style(e,"height",c.height()*f+2*m+"px");e.style.backgroundColor="yellow";dojo.style(e,"opacity",0.5)}this._MouseUpHandle=dojo.connect(this._canvas,"onMouseUp",this,"_onMouseUp");this._MouseMoveHandle=dojo.connect(this._canvas,"onMouseMove",this,"_moveGhosts")},_moveGhosts:function(){var a=this._canvas.getMousePosition(),b=a.y-this._startPosition.y;this._div.style.left=a.x-this._startPosition.x+"px";this._div.style.top=b+"px"},_hideGhosts:function(){if(this._div){dojo.disconnect(this._MouseUpHandle);
for(dojo.disconnect(this._MouseMoveHandle);this._div.hasChildNodes();)this._div.removeChild(this._div.firstChild)}},_moveNodesSwitchGroups:function(a){this._hierarchy&&a.shiftKey?this._switchGroups():this._moveNodes(this._selection.getNodes())},_switchGroups:function(){var a=this._canvas,b=a.getMousePosition(),c=(b.x-this._startPosition.x)/a.zoom,f=(b.y-this._startPosition.y)/a.zoom,k=this._selection.getNodes(),b=this._getTargetId(a),m=this._createIdsString(k),q=a.getGraph().getName(),m={name:q,subNodeIds:m,
x:c,y:f,route:this._routeEdges?1:0};if(b)m.parentNodeId=b;var n=this;e.post(a.getGraph().getBaseURL()+"/moveToSubgraph",{data:m,handleAs:"json"}).then(function(b){n._hierarchy.setData(b.hinfo,q);a.getGraph().onNodesMoved(b.bounds,q,k,c,f,null)})},_getTargetId:function(a){var b=a.getHitTest(),a=a.getWorldCoordinates(),b=b.getHitInfo(a.x,a.y,!1),b=f.getHitIds(b);if(0<b.length)for(var c in b)if(a=b[c],this._hierarchy.isGroupNode(a)||this._hierarchy.isFolderNode(a))return a;return this._hierarchy.getVisibleGraphParent()},
_createIdsString:function(a){var b="";dojo.forEach(a,function(a){b+=a+","});0<b.length&&(b=b.substring(0,b.length-1));return b},_moveNodes:function(a){this._tmpMTSHandle&&(dojo.disconnect(this._tmpMTSHandle),delete this._tmpMTSHandle);this._tmpMTSFHandle&&(dojo.disconnect(this._tmpMTSFHandle),delete this._tmpMTSFHandle);var b=this._canvas,c=b.getMousePosition(),f=(c.x-this._startPosition.x)/b.zoom,c=(c.y-this._startPosition.y)/b.zoom;b.getGraph().moveNodes(a,f,c,this._routeEdges?1:0)}})})},"dijit/Dialog":function(){require({cache:{"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n'}});
define("dijit/Dialog","require,dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/fx,dojo/i18n,dojo/keys,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/window,dojo/dnd/Moveable,dojo/dnd/TimedMoveable,./focus,./_base/manager,./_Widget,./_TemplatedMixin,./_CssStateMixin,./form/_FormMixin,./_DialogMixin,./DialogUnderlay,./layout/ContentPane,dojo/text!./templates/Dialog.html,./main,dojo/i18n!./nls/common".split(","),
function(i,e,c,a,b,f,d,h,g,l,k,m,q,n,r,p,s,j,u,v,o,t,C,B,D,J,L,H,N,O,M){var t=a("dijit._DialogBase",[B,J,L,D],{templateString:O,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:!1,duration:t.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},"aria-describedby":"",maxRatio:0.9,
postMixInProperties:function(){var a=m.getLocalization("dijit","common");n.mixin(this,a);this.inherited(arguments)},postCreate:function(){g.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.autofocus&&w.isTop(this)&&(this._getFocusItems(this.domNode),o.focus(this._firstFocusItem));
this.inherited(arguments)},_onBlur:function(a){this.inherited(arguments);var b=n.hitch(this,function(){this.open&&!this._destroyed&&w.isTop(this)&&(this._getFocusItems(this.domNode),o.focus(this._firstFocusItem))});if("mouse"==a)r.once(this.ownerDocument,"mouseup",b);else b()},_endDrag:function(){var a=h.position(this.domNode),b=j.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==s("ie")?v:u)(a,{handle:this.titleBar}),this.connect(this._moveable,"onMoveStop","_endDrag")):d.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":e.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();if(this._singleChild){if("undefined"!=typeof this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=
this._singleChildOriginalStyle,delete this._singleChildOriginalStyle}else g.set(this.containerNode,{width:"auto",height:"auto"});var a=h.position(this.domNode),b=j.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;if(a.w>=b.w||a.h>=b.h){var c=h.position(this.containerNode),d=Math.min(a.w,b.w)-(a.w-c.w),a=Math.min(a.h,b.h)-(a.h-c.h);if(this._singleChild&&this._singleChild.resize){if("undefined"==typeof this._singleChildOriginalStyle)this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;
this._singleChild.resize({w:d,h:a})}else g.set(this.containerNode,{width:d+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!d.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=j.getBox(this.ownerDocument),c=this._relativePosition,f=c?null:h.position(a);g.set(a,{left:Math.floor(b.l+(c?c.x:(b.w-f.w)/2))+"px",top:Math.floor(b.t+(c?c.y:(b.h-f.h)/2))+"px"})}},_onKey:function(a){if(a.charOrCode){var b=
a.target;a.charOrCode===q.TAB&&this._getFocusItems(this.domNode);var j=this._firstFocusItem==this._lastFocusItem;if(b==this._firstFocusItem&&a.shiftKey&&a.charOrCode===q.TAB)j||o.focus(this._lastFocusItem),l.stop(a);else if(b==this._lastFocusItem&&a.charOrCode===q.TAB&&!a.shiftKey)j||o.focus(this._firstFocusItem),l.stop(a);else{for(;b;){if(b==this.domNode||d.contains(b,"dijitPopup"))if(a.charOrCode==q.ESCAPE)this.onCancel();else return;b=b.parentNode}if(a.charOrCode!==q.TAB)l.stop(a);else if(!s("opera"))try{this._firstFocusItem.focus()}catch(c){}}}},
show:function(){if(!this.open){this._started||this.startup();if(!this._alreadyInitialized)this._setup(),this._alreadyInitialized=!0;this._fadeOutDeferred&&this._fadeOutDeferred.cancel();var a=j.get(this.ownerDocument);this._modalconnects.push(r(a,"scroll",n.hitch(this,"resize")));this._modalconnects.push(r(this.domNode,c._keypress,n.hitch(this,"_onKey")));g.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var d;this._fadeInDeferred=new b(n.hitch(this,
function(){d.stop();delete this._fadeInDeferred}));d=k.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:n.hitch(this,function(){w.show(this,this.underlayAttrs)}),onEnd:n.hitch(this,function(){this.autofocus&&w.isTop(this)&&(this._getFocusItems(this.domNode),o.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return this._fadeInDeferred}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();
var a;this._fadeOutDeferred=new b(n.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(n.hitch(this,"onHide"));a=k.fadeOut({node:this.domNode,duration:this.duration,onEnd:n.hitch(this,function(){this.domNode.style.display="none";w.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=!1;for(var j;j=this._modalconnects.pop();)j.remove();this._relativePosition&&delete this._relativePosition;
this._set("open",!1);return this._fadeOutDeferred}},resize:function(){"none"!=this.domNode.style.display&&(H._singleton&&H._singleton.layout(),this._position(),this._size())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();w.hide(this);this.inherited(arguments)}}),F=a("dijit.Dialog",[N,t],{});F._DialogBase=t;var w=F._DialogLevelManager=
{_beginZIndex:950,show:function(a,b){A[A.length-1].focus=o.curNode;var j=H._singleton;!j||j._destroyed?j=M._underlay=H._singleton=new H(b):j.set(a.underlayAttrs);var c=A[A.length-1].dialog?A[A.length-1].zIndex+2:F._DialogLevelManager._beginZIndex;1==A.length&&j.show();g.set(H._singleton.domNode,"zIndex",c-1);g.set(a.domNode,"zIndex",c);A.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(A[A.length-1].dialog==a){A.pop();var b=A[A.length-1];H._singleton._destroyed||(1==A.length?H._singleton.hide():
(g.set(H._singleton.domNode,"zIndex",b.zIndex-1),H._singleton.set(b.underlayAttrs)));if(a.refocus){a=b.focus;if(b.dialog&&(!a||!f.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(b.dialog.domNode),a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(j){}}}else b=e.indexOf(e.map(A,function(a){return a.dialog}),a),-1!=b&&A.splice(b,1)},isTop:function(a){return A[A.length-1].dialog==a}},A=F._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];s("dijit-legacy-requires")&&p(0,function(){i(["dijit/TooltipDialog"])});
return F})},"yfiles/client/tiles/RectangularSelectionMode":function(){define("yfiles/client/tiles/RectangularSelectionMode","dojo/_base/declare,yfiles/client/tiles/InputMode,yfiles/client/tiles/GraphSelection,yfiles/client/tiles/HitTest,yfiles/client/tiles/widget/GraphCanvas,yfiles/client/tiles/widget/Rubberband,yfiles/client/tiles/HierarchyManager".split(","),function(i,e,c,a,b,f){return i([e],{_rubberBand:null,_selection:null,_hierarchy:null,_connectHandles:null,constructor:function(a,b,c){this._selection=
b;this._rubberBand=new f({canvas:this._canvas,fixCanvas:!0});this._canvas.containerNode.appendChild(this._rubberBand.domNode);this._connectHandles=[];this._hierarchy=c},activate:function(){this.inherited(arguments);window.status="Drag to mark the selection area.";this._rubberBand.activateAt(this._canvas,this._canvas.getMousePosition())},deactivate:function(){if(this.isActive())this._rubberBand.deactivate(),window.status="";this.inherited(arguments)},_attachEventListeners:function(){if(0==this._connectHandles.length)this._connectHandles=
[dojo.connect(this._rubberBand,"onDeactivated",this,"_hideSelectionArea"),dojo.connect(this._rubberBand,"onAreaDone",this,"_applySelectionArea"),dojo.connect(this._selection,"onAddNode",this._canvas,"highlight"),dojo.connect(this._selection,"onRemoveNode",this._canvas,"unhighlight"),dojo.connect(this._selection,"onAddEdge",this._canvas,"highlight"),dojo.connect(this._selection,"onRemoveEdge",this._canvas,"unhighlight"),dojo.connect(this._canvas.getGraph(),"onRemove",this._selection,"removeAll")]},
_detachEventListeners:function(){dojo.forEach(this._connectHandles,dojo.disconnect);this._connectHandles=[]},_applySelectionArea:function(b,c,g,f){var e=this._canvas.zoom,m=b/e,q=c/e,b=(b+g)/e,c=(c+f)/e,f=this._hitTest.getOverlaps(m,q,b,c),f=a.getHitIds(f);if(this._hierarchy){var e=[],n;for(n in f)if(g=f[n],this._hierarchy.isGroupNode(g)){var r=this._hitTest.getBoundsForId(g);m<=r.minX&&q<=r.minY&&r.maxX<=b&&r.maxY<=c&&e.push(g)}else e.push(g);this._selection.addAll(e)}else this._selection.addAll(f);
this.deactivate()},_hideSelectionArea:function(){window.status=""}})})},"dijit/_DialogMixin":function(){define("dijit/_DialogMixin",["dojo/_base/declare","./a11y"],function(i,e){return i("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var c=e._getTabNavigable(this.containerNode);this._firstFocusItem=c.lowest||c.first||this.closeButtonNode||this.domNode;this._lastFocusItem=
c.last||c.highest||this._firstFocusItem}})})},"dijit/layout/utils":function(){define("dijit/layout/utils","dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,../main".split(","),function(i,e,c,a,b,f){function d(a,g){var d=a.resize?a.resize(g):c.setMarginBox(a.domNode,g);d?b.mixin(a,d):(b.mixin(a,c.getMarginBox(a.domNode)),b.mixin(a,g))}f=b.getObject("layout",!0,f);f.marginBox2contentBox=function(b,g){var d=a.getComputedStyle(b),f=c.getMarginExtents(b,d),e=c.getPadBorderExtents(b,
d);return{l:a.toPixelValue(b,d.paddingLeft),t:a.toPixelValue(b,d.paddingTop),w:g.w-(f.w+e.w),h:g.h-(f.h+e.h)}};f.layoutChildren=function(a,c,f,k,m){c=b.mixin({},c);e.add(a,"dijitLayoutContainer");f=i.filter(f,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(i.filter(f,function(a){return"center"==a.region||"client"==a.layoutAlign}));i.forEach(f,function(a){var b=a.domNode,f=a.region||a.layoutAlign;if(!f)throw Error("No region setting for "+a.id);var h=b.style;h.left=c.l+"px";
h.top=c.t+"px";h.position="absolute";e.add(b,"dijitAlign"+(f.substring(0,1).toUpperCase()+f.substring(1)));b={};k&&k==a.id&&(b["top"==a.region||"bottom"==a.region?"h":"w"]=m);"top"==f||"bottom"==f?(b.w=c.w,d(a,b),c.h-=a.h,"top"==f?c.t+=a.h:h.top=c.t+c.h+"px"):"left"==f||"right"==f?(b.h=c.h,d(a,b),c.w-=a.w,"left"==f?c.l+=a.w:h.left=c.l+c.w+"px"):("client"==f||"center"==f)&&d(a,c)})};return{marginBox2contentBox:f.marginBox2contentBox,layoutChildren:f.layoutChildren}})},"dijit/layout/ContentPane":function(){define("dijit/layout/ContentPane",
"dojo/_base/kernel,dojo/_base/lang,../_Widget,../_Container,./_ContentPaneResizeMixin,dojo/string,dojo/html,dojo/i18n!../nls/loading,dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/_base/xhr,dojo/i18n,dojo/when".split(","),function(i,e,c,a,b,f,d,h,g,l,k,m,q,n,r,p,s){return l("dijit.layout.ContentPane",[c,a,b],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:i._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",
errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){for(var b=m.byId(b),c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=e.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);
var a=p.getLocalization("dijit","loading",this.lang);this.loadingMessage=f.substitute(this.loadingMessage,a);this.errorMessage=f.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.title="";q.get(this.domNode,"role")||this.domNode.setAttribute("role","group")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&
e.isFunction(a.startup))a.startup(),a._started=!0},this)},_startChildren:function(){g.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&e.isFunction(a.startup))a.startup(),a._started=!0});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&e.isFunction(a.startup))a.startup(),a._started=!0},this)},setHref:function(a){i.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",
a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new k(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){i.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=
new k(e.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);
if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new k(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};e.isObject(this.ioArgs)&&e.mixin(b,this.ioArgs);var c=this._xhrDfd=
(this.ioMethod||r.get)(b),f;c.then(function(b){f=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return f});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",
!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;g.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(g.forEach(b.parseResults,function(b){if(!b._destroyed)b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),delete b.parseResults);
a||n.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;if(!(c&&c instanceof d._ContentSetter))c=this._contentSetter=new d._ContentSetter({node:this.containerNode,_onError:e.hitch(this,this._onError),onContentError:e.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});var f=e.mixin({cleanContent:this.cleanContent,
extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),f=c.set(e.isObject(a)&&a.domNode?a.domNode:a,f),g=this;return s(f&&f.then?f:c.parseDeferred,function(){delete g._contentSetterParams;b||(g._started&&(g._startChildren(),g._scheduleLayout()),g._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);
c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"yfiles/client/support/_LongTouchPressTimer":function(){define("yfiles/client/support/_LongTouchPressTimer",["dojo/_base/declare"],function(i){return i(null,{_canvas:null,_handler:null,_timeSpan:0,touch:null,worldCoords:null,handle:void 0,constructor:function(e,
c,a){this._canvas=e;this._handler=c;this._timeSpan=a},stop:function(){this.handle&&clearTimeout(this.handle)},restart:function(){this.stop();this.handle=setTimeout(dojo.hitch(this,this._onTick),this._timeSpan)},_onTick:function(){this.handle=void 0;if(null!=this.touch&&null!=this.worldCoords)this._canvas.onTouchLongPress(this.touch,this.worldCoords)}})})},"dojo/i18n":function(){define("dojo/i18n","./_base/kernel,require,./has,./_base/array,./_base/config,./_base/lang,./_base/xhr,./json,module".split(","),
function(i,e,c,a,b,f,d,h,g){c.add("dojo-preload-i18n-Api",1);var l=i.i18n={},k=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,m=function(a,b,c,j){for(var f=[c+j],b=b.split("-"),d="",g=0;g<b.length;g++)d+=(d?"-":"")+b[g],(!a||a[d])&&f.push(c+d+"/"+j);return f},q={},n=function(a,b,c){c=c?c.toLowerCase():i.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b};i.getL10nName=function(a,b,c){return g.id+"!"+n(a,b,c)};var r=function(a,b,c,j,d,g){a([b],function(h){var e=
f.clone(h.root),u=m(!h._v1x&&h,d,c,j);a(u,function(){for(var a=1;a<u.length;a++)e=f.mixin(f.clone(e),arguments[a]);q[b+"/"+d]=e;g()})})},p=function(a){var c=b.extraLocale||[],c=f.isArray(c)?c:[c];c.push(a);return c},s=function(b,j,d){if(c("dojo-preload-i18n-Api")){var g=b.split("*"),e="preload"==g[1];e&&(q[b]||(q[b]=1,t(g[2],h.parse(g[3]),1,j)),d(1));if(!(g=e))v&&o.push([b,j,d]),g=v;if(g)return}var b=k.exec(b),u=b[1]+"/",m=b[5]||b[4],l=u+m,g=(b=b[5]&&b[4])||i.locale,n=l+"/"+g,b=b?[g]:p(g),s=b.length,
D=function(){--s||d(f.delegate(q[n]))};a.forEach(b,function(a){var b=l+"/"+a;c("dojo-preload-i18n-Api")&&C(b);q[b]?D():r(j,l,u,m,a,D)})};if(c("dojo-unit-tests"))var j=l.unitTests=[];c("dojo-preload-i18n-Api");var u=l.normalizeLocale=function(a){a=a?a.toLowerCase():i.locale;return"root"==a?"ROOT":a},v=0,o=[],t=l._preloadLocalizations=function(b,c,j,f){function g(a,b){f.isXdUrl(e.toUrl(a+".js"))||j?f([a],b):J([a],b,f)}function d(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}
function h(j){j=u(j);d(j,function(j){if(0<=a.indexOf(c,j)){var f=b.replace(/\./g,"/")+"_"+j;v++;g(f,function(a){for(var b in a)q[e.toAbsMid(b)+"/"+j]=a[b];for(--v;!v&&o.length;)s.apply(null,o.shift())});return!0}return!1})}f=f||e;h();a.forEach(i.config.extraLocale,h)},C=function(){},B={},D=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
J=function(b,c,j){var f=[];a.forEach(b,function(a){function b(j){j=D(j,C,a,B);j===B?f.push(q[c]=B.result):(j instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+c,j),j={}),f.push(q[c]=/nls\/[^\/]+\/[^\/]+$/.test(c)?j:{root:j,_v1x:1}))}var c=j.toUrl(a+".js");if(q[c])f.push(q[c]);else{var g=j.syncLoadNls(a);if(g)f.push(g);else if(d)d.get({url:c,sync:!0,load:b,error:function(){f.push(q[c]={})}});else try{j.getText(c,!0,b)}catch(h){f.push(q[c]={})}}});c&&c.apply(null,f)},C=function(a){for(var b,
c=a.split("/"),j=i.global[c[0]],f=1;j&&f<c.length-1;j=j[c[f++]]);j&&((b=j[c[f]])||(b=j[c[f].replace(/-/g,"_")]),b&&(q[a]=b));return b};l.getLocalization=function(a,b,c){var j,a=n(a,b,c);s(a,!e.isXdUrl(e.toUrl(a+".js"))?function(a,b){J(a,b,e)}:e,function(a){j=a});return j};c("dojo-unit-tests")&&j.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=D("{prop:1}",C,"nonsense",B);a.is({prop:1},b);a.is(void 0,b[1]);b=D("({prop:1})",C,"nonsense",B);a.is({prop:1},b);a.is(void 0,b[1]);b=D("{'prop-x':1}",
C,"nonsense",B);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=D("({'prop-x':1})",C,"nonsense",B);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=D("define({'prop-x':1})",C,"nonsense",B);a.is(B,b);a.is({"prop-x":1},B.result);b=D("define('some/module', {'prop-x':1})",C,"nonsense",B);a.is(B,b);a.is({"prop-x":1},B.result);b=D("this is total nonsense and should throw an error",C,"nonsense",B);a.is(b instanceof Error,!0)})});return f.mixin(l,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:s,cache:q})})},
"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe","require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),function(i,e,c,a,b,f,d,h,g){var l=new function(){var f=[];this.pop=function(){var d;f.length?(d=f.pop(),d.style.display=""):(9>h("ie")?(d="<iframe src='"+(c.dojoBlankHtmlUrl||i.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",
d=g.doc.createElement(d)):(d=a.create("iframe"),d.src='javascript:""',d.className="dijitBackgroundIframe",d.setAttribute("role","presentation"),b.set(d,"opacity",0.1)),d.tabIndex=-1);return d};this.push=function(a){a.style.display="none";f.push(a)}};e.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(h("ie")||h("mozilla")){var c=this.iframe=l.pop();a.appendChild(c);7>h("ie")||h("quirks")?(this.resize(a),this._conn=d(a,"resize",f.hitch(this,function(){this.resize(a)}))):b.set(c,{width:"100%",
height:"100%"})}};f.extend(e.BackgroundIframe,{resize:function(a){this.iframe&&b.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&(l.push(this.iframe),delete this.iframe)}});return e.BackgroundIframe})},"yfiles/client/tiles/widget/PlaceableDialog":function(){define("yfiles/client/tiles/widget/PlaceableDialog",["dojo/_base/declare","dojo/dom-geometry","dojo/window","dijit/Dialog"],function(i,e,
c,a){return i([a],{x:0,y:-100,_position:function(){var a=e.getMarginBox(this.domNode),f=c.getBox(),d=this.x,h=this.y;d+a.width>f.w&&(d-=a.width);0>h&&(h=10);with(this.domNode.style)left=d+"px",top=h+"px"}})})},"yfiles/client/tiles/HierarchyManager":function(){define("yfiles/client/tiles/HierarchyManager",["dojo/_base/declare","dojo/request/xhr","dojo/Evented","yfiles/client/tiles/Graph"],function(i,e,c){return i([c],{_graph:null,_type:null,_parent:null,_stateLabelBounds:null,_visibleGraphParent:null,
constructor:function(a){this._graph=a;this._type={};this._parent={};this._stateLabelBounds={};dojo.connect(a,"onLoad",this,"refresh");dojo.connect(a,"onRemove",this,"refresh");dojo.connect(a,"onNodesMoved",this,"refresh");dojo.connect(a,"onNodesResized",this,"refresh");dojo.connect(a,"onNodeCreated",this,"_onNewNode");this.refresh()},refresh:function(){if(this._graph){var a=this._graph.getName();if(a&&0<a.length){var b={path:a},c=this;e.get(this._graph.getBaseURL()+"/getHierarchyInfo",{query:b,preventCache:!0,
handleAs:"json"}).then(function(b){c._initializeHierarchyInfo(b,a)})}else this._clearHierarchyInfo(),this.onNewHierarchyInfo(a)}},setData:function(a){this._initializeHierarchyInfo(a,this.getGraph().getName())},_initializeHierarchyInfo:function(a,b){this._clearHierarchyInfo();for(var c=0;c<a.length;c++){var d=a[c],h=d.i;this._type[h]=d.t;this._parent[h]=d.p;this._stateLabelBounds[h]=d.s}this.onNewHierarchyInfo(b)},_clearHierarchyInfo:function(){delete this._type;this._type={};delete this._parent;this._parent=
{};delete this._stateLabelBounds;this._stateLabelBounds={}},_onNewNode:function(a){this._type[a]=0;this._parent[a]=this._visibleGraphParent},getGraph:function(){return this._graph},getNodes:function(a){var b=[],a=dojo.delegate({excludeNormalNodes:!1,excludeFolderNodes:!1,excludeGroupNodes:!1},a),c;for(c in this._type){var d=this._type[c];if(0==d&&!a.excludeNormalNodes||1==d&&!a.excludeGroupNodes||2==d&&!a.excludeFolderNodes)(!a.onlyChildrenOf||a.onlyChildrenOf==this._parent[c])&&b.push(c)}return b},
getVisibleGraphParent:function(){return this._visibleGraphParent},isNormalNode:function(a){return 0==this._type[a]},isGroupNode:function(a){return 1==this._type[a]},isFolderNode:function(a){return 2==this._type[a]},getParent:function(a){return this._parent[a]},isInStateLabelBox:function(a,b,c){return(a=this._stateLabelBounds[a])&&a.x<=b&&a.y<=c&&b<=a.x+a.w&&c<=a.y+a.h},createGroup:function(a){var b=this._graph.getName();if(b){var c=dojo.clone(a);if(c.subNodeIds)c.subNodeIds=this._createIdsString(c.subNodeIds);
var d=a.customData,a=dojo.delegate({name:b,x:0,y:0},c),h=this;e.post(this._graph.getBaseURL()+"/createGroup",{data:a,handleAs:"json"}).then(function(a){h._initializeHierarchyInfo(a.hinfo,b);h.onCreateGroup(a.id,a.bounds,b,d)},function(){h.onCreateGroupFailed(b,d)})}else this.onCreateGroupFailed(null,d)},moveToSubgraph:function(a,b,c){var d=this._graph.getName();if(d){var h=this._createIdsString(a),h={name:d,subNodeIds:h};if(b)h.parentNodeId=b;var g=this;e.post(this._graph.getBaseURL()+"/moveToSubgraph",
{data:h,handleAs:"json"}).then(function(b){g._initializeHierarchyInfo(b.hinfo,d);g.onMoveToSubgraph(b.id,b.bounds,a,c)},function(){g.onMoveToSubgraphFailed(d,b,a,c)})}else this.onMoveToSubgraphFailed(null,b,a,c)},_createIdsString:function(a){var b="";dojo.forEach(a,function(a){b+=a+","});0<b.length&&(b=b.substring(0,b.length-1));return b},moveToParent:function(a,b){var c=this._graph.getName();if(c){var d=this._createIdsString(a),d={name:c,subNodeIds:d},h=this;e.post(this._graph.getBaseURL()+"/moveToParent",
{data:d,handleAs:"json"}).then(function(d){h._initializeHierarchyInfo(d.hinfo,c);h.onMoveToParent(d.id,d.bounds,a,b)},function(){h.onMoveToParentFailed(c,a,b)})}else this.onMoveToParentFailed(null,a,b)},closeGroup:function(a,b){var c=this._graph.getName();if(c){var d={name:c,id:a},h=this;e.post(this._graph.getBaseURL()+"/closeGroup",{data:d,handleAs:"json"}).then(function(d){h._initializeHierarchyInfo(d.hinfo,c);h.onCloseGroup(a,d.bounds,b)},function(){h.onCloseGroupFailed(c,a,b)})}else this.onCloseGroupFailed(null,
a,b)},openGroup:function(a,b){var c=this._graph.getName(),d={name:c,id:a};if(c){var h=this;e.post(this._graph.getBaseURL()+"/openGroup",{data:d,handleAs:"json"}).then(function(d){h._initializeHierarchyInfo(d.hinfo,c);h.onOpenGroup(a,d.bounds,b)},function(){h.onOpenGroupFailed(c,a,b)})}else this.onOpenGroupFailed(null,a,b)},switchToSubgraph:function(a,b){var c=this._graph.getName(),d={name:c,id:a};if(c){var h=this;e.post(this._graph.getBaseURL()+"/switchToSubgraph",{data:d,handleAs:"json"}).then(function(a){h._visibleGraphParent=
a.id;h._initializeHierarchyInfo(a.hinfo,c);h.onSwitchToSubgraph(a.id,a.bounds,b)},function(){h.onSwitchToSubgraphFailed(c,a,b)})}else this.onSwitchToSubgraphFailed(null,a,b)},switchToParent:function(a){var b={name:this._graph.getName()};if(this._graph.getName()){var c=this;e.post(this._graph.getBaseURL()+"/switchToParent",{data:b,handleAs:"json"}).then(function(b){c._visibleGraphParent=b.id;c._initializeHierarchyInfo(b.hinfo,name);c.onSwitchToParent(b.id,b.bounds,a)},function(){c.onSwitchToParentFailed(c._graph.getName(),
a)})}else this.onSwitchToParentFailed(null,a)},onNewHierarchyInfo:function(){},onCreateGroup:function(){},onCreateGroupFailed:function(){},onCloseGroup:function(){},onOpenGroup:function(){},onCloseGroupFailed:function(){},onOpenGroupFailed:function(){},onSwitchToSubgraph:function(){},onSwitchToSubgraphFailed:function(){},onSwitchToParent:function(){},onSwitchToParentFailed:function(){},onMoveToSubgraph:function(){},onMoveToSubgraphFailed:function(){},onMoveToParent:function(){},onMoveToParentFailed:function(){}})})},
"yfiles/client/tiles/EditLabelMode":function(){define("yfiles/client/tiles/EditLabelMode","dojo/_base/declare,yfiles/client/tiles/InputMode,yfiles/client/tiles/Graph,yfiles/client/tiles/HitTest,yfiles/client/tiles/widget/GraphCanvas,yfiles/client/tiles/widget/PlaceableDialog".split(","),function(i,e,c,a,b,f){return i([e],{_labelDialog:null,_labelText:null,_okButton:null,_cancelButton:null,nodeOrLabel:null,constructor:function(){var a=dojo.doc.createElement("div");this._canvas.containerNode.appendChild(a);
var b=dojo.doc.createElement("input");b.type="text";b.name="label";b.size=30;b.maxsize=300;a.appendChild(b);this._labelText=b;b=dojo.doc.createElement("input");b.type="button";b.value="OK";a.appendChild(b);this._okButton=b;this._labelDialog=new f({title:"Edit Label",duration:500},a)},activate:function(){this.inherited(arguments);if(this.nodeOrLabel){var b=a.getElementType(this.nodeOrLabel);if("Node"==b||"NodeLabel"==b){this._editLabel();return}}this.deactivate()},deactivate:function(){this.inherited(arguments);
this._labelDialog.hide()},_attachEventListeners:function(){this._clickHandle=dojo.connect(this._okButton,"onclick",this,"_labelDone");this._hideHandle=dojo.connect(this._labelDialog,"hide",this,"deactivate")},_detachEventListeners:function(){dojo.disconnect(this._clickHandle);dojo.disconnect(this._hideHandle)},_editLabel:function(){this._canvas.getGraph().getLabel(this.nodeOrLabel,this,this._openLabelEditor,this.deactivate)},_openLabelEditor:function(a){this._labelText.value=a;a=this._canvas.getMousePosition();
this._labelDialog.x=a.x;this._labelDialog.y=a.y-25;this._labelDialog.show()},_labelDone:function(){var a=this._labelText.value;this._canvas.getGraph().setLabel(this.nodeOrLabel,a);this.deactivate()}})})},"yfiles/client/tiles/ResizeNodesMode":function(){define("yfiles/client/tiles/ResizeNodesMode","dojo/_base/declare,yfiles/client/tiles/InputMode,yfiles/client/tiles/Graph,yfiles/client/tiles/GraphSelection,yfiles/client/tiles/HitTest,yfiles/client/tiles/widget/GraphCanvas".split(","),function(i,e){return i([e],
{mainNode:null,mode:null,_fixLeft:!0,_fixTop:!0,_fixWidth:!1,_fixHeight:!1,_selection:null,_ghosts:null,_MouseUpHandle:null,_MouseMoveHandle:null,_routeEdges:!1,constructor:function(c,a){this._selection=a;this._ghosts={};this._canvas.highlightNodeSurroundPixels=0;this.mode="SE"},activate:function(){this.inherited(arguments);if(null==this.mainNode||0==this._selection.getNodes().length)this.deactivate();else if(this.mode){if("NW"==this.mode)this._fixHeight=this._fixWidth=this._fixTop=this._fixLeft=
!1;else if("N"==this.mode)this._fixLeft=!0,this._fixTop=!1,this._fixWidth=!0,this._fixHeight=!1;else if("NE"==this.mode)this._fixLeft=!0,this._fixHeight=this._fixWidth=this._fixTop=!1;else if("E"==this.mode)this._fixTop=this._fixLeft=!0,this._fixWidth=!1,this._fixHeight=!0;else if("SE"==this.mode)this._fixTop=this._fixLeft=!0,this._fixHeight=this._fixWidth=!1;else if("S"==this.mode)this._fixWidth=this._fixTop=this._fixLeft=!0,this._fixHeight=!1;else if("SW"==this.mode)this._fixLeft=!1,this._fixTop=
!0,this._fixHeight=this._fixWidth=!1;else if("W"==this.mode)this._fixLeft=!1,this._fixTop=!0,this._fixWidth=!1,this._fixHeight=!0;else{this.deactivate();return}this._showGhosts()}else this.deactivate()},deactivate:function(){this.inherited(arguments)},_onMouseUp:function(){this._hideGhosts();this._resizeNodes();this.deactivate()},_showGhosts:function(){this._ghosts={};for(var c=this._selection.getNodes(),a=0;a<c.length;a++){var b=c[a],f=this._hitTest.getBoundsForId(b),d=this._canvas.zoom,h=dojo.doc.createElement("div");
this._ghosts[b]=h;this._canvas.containerNode.appendChild(h);h.style.position="absolute";dojo.style(h,"left",this._canvas.x+f.minX*d+"px");dojo.style(h,"top",this._canvas.y+f.minY*d+"px");dojo.style(h,"width",f.width()*d+"px");dojo.style(h,"height",f.height()*d+"px");h.style.backgroundColor="yellow";dojo.style(h,"opacity",0.5)}this._MouseUpHandle=dojo.connect(this._canvas,"onMouseUp",this,"_onMouseUp");this._MouseMoveHandle=dojo.connect(this._canvas,"onMouseMove",this,"_resizeGhosts")},_resizeGhosts:function(){for(var c=
this._canvas.zoom,a=this._computeDelta(),b=a.width,a=a.height,f=this._selection.getNodes(),d=0;d<f.length;d++){var h=f[d],g=this._ghosts[h];if(null!=g){var e=this._hitTest.getBoundsForId(h),h=b,k=a,m=e.width(),q=e.height(),n=e.minX,e=e.minY;-h>=m-1&&(h=-m+1);-k>=q-1&&(k=-q+1);this._fixWidth||dojo.style(g,"width",c*(m+h)+"px");this._fixHeight||dojo.style(g,"height",c*(q+k)+"px");this._fixLeft||dojo.style(g,"left",c*(n-h)+this._canvas.x+"px");this._fixTop||dojo.style(g,"top",c*(e-k)+this._canvas.y+
"px")}}},_hideGhosts:function(){dojo.disconnect(this._MouseUpHandle);dojo.disconnect(this._MouseMoveHandle);for(var c=this._selection.getNodes(),a=0;a<c.length;a++){var b=c[a],f=this._ghosts[b];null!=f&&(delete this._ghosts[b],this._canvas.containerNode.removeChild(f))}},_resizeNodes:function(){var c=this._computeDelta();this._canvas.getGraph().resizeNodes(this._selection.getNodes(),this.mode,c.width,c.height,this._routeEdges)},_computeDelta:function(){var c=this._canvas.getWorldCoordinates(),a=this._hitTest.getBoundsForId(this.mainNode),
b;b=this._fixLeft?Math.max(0,c.x-a.minX):Math.max(0,a.maxX-c.x);c=this._fixTop?Math.max(0,c.y-a.minY):Math.max(0,a.maxY-c.y);b=this._fixWidth?0:b-a.width();a=this._fixHeight?0:c-a.height();return{width:b,height:a}}})})},"dojo/dnd/Mover":function(){define("dojo/dnd/Mover","../_base/array,../_base/declare,../_base/event,../_base/lang,../sniff,../_base/window,../dom,../dom-geometry,../dom-style,../Evented,../on,../touch,./common,./autoscroll".split(","),function(i,e,c,a,b,f,d,h,g,l,k,m,q,n){return e("dojo.dnd.Mover",
[l],{constructor:function(b,g,f){this.node=d.byId(b);this.marginBox={l:g.pageX,t:g.pageY};this.mouseButton=g.button;g=this.host=f;b=b.ownerDocument;this.events=[k(b,m.move,a.hitch(this,"onFirstMove")),k(b,m.move,a.hitch(this,"onMouseMove")),k(b,m.release,a.hitch(this,"onMouseUp")),k(b,"dragstart",c.stop),k(b.body,"selectstart",c.stop)];n.autoScrollStart(b);if(g&&g.onMoveStart)g.onMoveStart(this)},onMouseMove:function(a){n.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+
a.pageY},a);c.stop(a)},onMouseUp:function(a){(b("webkit")&&b("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();c.stop(a)},onFirstMove:function(a){var b=this.node.style,c,j=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=h.getMarginBox(this.node);c=f.doc.body;var d=g.getComputedStyle(c),e=h.getMarginBox(c,d),d=h.getContentBox(c,d);c=b.l-(d.l-e.l);
b=b.t-(d.t-e.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(j&&j.onFirstMove)j.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){i.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"yfiles/client/tiles/widget/CanvasDragLine":function(){define("yfiles/client/tiles/widget/CanvasDragLine",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojox/gfx"],
function(i,e,c,a){return i([e,c],{templateString:'<div data-dojo-attach-point="root" class="canvasDragLineRoot" style="overflow:hidden;width:100%;height:100%;"></div>',root:null,canvas:null,_x1:0,_y1:0,_x2:0,_y2:0,_surface:null,_line:null,_mouseDownHandle:null,_dragLineHandle:null,_lineDoneHandle:null,_active:!1,activate:function(a){this.canvas=a;this._active=!0;this._mouseDownHandle=this.connect(a,"onMouseDown","_onMouseDown")},activateAt:function(a,c){this.canvas=a;this._onMouseDownAt(c);this._active=
!0},deactivate:function(){if(this._active)this._hideArea(),this._active=!1},onLineChange:function(){},onLineDone:function(){},onDeactivated:function(){},_onMouseDown:function(a){this.disconnect(this._mouseDownHandle);this._onMouseDownAt({x:a.pageX,y:a.pageY})},_onMouseDownAt:function(b){var c=this.canvas,d=dojo.coords(this.root.parentNode,!1);this._x1=b.x-d.x;this._y1=b.y-d.y;this._surface=a.createSurface(this.root,c.width,c.height);this._line=this._surface.createLine({x1:this._x1,y1:this._y1,x2:this._x1+
1,y2:this._y1+1});this._line.setStroke({color:"blue"});this._dragLineHandle=this.connect(c,"onMouseMove","_dragLine");this._lineDoneHandle=this.connect(c,"onMouseUp","_dragLineDone")},_dragLine:function(a){var c=a.pageX,a=a.pageY,d=dojo.coords(this.root.parentNode,!1);this._x2=c-d.x;this._y2=a-d.y;this._line.setShape({x1:this._x1,y1:this._y1,x2:this._x2,y2:this._y2});this.onLineChange(this._x1,this._y1,this._x2,this._y2)},_dragLineDone:function(){var a=this.canvas;this.onLineDone(this._x1-a.x,this._y1-
a.y,this._x2-a.x,this._y2-a.y);this.deactivate()},_hideArea:function(){this._mouseDownHandle&&this.disconnect(this._mouseDownHandle);this.disconnect(this._dragLineHandle);this.disconnect(this._lineDoneHandle);if(this._surface)this._surface.remove(this._line,!0),this._surface.clipNode?this.root.removeChild(this._surface.clipNode):this.root.removeChild(this._surface.rawNode),this._surface=null;this.onDeactivated()}})})},"dojo/Stateful":function(){define("dojo/Stateful",["./_base/declare","./_base/lang",
"./_base/array","dojo/when"],function(i,e,c,a){return i("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var c=this._attrPairNames;return c[a]?c[a]:c[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,c){return"function"===typeof this[c.g]?this[c.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(b,c){if("object"===typeof b){for(var d in b)b.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,b[d]);return this}d=
this._getAttrNames(b);var e=this._get(b,d);d=this[d.s];var g;"function"===typeof d?g=d.apply(this,Array.prototype.slice.call(arguments,1)):this[b]=c;if(this._watchCallbacks){var l=this;a(g,function(){l._watchCallbacks(b,e,c)})}return this},_changeAttrValue:function(a,c){var d=this.get(a);this[a]=c;this._watchCallbacks&&this._watchCallbacks(a,d,c);return this},watch:function(a,f){var d=this._watchCallbacks;if(!d)var e=this,d=this._watchCallbacks=function(a,b,c,g){var f=function(d){if(d)for(var d=d.slice(),
g=0,j=d.length;g<j;g++)d[g].call(e,a,b,c)};f(d["_"+a]);g||f(d["*"])};!f&&"function"===typeof a?(f=a,a="*"):a="_"+a;var g=d[a];"object"!==typeof g&&(g=d[a]=[]);g.push(f);var l={};l.unwatch=l.remove=function(){var a=c.indexOf(g,f);-1<a&&g.splice(a,1)};return l}})})},"yfiles/client/tiles/GroupNavigationMode":function(){define("yfiles/client/tiles/GroupNavigationMode",["dojo/_base/declare","yfiles/client/tiles/InputMode","yfiles/client/tiles/HitTest","yfiles/client/tiles/HierarchyManager","yfiles/client/tiles/widget/GraphCanvas"],
function(i,e){return i([e],{isEnterExitGesture:null,_hierarchy:null,_connectHandles:null,_convertedOnSwitch:null,_isDrag:!1,constructor:function(c,a){this._hierarchy=a;this._connectHandles=[];this._convertedOnSwitch={};this._isDrag=!1;this.isEnterExitGesture=function(a){return a.metaKey&&a.shiftKey||a.ctrlKey&&a.shiftKey}},activate:function(){this.inherited(arguments)},deactivate:function(){this.inherited(arguments)},_onMouseDown:function(){this._isDrag=!1},_onMouseMove:function(){this._isDrag=!0},
_onClickNode:function(c,a,b){this._isDrag||(null!=this.isEnterExitGesture&&this.isEnterExitGesture(b)?this._hierarchy.isNormalNode(c)||(this._hierarchy.isGroupNode(c)&&(this._convertedOnSwitch[c]=!0),this._hierarchy.switchToSubgraph(c)):this._updateGroupState(c,b))},_onClickNodeLabel:function(c,a,b){this._isDrag||(c=this._canvas.getHitTest().getLabelInfo(c))&&this._updateGroupState(c.mainElementId,b)},_onClickPaper:function(c,a){if(!this._isDrag&&null!=this.isEnterExitGesture&&this.isEnterExitGesture(a)){var b=
this._hierarchy.getVisibleGraphParent();if(null!=b)this._switchedFromChild=b,this._hierarchy.switchToParent()}},_refreshCanvas:function(c,a){this._canvas.refresh(a,null,!0);this._canvas.invalidateSVG();if(this._switchedFromChild)this._canvas.fitContent(),this._switchedFromChild=null},_refreshCanvasOnGroupSwitch:function(c,a){this._refreshCanvas(c,a);this._canvas.fitContent()},_onSwitchToParent:function(c,a){this._switchedFromChild&&this._convertedOnSwitch[this._switchedFromChild]?(this._hierarchy.openGroup(this._switchedFromChild),
delete this._convertedOnSwitch[this._switchedFromChild]):(this._switchedFromChild=null,this._refreshCanvasOnGroupSwitch(c,a))},_clear:function(){this._convertedOnSwitch={}},_attachEventListeners:function(){if(0==this._connectHandles.length)this._connectHandles=[dojo.connect(this._canvas,"onClickPaper",this,"_onClickPaper"),dojo.connect(this._canvas,"onClickNode",this,"_onClickNode"),dojo.connect(this._canvas,"onTapNode",this,"_onClickNode"),dojo.connect(this._canvas,"onClickNodeLabel",this,"_onClickNodeLabel"),
dojo.connect(this._canvas,"onTapNodeLabel",this,"_onClickNodeLabel"),dojo.connect(this._canvas,"onMouseDown",this,"_onMouseDown"),dojo.connect(this._canvas,"onMouseMove",this,"_onMouseMove"),dojo.connect(this._canvas,"pathSet",this,"_clear"),dojo.connect(this._hierarchy,"onCloseGroup",this,"_refreshCanvas"),dojo.connect(this._hierarchy,"onOpenGroup",this,"_refreshCanvas"),dojo.connect(this._hierarchy,"onSwitchToSubgraph",this,"_refreshCanvasOnGroupSwitch"),dojo.connect(this._hierarchy,"onSwitchToParent",
this,"_onSwitchToParent")]},_detachEventListeners:function(){dojo.forEach(this._connectHandles,dojo.disconnect);this._connectHandles=[]},_updateGroupState:function(c,a){if((null==this.isEnterExitGesture||!this.isEnterExitGesture(a))&&!this._hierarchy.isNormalNode(c)){var b=this._canvas.getWorldCoordinates();this._hierarchy.isInStateLabelBox(c,b.x,b.y)&&(this._hierarchy.isGroupNode(c)?(this._canvas.pushTiles(),this._hierarchy.closeGroup(c)):this._hierarchy.isFolderNode(c)&&(this._canvas.pushTiles(),
this._hierarchy.openGroup(c)))}}})})},"dojo/touch":function(){define("dojo/touch","./_base/kernel,./aspect,./dom,./on,./has,./mouse,./ready,./_base/window".split(","),function(i,e,c,a,b,f,d,h){function g(b){return function(c,d){return a(c,b,d)}}var e=b("touch"),l=!1;b("ios")&&(b=navigator.userAgent.match(/OS ([\d_]+)/)?RegExp.$1:"1",l=5>parseFloat(b.replace(/_/,".").replace(/_/g,"")));var k,m;e&&(d(function(){m=h.body();h.doc.addEventListener("touchstart",function(b){var c=m;m=b.target;a.emit(c,"dojotouchout",
{target:c,relatedTarget:m,bubbles:!0});a.emit(m,"dojotouchover",{target:m,relatedTarget:c,bubbles:!0})},!0);a(h.doc,"touchmove",function(b){if((b=h.doc.elementFromPoint(b.pageX-(l?0:h.global.pageXOffset),b.pageY-(l?0:h.global.pageYOffset)))&&m!==b)a.emit(m,"dojotouchout",{target:m,relatedTarget:b,bubbles:!0}),a.emit(b,"dojotouchover",{target:b,relatedTarget:m,bubbles:!0}),m=b})}),k=function(b,d){return a(h.doc,"touchmove",function(a){if(b===h.doc||c.isDescendant(m,b))a.target=m,d.call(this,a)})});
f={press:g(e?"touchstart":"mousedown"),move:e?k:g("mousemove"),release:g(e?"touchend":"mouseup"),cancel:e?g("touchcancel"):f.leave,over:g(e?"dojotouchover":"mouseover"),out:g(e?"dojotouchout":"mouseout"),enter:f._eventHandler(e?"dojotouchover":"mouseover"),leave:f._eventHandler(e?"dojotouchout":"mouseout")};return i.touch=f})},"yfiles/client/tiles/GraphSelection":function(){define("yfiles/client/tiles/GraphSelection",["dojo/_base/declare","dojo/Evented","yfiles/client/tiles/HitTest"],function(i,e,
c){return i([e],{_nodes:null,_edges:null,_size:0,constructor:function(a,b){this.setSelectNodes(a);this.setSelectEdges(b);this._size=0},setSelectNodes:function(a){if(a){if(!this._nodes)this._nodes={}}else this.removeAll(this.getNodes()),this._nodes=null},setSelectEdges:function(a){if(a){if(!this._edges)this._edges={}}else this.removeAll(this.getEdges()),this._edges=null},getSize:function(){return this._size},getNodes:function(){var a=[];this._getElems(this._nodes,a);return a},getEdges:function(){var a=
[];this._getElems(this._edges,a);return a},get:function(){var a=[];this._getElems(this._nodes,a);this._getElems(this._edges,a);return a},add:function(a){switch(c.getElementType(a)){case "Node":if(this._nodes&&!this._nodes[a])return this._nodes[a]=!0,this._size++,this.onAddNode(a),!0;break;case "Edge":if(this._edges&&!this._edges[a])return this._edges[a]=!0,this._size++,this.onAddEdge(a),!0}return!1},remove:function(a){switch(c.getElementType(a)){case "Node":if(this._nodes&&this._nodes[a])return delete this._nodes[a],
this._size--,this.onRemoveNode(a),!0;break;case "Edge":if(this._edges&&this._edges[a])return delete this._edges[a],this._size--,this.onRemoveEdge(a),!0}return!1},toggle:function(a){return this.isSelected(a)?this.remove(a):this.add(a)},addAll:function(a){for(var b=0;b<a.length;b++)this.add(a[b])},removeAll:function(a){for(var b=0;b<a.length;b++)this.remove(a[b])},toggleAll:function(a){for(var b=0;b<a.length;b++)this.toggle(a[b])},isSelected:function(a){return this._nodes&&this._nodes[a]||this._edges&&
this._edges[a]?!0:!1},clear:function(){this.removeAll(this.getEdges());this.removeAll(this.getNodes())},onAddNode:function(){},onAddEdge:function(){},onRemoveNode:function(){},onRemoveEdge:function(){},_getElems:function(a,b){if(a)for(var c in a)a[c]&&b.push(c)}})})},"yfiles/yfiles":function(){define("yfiles/yfiles","../yfiles/client/support/HitInfo,../yfiles/client/support/HitInfoData,../yfiles/client/support/TouchPointHandler,../yfiles/client/support/ViewportLimiter,../yfiles/client/support/_LongTouchPressTimer,../yfiles/client/svg/widget/SVGViewPort,../yfiles/client/tiles/CreateEdgeMode,../yfiles/client/tiles/EditLabelMode,../yfiles/client/tiles/EditMode,../yfiles/client/tiles/Graph,../yfiles/client/tiles/GraphBounds,../yfiles/client/tiles/GraphHighlighter,../yfiles/client/tiles/GraphSelection,../yfiles/client/tiles/GroupNavigationMode,../yfiles/client/tiles/HierarchyManager,../yfiles/client/tiles/HitTest,../yfiles/client/tiles/InputMode,../yfiles/client/tiles/MoveSelectionMode,../yfiles/client/tiles/MoveViewportInputMode,../yfiles/client/tiles/NavigationInputMode,../yfiles/client/tiles/PinchInputMode,../yfiles/client/tiles/RectangularSelectionMode,../yfiles/client/tiles/ResizeHighlighter,../yfiles/client/tiles/ResizeNodesMode,../yfiles/client/tiles/ServerAction,../yfiles/client/tiles/SquelchClickMode,../yfiles/client/tiles/UndoManager,../yfiles/client/tiles/ZoomAreaMode,../yfiles/client/tiles/widget/CanvasDragLine,../yfiles/client/tiles/widget/GraphCanvas,../yfiles/client/tiles/widget/PlaceableDialog,../yfiles/client/tiles/widget/Rubberband,../yfiles/client/tiles/widget/ViewPortMarker,../yfiles/client/tiles/widget/_MarkerMoveable".split(","),
function(){return null})},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin","dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/on,dojo/ready,dojo/_base/window,./registry".split(","),function(i,e,c,a,b,f,d,h,g,l){e=e("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);i.forEach("disabled,readOnly,checked,selected,focused,state,hovering,active,_opened".split(","),function(a){this.watch(a,
f.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":this._set("active",!0);break;case "mouseup":case "touchend":this._set("active",
!1)}},_setStateClass:function(){function a(c){b=b.concat(i.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,d={};i.forEach(c.className.split(" "),
function(a){d[a]=!0});"_stateClasses"in this&&i.forEach(this._stateClasses,function(a){delete d[a]});i.forEach(b,function(a){d[a]=!0});var g=[],f;for(f in d)g.push(f);c.className=g.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(b,c,d){function g(d){a.toggle(b,c+"Active",d)}if(!this.disabled&&!this.readOnly)switch(d.type){case "mouseover":a.toggle(b,c+"Hover",!0);break;case "mouseout":a.toggle(b,c+"Hover",!1);g(!1);break;case "mousedown":case "touchstart":g(!0);break;case "mouseup":case "touchend":g(!1);
break;case "focus":case "focusin":a.toggle(b,c+"Focused",!0);break;case "blur":case "focusout":a.toggle(b,c+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});h(function(){function a(b){if(!c.isDescendant(b.relatedTarget,b.target))for(var d=b.target;d&&d!=b.relatedTarget;d=d.parentNode)if(d._cssState){var g=l.getEnclosingWidget(d);g&&(d==g.domNode?g._cssMouseEvent(b):g._subnodeCssMouseEvent(d,d._cssState,b))}}function f(b){b.target=b.srcElement;a(b)}var e=g.body(),h=(b("touch")?[]:["mouseover",
"mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);i.forEach(h,function(b){e.addEventListener?e.addEventListener(b,a,!0):e.attachEvent("on"+b,f)});d(e,"focusin, focusout",function(a){var b=a.target;b._cssState&&!b.getAttribute("widgetId")&&l.getEnclosingWidget(b)._subnodeCssMouseEvent(b,b._cssState,a)})});return e})},"dojox/collections/_base":function(){define("dojox/collections/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(i,e,c){i=e.getObject("dojox.collections",
!0);i.DictionaryEntry=function(a,b){this.key=a;this.value=b;this.valueOf=function(){return this.value};this.toString=function(){return""+this.value}};i.Iterator=function(a){var b=0;this.element=a[b]||null;this.atEnd=function(){return b>=a.length};this.get=function(){return this.atEnd()?null:this.element=a[b++]};this.map=function(b,d){return c.map(a,b,d)};this.reset=function(){b=0;this.element=a[b]}};i.DictionaryIterator=function(a){var b=[],f={},d;for(d in a)f[d]||b.push(a[d]);var e=0;this.element=
b[e]||null;this.atEnd=function(){return e>=b.length};this.get=function(){return this.atEnd()?null:this.element=b[e++]};this.map=function(a,d){return c.map(b,a,d)};this.reset=function(){e=0;this.element=b[e]}};return i})},"dojo/_base/url":function(){define("dojo/_base/url",["./kernel"],function(i){var e=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,c=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,a=function(){for(var b=arguments,f=[b[0]],d=1;d<b.length;d++)if(b[d]){var h=
new a(b[d]+""),f=new a(f[0]+"");if(""==h.path&&!h.scheme&&!h.authority&&!h.query){if(null!=h.fragment)f.fragment=h.fragment;h=f}else if(!h.scheme&&(h.scheme=f.scheme,!h.authority&&(h.authority=f.authority,"/"!=h.path.charAt(0)))){for(var f=(f.path.substring(0,f.path.lastIndexOf("/")+1)+h.path).split("/"),g=0;g<f.length;g++)"."==f[g]?g==f.length-1?f[g]="":(f.splice(g,1),g--):0<g&&!(1==g&&""==f[0])&&".."==f[g]&&".."!=f[g-1]&&(g==f.length-1?(f.splice(g,1),f[g-1]=""):(f.splice(g-1,2),g-=2));h.path=f.join("/")}f=
[];h.scheme&&f.push(h.scheme,":");h.authority&&f.push("//",h.authority);f.push(h.path);h.query&&f.push("?",h.query);h.fragment&&f.push("#",h.fragment)}this.uri=f.join("");b=this.uri.match(e);this.scheme=b[2]||(b[1]?"":null);this.authority=b[4]||(b[3]?"":null);this.path=b[5];this.query=b[7]||(b[6]?"":null);this.fragment=b[9]||(b[8]?"":null);if(null!=this.authority)b=this.authority.match(c),this.user=b[3]||null,this.password=b[4]||null,this.host=b[6]||b[7],this.port=b[9]||null};a.prototype.toString=
function(){return this.uri};return i._Url=a})},"dojo/hccss":function(){define("dojo/hccss","require,./_base/config,./dom-class,./dom-style,./has,./ready,./_base/window".split(","),function(i,e,c,a,b,f,d){b.add("highcontrast",function(){var c=d.doc.createElement("div");c.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(e.blankGif||i.toUrl("./resources/blank.gif"))+");";d.body().appendChild(c);var g=a.getComputedStyle(c),
f=g.backgroundImage,g=g.borderTopColor==g.borderRightColor||f&&("none"==f||"url(invalid-url:)"==f);8>=b("ie")?c.outerHTML="":d.body().removeChild(c);return g});f(90,function(){b("highcontrast")&&c.add(d.body(),"dj_a11y")});return b})},"dojo/string":function(){define("dojo/string",["./_base/kernel","./_base/lang"],function(i,e){var c={};e.setObject("dojo.string",c);c.rep=function(a,b){if(0>=b||!a)return"";for(var c=[];;){b&1&&c.push(a);if(!(b>>=1))break;a+=a}return c.join("")};c.pad=function(a,b,f,
d){f||(f="0");a=""+a;b=c.rep(f,Math.ceil((b-a.length)/f.length));return d?a+b:b+a};c.substitute=function(a,b,c,d){d=d||i.global;c=c?e.hitch(d,c):function(a){return a};return a.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(a,g,l){a=e.getObject(g,!1,b);l&&(a=e.getObject(l,!1,d).call(d,a,g));return c(a,g).toString()})};c.trim=String.prototype.trim?e.trim:function(a){for(var a=a.replace(/^\s+/,""),b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};return c})},
"yfiles/client/tiles/UndoManager":function(){define("yfiles/client/tiles/UndoManager",["dojo/_base/declare","dojo/request/xhr","dojo/Evented"],function(i,e,c){return i([c],{_graph:null,_name:null,_baseUrl:null,constructor:function(a){this.setGraph(a)},getGraph:function(){return this._graph},setGraph:function(a,b,c,d){this.getGraph()&&this._setUndoRedoEnabled(!1);(this._graph=a)?(this._name=a.getName(),this._baseUrl=a.getBaseURL(),this._setUndoRedoEnabled(!0,b,c,d)):this._baseUrl=this._name=null},
_setUndoRedoEnabled:function(a,b,c,d){var h=this._name;h?e.post(this._baseUrl+"/setUndoRedoEnabled",{data:{name:h,f:a},handleAs:"text"}).then(function(a){c&&c.call(b,"true"==a,h,d)},function(){c&&c.call(b,!1,h,d)}):c&&c.call(b,!1,null,d)},canUndoRedo:function(a,b,c,d){var h=this._name;h?e.get(this._baseUrl+"/canUndoRedo",{query:{name:h},preventCache:!0,handleAs:"json"}).then(function(c){b.call(a,c,h,d)},function(){c&&c.call(a,h,d)}):c&&c.call(a,null,d)},undo:function(a){var b=this._name;if(b){var c=
this;e.post(this._baseUrl+"/undo",{data:{name:b},handleAs:"json"}).then(function(d){c.onUndo(d,b,a)},function(){c.onUndoFailed(b,a)})}else this.onUndoFailed(null,a)},redo:function(a){var b=this._name;if(b){var c=this;e.post(this._baseUrl+"/redo",{data:{name:b},handleAs:"json"}).then(function(d){c.onRedo(d,b,a)},function(){c.onRedoFailed(b,a)})}else this.onRedoFailed(null,a)},onUndo:function(){},onUndoFailed:function(){},onRedo:function(){},onRedoFailed:function(){}})})},"yfiles/client/tiles/widget/_MarkerMoveable":function(){define("yfiles/client/tiles/widget/_MarkerMoveable",
["dojo/_base/declare","dojo/dnd/Moveable","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(i){return i([dojo.dnd.Moveable],{_viewportMarker:null,_initialZoom:1,_initialViewport:null,_initialCenter:null,_originalLocation:null,_timerHandle:null,_lastLeftTop:null,constructor:function(e,c){this._viewportMarker=c},onMouseDown:function(e){this.inherited(arguments);this._initDrag()},_initDrag:function(){var e=this._viewportMarker.canvas;this._initialZoom=e.zoom;this._initialViewport=e.getViewport();
this._initialCenter=e.getCenter();this._originalLocation=this._getMarkerLocation()},_getMarkerLocation:function(){var e=this._viewportMarker.overview,c=parseInt(dojo.style(this._viewportMarker.marker,"left")),a=parseInt(dojo.style(this._viewportMarker.marker,"top"));return e.getWorldCoordinates(c,a)},_clearTimeout:function(){this._timerHandle=null},onMove:function(e,c){this.onMoving(e,c);if(this._viewportMarker.canvas.isBitmapMode()){if(null==this._timerHandle)this._timerHandle=setTimeout(dojo.hitch(this,
this._clearTimeout),this._viewportMarker.dragDelay),this.handleMove(c)}else this.handleMove(c);this.onMoved(e,c);this._lastLeftTop=c},onMoveStop:function(){if(null!=this._lastLeftTop)this.handleMove(this._lastLeftTop),this._lastLeftTop=null},handleMove:function(e){var c=this._viewportMarker.canvas,a=this._viewportMarker.overview,b=c.getViewport(),e=a.getWorldCoordinates(e.l,e.t),e={x:this._initialCenter.x+(e.x-this._originalLocation.x),y:this._initialCenter.y+(e.y-this._originalLocation.y)},b={x:e.x-
b.width/2,y:e.y-b.height/2,width:b.width,height:b.height},f=c.viewportLimiter.limitViewport(c,b),d=f.y*a.zoom+a.y,h=this._viewportMarker.marker.style;h.left=f.x*a.zoom+a.x+"px";h.top=d+"px";b.x!=f.x||b.y!=f.y||b.width!=f.width||b.height!=f.height?c.zoomTo(f):c.setCenter(e);c.recalculateTiles()}})})},"dojo/dnd/autoscroll":function(){define("dojo/dnd/autoscroll","../_base/lang,../sniff,../_base/window,../dom-geometry,../dom-style,../window".split(","),function(i,e,c,a,b,f){var d={};i.setObject("dojo.dnd.autoscroll",
d);d.getViewport=f.getBox;d.V_TRIGGER_AUTOSCROLL=32;d.H_TRIGGER_AUTOSCROLL=32;d.V_AUTOSCROLL_VALUE=16;d.H_AUTOSCROLL_VALUE=16;var h,g=c.doc,l=Infinity,k=Infinity;d.autoScrollStart=function(a){g=a;h=f.getBox(g);a=c.body(g).parentNode;l=Math.max(a.scrollHeight-h.h,0);k=Math.max(a.scrollWidth-h.w,0)};d.autoScroll=function(a){var b=h||f.getBox(g),e=c.body(g).parentNode,i=0,p=0;a.clientX<d.H_TRIGGER_AUTOSCROLL?i=-d.H_AUTOSCROLL_VALUE:a.clientX>b.w-d.H_TRIGGER_AUTOSCROLL&&(i=Math.min(d.H_AUTOSCROLL_VALUE,
k-e.scrollLeft));a.clientY<d.V_TRIGGER_AUTOSCROLL?p=-d.V_AUTOSCROLL_VALUE:a.clientY>b.h-d.V_TRIGGER_AUTOSCROLL&&(p=Math.min(d.V_AUTOSCROLL_VALUE,l-e.scrollTop));window.scrollBy(i,p)};d._validNodes={div:1,p:1,td:1};d._validOverflow={auto:1,scroll:1};d.autoScrollNodes=function(g){for(var f,h,l,k,s,j,u=0,v=0,o=g.target;o;){if(1==o.nodeType&&o.tagName.toLowerCase()in d._validNodes){l=b.getComputedStyle(o);k=l.overflow.toLowerCase()in d._validOverflow;s=l.overflowX.toLowerCase()in d._validOverflow;j=l.overflowY.toLowerCase()in
d._validOverflow;if(k||s||j)f=a.getContentBox(o,l),h=a.position(o,!0);if(k||s){l=Math.min(d.H_TRIGGER_AUTOSCROLL,f.w/2);s=g.pageX-h.x;if(e("webkit")||e("opera"))s+=c.body().scrollLeft;u=0;0<s&&s<f.w&&(s<l?u=-l:s>f.w-l&&(u=l),o.scrollLeft+=u)}if(k||j){k=Math.min(d.V_TRIGGER_AUTOSCROLL,f.h/2);j=g.pageY-h.y;if(e("webkit")||e("opera"))j+=c.body().scrollTop;v=0;0<j&&j<f.h&&(j<k?v=-k:j>f.h-k&&(v=k),o.scrollTop+=v)}if(u||v)return}try{o=o.parentNode}catch(i){o=null}}d.autoScroll(g)};return d})},"yfiles/client/tiles/widget/GraphCanvas":function(){require({cache:{"url:yfiles/client/tiles/widget/GraphCanvas.html":'<div class="yFilesGraphCanvas" data-dojo-attach-point="tilesFrame"\n     style="overflow:hidden;position:relative;width:100%;height:100%;bottom:auto;right:auto;"\n     >\n    <div class="loading" data-dojo-attach-point="_loading" style="position:absolute;width: 100%;height:100%;z-index:0;"></div>\n    <div class="movables" data-dojo-attach-point="movables" style="padding:0;margin:0;position:absolute;">\n        <div class="oldTiles" data-dojo-attach-point="oldTiles" style="position:absolute;z-index:1;"></div>\n        <div class="tiles" data-dojo-attach-point="tiles" style="position:absolute;z-index:2;width:100%;height:100%"></div>\n        <div data-dojo-attach-point="svgLayer" style="position:absolute;z-index:3;"></div>\n        <div class="overlays" data-dojo-attach-point="overlays" style="position:absolute;z-index:4;"></div>\n    </div>\n    <div data-dojo-attach-point="glassPane" style="position:absolute;z-index:5;opacity: 0.0;width:100%;height:100%"></div>\n    <div class="contents" data-dojo-attach-point="containerNode" style="position:absolute;z-index:6;opacity:1.0"></div>\n</div>'}});
define("yfiles/client/tiles/widget/GraphCanvas","dojo/_base/declare,dojo/request/xhr,dijit/_WidgetBase,dijit/_TemplatedMixin,dojox/uuid/Uuid,dojox/uuid/generateTimeBasedUuid,dojox/collections/Dictionary,yfiles/client/tiles/Graph,yfiles/client/tiles/GraphBounds,yfiles/client/tiles/HitTest,yfiles/client/tiles/GraphHighlighter,yfiles/client/support/TouchPointHandler,yfiles/client/svg/widget/SVGViewPort,yfiles/client/support/ViewportLimiter,yfiles/client/tiles/NavigationInputMode,dojo/text!./GraphCanvas.html".split(","),
function(i,e,c,a,b,f,d,h,g,l,k,m,q,n,r,p){var s=i([c,a],{width:512,height:512,x:0,y:0,tileSize:512,paintDetailThreshold:0.3,zoom:1,nodeEvents:!1,edgeEvents:!1,nodeLabelEvents:!1,edgeLabelEvents:!1,paperEvents:!1,baseURL:".",path:"",highlightNodeSurroundPixels:10,mouseWheelScrollFactor:2,maxZoomForFitContent:1E6,movables:null,glassPane:null,showLoading:!0,useTouchEventsExclusively:!0,doubleTapSize:null,zoomToPointRecognizer:function(a){return a.ctrlKey},zoomMarginFactor:0.95,doubleTapTime:500,longPressTime:1E3,
touchDragSize:null,minPinchDelta:1,_touchPointHandlers:null,_pinchTouches:null,_lastPinchTouchLocations:null,_lastTouchHandlers:null,mainTouchId:null,svgBorder:0,_renderMode:"bitmap",tilesFrame:null,tiles:null,oldTiles:null,overlays:null,svgLayer:null,_loading:null,_graph:null,_hitTest:null,_lastHit:null,_mouseOver:!1,fixed:!1,_worldBounds:null,mouseWheelZoom:!0,dispatchGraphItemEvents:!0,navigationMode:null,_sequenceId:0,_mouse:null,_worldCoords:null,_zoomDigits:4,_highlightMap:null,_requestedTiles:null,
_recalculateTriggered:!1,_updateViewpointTriggered:!1,_minZoomProvider:null,_maxZoomProvider:null,_highlighter:null,_tileRequests:null,_isLoadingTiles:!1,mouseClickTime:500,mouseClickSize:3,_mouseDownTime:0,_mouseDownLocation:null,_svgViewPort:null,svgPrefix:null,viewportLimiter:null,_customCopySVG_DOM_Attribute:null,templateString:p,domNode:null,constructor:function(){this._touchPointHandlers=new d;this.touchDragSize={width:5,height:5};this._pinchTouches=[];this._lastPinchTouchLocations=[];this.doubleTapSize=
{width:20,height:20};this.viewportLimiter=new n;this._lastTouchHandlers=[];this._mouseDownLocation={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY}},postCreate:function(){this._connectEvents();this.showLoading||dojo.style(this._loading,"display","none");dojo.connect(this.movables,"ondragstart",dojo,"stopEvent");dojo.connect(this.movables,"onselectstart",dojo,"stopEvent");this.setZoomBoundsProviders(null,null);this.setAutoRefresh(!0);this._highlightMap=new d;this._mouse={x:0,y:0};this._sequenceId=
this._newSequenceId();this._tileRequests={};try{this.tileSize=parseInt(this.tileSize)}catch(a){this.tileSize=512}this._graph=new h(this.baseURL);this._initializeGraphListeners();this._checkSize();this._requestedTiles={};this._hitTest=new l(this.baseURL,this.path,this._worldBounds,this.nodeEvents,this.edgeEvents,this.nodeLabelEvents,this.edgeLabelEvents,this.paperEvents);this._lastHit=this._hitTest.getEmptyHitInfo(0,0);this.connect(this._hitTest,"onNewData","_newHitTestData");dojo.isFF?this.tilesFrame.addEventListener("DOMMouseScroll",
dojo.hitch(this,"_mouseWheeled"),!1):this.connect(this.tilesFrame,"onmousewheel","_mouseWheeled");this._highlighter=new k(this);this.connect(window,"onresized","_onResized");var b=dojo.attr(this.srcNodeRef,"renderMode");b&&this._setRenderMode(b);null!=this.path&&0<this.path.length&&this.setPath(this.path);this.setPanMode()},_connectEvents:function(){var a=this.domNode;dojo.connect(a,"onmousedown",this,this._onMouseDown);dojo.connect(a,"onmousemove",this,this._onMouseMove);dojo.connect(a,"onmouseout",
this,this._onMouseOut);dojo.connect(a,"onmouseover",this,this._onMouseOver);dojo.connect(a,"onmouseup",this,this._onMouseUp);dojo.connect(a,"onclick",this,this._onClick);dojo.connect(a,"ondblclick",this,this._onDblClick);dojo.connect(a,"ontouchstart",this,this._onTouchStart);dojo.connect(a,"ontouchmove",this,this._onTouchMove);dojo.connect(a,"ontouchend",this,this._onTouchEnd);dojo.connect(a,"ontouchcancel",this,this._onTouchCancel);dojo.connect(a,"ontouchenter",this,this._onTouchEnter);dojo.connect(a,
"ontouchleave",this,this._onTouchLeave)},_setRenderMode:function(a){if(a!=this._renderMode)this._renderMode=a,this.isSVGMode()?(this._removeDOMChildren(this.oldTiles),dojo.style(this.tiles,"display","none"),dojo.style(this.svgLayer,"display",""),null==this._svgViewPort?(this._svgViewPort=this.createSVGViewPort(),this._svgViewPort.setCanvas(this),this._svgViewPort.placeAt(this.svgLayer),this._svgViewPort._customCopyAttribute=customCopySVG_DOM_Attribute):this._svgViewPort.clear()):(dojo.style(this.tiles,
"display",""),dojo.style(this.svgLayer,"display","none"))},createSVGViewPort:function(){return new q},setCustomCopySVG_DOM_Attribute:function(a){null!=this._svgViewPort&&this._svgViewPort.setCustomCopyAttribute(a);this._customCopySVG_DOM_Attribute=a},setRenderMode:function(a){if(a!=this._renderMode){var b=this._renderMode;this._renderMode=a;if(this.isSVGMode()){this._removeDOMChildren(this.oldTiles);null==this._svgViewPort?(this._svgViewPort=this.createSVGViewPort(),this._svgViewPort.setCanvas(this),
this._svgViewPort.placeAt(this.svgLayer),this._svgViewPort._customCopyAttribute=this._customCopySVG_DOM_Attribute):this._svgViewPort.clear();var c=this;dojo.style(c.svgLayer,"display","");this.invalidateSVG(function(){dojo.style(c.tiles,"display","none");c._refreshOverlays();b!=a&&c._removeTilesOnRenderModeChange()})}else{var d=this,g=dojo.connect(this,"onTilesLoaded",function(){dojo.disconnect(g);dojo.style(d.tiles,"display","");dojo.style(d.svgLayer,"display","none")});this.recalculateTiles(!0)}}},
isSVGMode:function(){return this._renderMode==s.RENDER_MODE_SVG},isBitmapMode:function(){return this._renderMode==s.RENDER_MODE_BITMAP},setHighlighter:function(a){this._highlighter=a},getHighlighter:function(){return this._highlighter},setBaseURL:function(a){this.baseURL=a;this._graph._baseURL=a},setPath:function(a,b){if(a&&""!=a)this.clear(),this.path=a,this.beforeRequest(),this._graph.load(a,b,null)},getGraph:function(){return this._graph},_setContentBounds:function(a){this._contentBounds=new g(a.x,
a.x+a.width,a.y,a.y+a.height)},fitContent:function(){this._doFitContent();this._refreshOverlays();this.viewPortChanged(this.x,this.y,this.width,this.height,this.zoom);this.isBitmapMode()&&this.recalculateTiles(!1)},_graphLoaded:function(){var a=this;this.isSVGMode()?(a.onLoadSVG(),a.beforeRequest(),e.get(this.baseURL+"/getWorldBounds?path="+this.path+"&seq="+this._sequenceId,{handleAs:"json"}).then(function(b){a.requestDone(!0);a._setWorldBounds(b);a._setContentBounds(b.contentBounds);b=a._getMaximumZoomForContent();
a.beforeRequest();a._loadSVG(function(){a._doFitContent();a.requestDone();a._refreshOverlays();a.unhighlightAll();a._hitTest.setGraphParameters(a.baseURL,a.path,a._worldBounds,function(b,c){a.pathSet(c)})},b)},function(){a.requestDone(!1)})):(a.beforeRequest(),e.get(this.baseURL+"/getWorldBounds?path="+this.path+"&seq="+this._sequenceId,{handleAs:"json"}).then(function(b){a.requestDone(!0);a._removeDOMChildren(a.oldTiles);a._setWorldBounds(b);a._setContentBounds(b.contentBounds);a._doFitContent();
a._refreshOverlays();a.viewPortChanged(a.x,a.y,a.width,a.height,a.zoom);a.unhighlightAll();a.recalculateTiles(!0);a._hitTest.setGraphParameters(a.baseURL,a.path,a._worldBounds,function(b,c){a.pathSet(c)})},function(){a.requestDone(!1)}))},clear:function(a){this._removeTiles();this.oldTiles&&dojo.empty(this.oldTiles);null!=this._svgViewPort&&this._svgViewPort.clear();if(!1!=a)this._hitTest&&this._hitTest.clear(),this._highlightMap.clear(),this._sequenceId=this._newSequenceId()},refresh:function(a,
b,c,d){c||this.pushTiles();this._sequenceId=this._newSequenceId();if(a)this.updateWorldBounds(a),d&&dojo.isFunction(d)&&d();else{this.beforeRequest();var g=this;e.get(this.baseURL+"/getWorldBounds?path="+this.path+"&seq="+this._sequenceId,{handleAs:"json"}).then(function(a){g.requestDone(!0);g.updateWorldBounds({minX:a.x,minY:a.y,maxX:a.x+a.width,maxY:a.y+a.height});d&&dojo.isFunction(d)&&d()},function(){g.requestDone(!1)})}b&&this.shift(this.zoom*b.x,this.zoom*b.y,!0);this.recalculateTiles(!0)},
_setWorldBounds:function(a){if(0==this.height)this.height=this.tileSize;if(0==this.width)this.width=this.tileSize;if(null!=a&&"undefined"!==typeof a){var b=this._worldBounds;if(null==b||"undefined"===typeof b||b.minX!=a.x||b.minY!=a.y||b.width()!=a.width||b.height()!=a.height)this._worldBounds=new g(a.x,a.x+a.width,a.y,a.y+a.height),this.onWorldBoundsChanged(b,this._worldBounds)}},_getMaximumZoomForContent:function(){var a=this._getFullZoom()*this.zoomMarginFactor;return this._round(Math.min(a,this.maxZoomForFitContent))},
_doFitContent:function(){this.setZoom(this._getMaximumZoomForContent(),!1);this.center(this.zoom*(this._worldBounds.width()/2+this._worldBounds.minX),this.zoom*(this._worldBounds.height()/2+this._worldBounds.minY))},getWorldBounds:function(){return this._worldBounds},getCenter:function(){var a=this._getWorldViewPoint();return{x:0.5*this.width/this.zoom+a.x,y:0.5*this.height/this.zoom+a.y}},setCenter:function(a){var b=this.getCenter();this.setViewPoint(this.x-(a.x-b.x)*this.zoom,this.y-(a.y-b.y)*this.zoom)},
_getFullZoom:function(){var a=this.width/this._worldBounds.width(),b=this.height/this._worldBounds.height();return Math.min(a,b)},_round:function(a){var b=Math.pow(10,this._zoomDigits);return Math.floor(b*a)/b},setZoom:function(a){this._setZoom(a,!0)},zoomTo:function(a){if(0>=a.width)a.width=1;if(0>=a.height)a.height=1;var b=Math.round(a.width*this.zoom),c=Math.round(a.height*this.zoom);(b!=this.width||c!=this.height)&&this.setZoom(Math.min(this.width/a.width,this.height/a.height));this.setCenter({x:a.x+
a.width/2,y:a.y+a.height/2})},setZoomBoundsProviders:function(a,b){this._minZoomProvider=a?a:this._defaultMinZoomProvider;this._maxZoomProvider=b?b:this._defaultMaxZoomProvider},_defaultMinZoomProvider:function(a){return 0.5*a._getFullZoom()},_defaultMaxZoomProvider:function(){return 5},_setZoom:function(a,b,c){a=this._coerceZoom(a);0<a&&b&&this._zoomChanged(a,c)},_coerceZoom:function(a){var a=this._round(a),b=this._minZoomProvider(this);a<b&&(a=this._round(b));b=this._maxZoomProvider(this);a>b&&
(a=this._round(b));return a},setPanMode:function(a){if(null==this.navigationMode)this.navigationMode=this.createNavigationMode();null!=this.navigationMode&&!this.navigationMode.isActive()&&this.navigationMode.activate();this.fixed=!1;this.recalculateTiles(a)},createNavigationMode:function(){return new r(this)},setViewPointWorld:function(a,b){this.setViewPoint(-a*this.zoom,-b*this.zoom)},setViewPoint:function(a,b,c){a=Math.round(a);b=Math.round(b);if(a!=this.x||b!=this.y){this.x=Math.round(a);this.y=
Math.round(b);if(c){var d=parseInt(this.movables.style.left),g=parseInt(this.movables.style.top);this.oldTiles.style.visibility="hidden";this.oldTiles.style.left=d-a+"px";this.oldTiles.style.top=g-b+"px"}this.movables.style.left=this.x+"px";this.movables.style.top=this.y+"px";if(c)this.oldTiles.style.visibility="visible";this._mouseOver&&this.dispatchGraphItemEvents&&this._hitTest&&this._mouseOverOutTest();this._refreshOverlays();this.viewPortChanged(this.x,this.y,this.width,this.height,this.zoom)}},
center:function(a,b){this.setViewPoint(-a+this.width/2,-b+this.height/2)},zoomWithPoint:function(a,b,c){this._setZoom(c,!0,{x:a,y:b})},shift:function(a,b,c){this.setViewPoint(this.x+a,this.y+b,c)},setNoInteractionMode:function(){if(null!=this.navigationMode)this.navigationMode.deactivate(),this.navigationMode=null;this.mouseWheelZoom=!1;if(!this._fixed)this._fixed=!0,this._removeTiles(),this.recalculateTiles()},_zoomChanged:function(a,b){if(""!=this.path){var c=this.zoom;if(!(c==a&&"undefined"==typeof b)){this.zoom=
a;if(void 0==b||null==b)b={x:Math.floor(this.width/2),y:Math.floor(this.height/2)};var d=this.zoom/c,g=Math.floor((b.x-this.x)*d),f=Math.floor((b.y-this.y)*d);this.isBitmapMode()&&dojo.forEach(this.tiles.childNodes,function(a){dojo.style(a,"display","none")});this.setViewPoint(b.x-g,b.y-f);if(this.isBitmapMode()){if(this._recalculateTriggered)this._scaleTiles(this.oldTiles,d);else{var e=[];dojo.forEach(this.oldTiles.childNodes,function(a){e.push(a)});this._shiftOldTiles();for(this._scaleTiles(this.oldTiles,
d);this.tiles.hasChildNodes();)g=this.tiles.firstChild,(f=g.firstChild)?(this._scaleTile(g,f,d),this.tiles.removeChild(g),g.removeAttribute("id"),this.oldTiles.appendChild(g),dojo.style(g,"display","block")):dojo._destroyElement(g);setTimeout(dojo.hitch(this,this._removeOldTiles,e),3E3)}this._resetRequestedTile();this.recalculateTiles()}else this._svgViewPort.zoom(this.zoom),(this.zoom>this.paintDetailThreshold&&c<this.paintDetailThreshold||this.zoom<this.paintDetailThreshold&&c>this.paintDetailThreshold)&&
this.invalidateSVG();this.onZoomChanged({zoom:a,zoomPoint:b,oldZoom:c})}}},_shiftOldTiles:function(){var a=parseInt(this.oldTiles.style.left),b=parseInt(this.oldTiles.style.top);if(0!=a||0!=b)dojo.style(this.oldTiles,"left","0px"),dojo.style(this.oldTiles,"top","0px"),dojo.forEach(this.oldTiles.childNodes,function(c){this._shiftTile(c,a,b)},this)},_shiftTile:function(a,b,c){var d=parseInt(a.style.left),g=parseInt(a.style.top);dojo.style(a,"left",d+b+"px");dojo.style(a,"top",g+c+"px")},_scaleTiles:function(a,
b){dojo.forEach(a.childNodes,function(a){a&&dojo.style(a,"display","none")});dojo.forEach(a.childNodes,function(a){if(a){var c=a.firstChild;c?(this._scaleTile(a,c,b),dojo.style(a,"display","block")):dojo._destroyElement(a)}},this)},_scaleTile:function(a,b,c){dojo.style(a,"left",parseInt(a.style.left)*c+"px");dojo.style(a,"top",parseInt(a.style.top)*c+"px");dojo.style(a,"width",parseInt(a.style.width)*c+"px");dojo.style(a,"height",parseInt(a.style.height)*c+"px");b.width*=c;b.height*=c},_removeOldTiles:function(a){var b=
!0;dojo.forEach(this.tiles.childNodes,function(a){a.firstChild||(b=!1)});b?this._removeDOMNodes(a):setTimeout(dojo.hitch(this,this._removeOldTiles,a),3E3)},_refreshOverlays:function(){for(var a=this._highlightMap.getIterator(),b=a.get();b;b=a.get())this._refreshHighlight(b.key)},_updateViewPoint:function(){var a=parseInt(this.movables.style.left),b=parseInt(this.movables.style.top);this.setViewPoint(a,b);this._updateViewpointTriggered=!1},_mouseWheeled:function(a){dojo.stopEvent(a);if(this.mouseWheelZoom){var b=
0;if(dojo.isFF)b=-a.detail;else if("number"==typeof a.wheelDelta)b=a.wheelDelta;b=0<b;if(this.zoomToPointRecognizer(a)){if(b=b?this.zoom*this.mouseWheelScrollFactor:this.zoom/this.mouseWheelScrollFactor,b=this._coerceZoom(b),b!=this.zoom){var a=this.toLocal(a.pageX,a.pageY),c=this.getWorldCoordinates(a.x,a.y);this.zoomTo(this.viewportLimiter.limitViewport(this,{x:c.x-a.x/b,y:c.y-a.y/b,width:this.width/b,height:this.height/b}))}}else b?this.increaseZoom(this.mouseWheelScrollFactor):this.decreaseZoom(this.mouseWheelScrollFactor)}},
increaseZoom:function(a){"undefined"===typeof a&&(a=1.2);this._setLimitedZoom(this.zoom*a)},decreaseZoom:function(a){"undefined"===typeof a&&(a=1.2);this._setLimitedZoom(this.zoom/a)},_setLimitedZoom:function(a){a=this._coerceZoom(a);if(a!=this.zoom){var b=this.getCenter(),c=this.height/a,a=this.width/a;this.zoomTo(this.viewportLimiter.limitViewport(this,{x:b.x-a/2,y:b.y-c/2,width:a,height:c}))}},resize:function(a){dojo.marginBox(this.domNode,a);this._onResized()},_checkSize:function(){var a=dojo.contentBox(this.domNode);
this.width=a.w;this.height=a.h},_resizePending:!1,_onResized:function(){this._checkSize();if(!this._resizePending)this._resizePending=!0,setTimeout(dojo.hitch(this,this._onResizedCore),200)},_onResizedCore:function(){this.recalculateTiles();this._refreshOverlays();this.viewPortChanged(this.x,this.y,this.width,this.height,this.zoom);this._resizePending=!1},onMouseOver:function(){this._mouseOver=!0},onMouseOut:function(){this._mouseOver=!1},isMouseOver:function(){return this._mouseOver},_onMouseDown:function(a){this._mouseOver=
!0;this._mouseDownTime=(new Date).getTime();this._mouseDownLocation={x:a.pageX,y:a.pageY};a.preventDefault();this.onMouseDown(a)},_onMouseUp:function(a){a.preventDefault();this.onMouseUp(a)},_onMouseOut:function(a){a.preventDefault();this.onMouseOut(a)},_onMouseOver:function(a){a.preventDefault();this.onMouseOver(a)},_onClick:function(a){a.preventDefault();this.onClick(a)},_onDblClick:function(a){a.preventDefault();this.onDblClick(a)},getViewport:function(){var a=this._getWorldViewPoint();return{x:a.x,
y:a.y,width:this.width/this.zoom,height:this.height/this.zoom}},_getWorldViewPoint:function(){return{x:-this.x/this.zoom,y:-this.y/this.zoom}},onMouseDown:function(){},isClickEvent:function(a,b,c){return Math.abs(b)<=this.mouseClickSize&&Math.abs(c)<=this.mouseClickSize&&a<this.mouseClickTime},onClick:function(a){this.isClickEvent((new Date).getTime()-this._mouseDownTime,a.pageX-this._mouseDownLocation.x,a.pageY-this._mouseDownLocation.y)&&this.dispatchGraphItemEvents&&this._hitTest&&this._hitTest.isActive()&&
this._fireGraphEvent(a,"onClick",this._worldCoords,!1)},_getOrCreateTouchPointHandler:function(a,b){var c=null;if(this._touchPointHandlers.containsKey(a))c=this._touchPointHandlers.item(a);else{var d=-1;if(null!=b)for(var g=0;g<this._lastTouchHandlers.length;g++){var f=this._lastTouchHandlers[g],e=f._lastX,h=f._lastY,m=f._lastEventTime,l=(new Date).getTime(),e=Math.abs(b.x-e),h=Math.abs(b.y-h),m=l-m;if(e<this.doubleTapSize.width&&h<this.doubleTapSize.height&&m<this.doubleTapTime){c=f;d=g;break}}null!=
c?(this._touchPointHandlers.add(a,c),this._lastTouchHandlers.splice(d,1)):(this._lastTouchHandlers.length=0,c=this._createTouchPointHandler(a),this._touchPointHandlers.add(a,c))}return c},_createTouchPointHandler:function(a){return new m(this,a)},_removeTouchHandler:function(a){var b=this._touchPointHandlers.item(a.identifier);null!=b&&(this._touchPointHandlers.remove(a.identifier),this._lastTouchHandlers.push(b))},_callCoreHandlerForTouches:function(a,b,c){for(var b=b.changedTouches,d=0;d<b.length;d++){var g=
b.item(d),f=this.toLocal(g.pageX,g.pageY);this._getOrCreateTouchPointHandler(g.identifier,c?f:null)[a](g)}},_multiTouchOnAndroid:!0,_supportMultiTouch:function(){return this._isAndroid()?this._multiTouchOnAndroid:!0},_isAndroid:function(){return-1!=navigator.userAgent.toLowerCase().indexOf("android")},isMainTouch:function(a){return a.identifier==this.mainTouchId},_onTouchStart:function(a){if(null==this.mainTouchId&&0<a.changedTouches.length)this.mainTouchId=a.changedTouches[0].identifier,this._updateMainTouch(a);
this._callCoreHandlerForTouches("onTouchStartCore",a,!0);var b=a.touches;if(2==b.length&&this._supportMultiTouch()){for(var c=0;c<b.length&&2>c;c++)this._pinchTouches[c]=b[c],this._lastPinchTouchLocations[c]={x:b[c].pageX,y:b[c].pageY};c=this.toLocal(this._pinchTouches[0].pageX,this._pinchTouches[0].pageY);b=this.toLocal(this._pinchTouches[1].pageX,this._pinchTouches[1].pageY);c=this.getWorldCoordinates(c.x,c.y);b=this.getWorldCoordinates(b.x,b.y);this.onPinchStart(c,b,this._pinchTouches)}this.useTouchEventsExclusively&&
a.preventDefault()},toLocal:function(a,b){var c=dojo.coords(this.domNode);return{x:a-c.x,y:b-c.y}},_onTouchMove:function(a){this._updateMainTouch(a);this._callCoreHandlerForTouches("onTouchMoveCore",a,!1);var b=a.changedTouches;1<a.touches.length&&0<b.length&&this._supportMultiTouch()&&this._updatePinchTouches(b,this.onPinch);this.useTouchEventsExclusively&&a.preventDefault()},_updateMainTouch:function(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b];if(this.isMainTouch(c)){var d=
this.toLocal(c.pageX,c.pageY);this._mouse.x=d.x;this._mouse.y=d.y;this._mouseOverOutTest(c)}}},_updatePinchTouches:function(a,b){for(var c=!1,d=!1,g=this._pinchTouches[0],f=this._pinchTouches[1],e=0;e<a.length;e++){var h=a[e],c=h.identifier==this._pinchTouches[0].identifier,d=h.identifier==this._pinchTouches[1].identifier;c&&(g=h);d&&(f=h)}if(c||d)if(c=this._lastPinchTouchLocations[0].y-g.pageY,d=this._lastPinchTouchLocations[1].x-f.pageX,e=this._lastPinchTouchLocations[1].y-f.pageY,h=b===this.onPinch,
this._lastPinchTouchLocations[0].x-g.pageX>=this.minPinchDelta||c>=this.minPinchDelta||d>=this.minPinchDelta||e>=this.minPinchDelta||!h)this._pinchTouches[0]=g,this._pinchTouches[1]=f,this._lastPinchTouchLocations[0]={x:g.pageX,y:g.pageY},this._lastPinchTouchLocations[1]={x:f.pageX,y:f.pageY},f=this.toLocal(this._pinchTouches[0].pageX,this._pinchTouches[0].pageY),g=this.toLocal(this._pinchTouches[1].pageX,this._pinchTouches[1].pageY),f=this.getWorldCoordinates(f.x,f.y),g=this.getWorldCoordinates(g.x,
g.y),b(f,g,this._pinchTouches)},_onTouchEnd:function(a){this._callCoreHandlerForTouches("onTouchEndCore",a,!1);var b=a.changedTouches,c=a.touches;(1<b.length||0<b.length&&0<c.length)&&this._supportMultiTouch()&&this._updatePinchTouches(b,this.onPinchEnd);for(var d=0;d<b.length;d++){var g=b[d];this._removeTouchHandler(g);this._updateMainTouch(a);if(this.isMainTouch(g))this.mainTouchId=null}d=[];for(g=0;g<c.length;g++){for(var f=c[g],e=!1,h=0;h<b.length;h++)b[h].identifier==f.identifier&&(e=!0);e||
d.push(f)}if(0<d.length)this.mainTouchId=d[0].identifier,this._updateMainTouch(a);this.useTouchEventsExclusively&&a.preventDefault()},_onTouchCancel:function(a){this._callCoreHandlerForTouches("onTouchCancelCore",a);this.useTouchEventsExclusively&&a.preventDefault()},_onTouchEnter:function(a){this._callCoreHandlerForTouches("onTouchEnterCore",a);this.useTouchEventsExclusively&&a.preventDefault()},_onTouchLeave:function(a){this._callCoreHandlerForTouches("onTouchLeaveCore",a);this.useTouchEventsExclusively&&
a.preventDefault()},onTouchStart:function(){},onTouchMove:function(){},onTouchEnd:function(){},onTouchTapped:function(a,b,c){this.dispatchGraphItemEvents&&this._hitTest&&this._hitTest.isActive()&&(1==c?this._fireGraphEvent(a,"onTap",b,!1):2==c&&this._fireGraphEvent(a,"onDblTap",b,!1))},onTouchLongPress:function(a,b){this.dispatchGraphItemEvents&&this._hitTest&&this._hitTest.isActive()&&this._fireGraphEvent(a,"onLongPress",b,!1)},onPinchStart:function(){},onPinch:function(){},onPinchEnd:function(){},
_getGraphEvent:function(a,b){return this._hitTest.getHitInfo(a.x,a.y,b)},_fireGraphEvent:function(a,b,c,d){this._fireEvent(this._getGraphEvent(c,d),b,a)},_fireEvent:function(a,b,c){var d=l.getElementType(a);if(b=this[b+d])"Paper"!=d?(d=l.getHitId(a),b.call(this,d,a,c)):b.call(this,a,c)},onDblClick:function(a){this.dispatchGraphItemEvents&&this._hitTest&&this._hitTest.isActive()&&this._fireGraphEvent(a,"onDblClick",this._worldCoords,!1)},_fixLayerCoords:function(a){var b=dojo.mixin({},a),c=dojo.coords(this.domNode,
!1);b.layerX=a.pageX-c.x;b.layerY=a.pageY-c.y;return b},_onMouseMove:function(a){this._mouseOver=!0;if(this.dispatchGraphItemEvents)this._mouse=this.toLocal(a.pageX,a.pageY),this._hitTest&&this._hitTest.isActive()&&this._mouseOverOutTest(a);a.preventDefault();this.onMouseMove(a)},onWorldBoundsChanged:function(){},onZoomChanged:function(){},onMouseMove:function(){},_mouseOverOutTest:function(a){this._setWorldCoords();var b=this._getGraphEvent(this._worldCoords,!0),c=l.getHitId(b),d=l.getHitId(this._lastHit);
c!=d&&(null!=d&&(l.setCoords(this._lastHit,this._worldCoords.x,this._worldCoords.y),this._fireEvent(this._lastHit,"onMouseOut",a)),null!=c&&this._fireEvent(b,"onMouseOver",a));this._lastHit=b},_setWorldCoords:function(){this._worldCoords={x:(this._mouse.x-this.x)/this.zoom,y:(this._mouse.y-this.y)/this.zoom}},onMouseUp:function(){this.dispatchGraphItemEvents&&this._hitTest&&this._hitTest.isActive()&&this._mouseOverOutTest()},onClickNode:function(){},onDblClickNode:function(){},onMouseOverNode:function(){},
onMouseOutNode:function(){},onClickNodeLabel:function(){},onDblClickNodeLabel:function(){},onMouseOverNodeLabel:function(){},onMouseOutNodeLabel:function(){},onClickEdge:function(){},onDblClickEdge:function(){},onMouseOverEdge:function(){},onMouseOutEdge:function(){},onClickEdgeLabel:function(){},onDblClickEdgeLabel:function(){},onMouseOverEdgeLabel:function(){},onMouseOutEdgeLabel:function(){},onClickPaper:function(){},onTapNode:function(){},onTapNodeLabel:function(){},onTapEdge:function(){},onTapEdgeLabel:function(){},
onTapPaper:function(){},onDblTapNode:function(){},onDblTapNodeLabel:function(){},onDblTapEdge:function(){},onDblTapEdgeLabel:function(){},onDblTapPaper:function(){},onLongPressNode:function(){},onLongPressNodeLabel:function(){},onLongPressEdge:function(){},onLongPressEdgeLabel:function(){},onLongPressPaper:function(){},_assembleTileRequestString:function(a){var b=this.baseURL+"/"+a.request+"?zoom="+a.zoom+"&col="+a.col+"&row="+a.row,b=a.size?b+("&size="+a.size):b+("&size="+this.tileSize);a.path?b+=
"&path="+a.path:this.path&&(b+="&path="+this.path);a.paintDetailThreshold&&(b+="&paintDetailThreshold="+a.paintDetailThreshold);return b+="&seq="+this._sequenceId},_getTileId:function(a,b,c){return"div_"+this.id+"_"+a+"_"+b+"_"+c},pushTiles:function(){var a=[];dojo.forEach(this.oldTiles.childNodes,function(b){a.push(b)});setTimeout(dojo.hitch(this,this._removeOldTiles,a),3E3);this.oldTiles.style.left="0px";for(this.oldTiles.style.top="0px";this.tiles.hasChildNodes();){var b=this.tiles.firstChild;
this.tiles.removeChild(b);b.removeAttribute("id");this.oldTiles.appendChild(b)}this._resetRequestedTile()},recalculateTiles:function(a){if(!(""==this.path||this.isSVGMode())&&!this._recalculateTriggered){if(a)this._sequenceId=this._newSequenceId(),this._resetRequestedTile();this._recalculateTriggered=!0;setTimeout(dojo.hitch(this,this._recalculateTiles,a),100)}},_removeTilesOnRenderModeChange:function(){this._removeDOMChildren(this.tiles);this._removeDOMChildren(this.oldTiles)},_recalculateTiles:function(a){this._loadTiles(this._columnsAndRowsForArea(new g(-this.x,
this.width-this.x,-this.y,this.height-this.y)),a)},_tileWasRequested:function(a,b){return this._requestedTiles[a]&&this._requestedTiles[a][b]},_registerTileRequest:function(a,b){this._requestedTiles[a]||(this._requestedTiles[a]={});this._requestedTiles[a][b]=!0},_resetRequestedTile:function(a,b){a&&b?(this._requestedTiles[a]||(this._requestedTiles[a]={}),this._requestedTiles[a][b]=!1):this._requestedTiles={}},_loadTiles:function(a,b){this.showLoading&&dojo.style(this._loading,"display","block");this._isLoadingTiles&&
(this._clearTilesLoading(),this.onTilesLoaded());this._isLoadingTiles=!0;this.onLoadTiles();for(var c=a.minX;c<=a.maxX;c++)for(var d=a.minY-1;d<=a.maxY+1;d++){var g=this._getTileId(this.zoom,c,d);if(b||!this._tileWasRequested(c,d))this._registerTileRequest(c,d),this._loadTile(b,g,c,d)}setTimeout(dojo.hitch(this,this._checkTilesLoading),0);this._hideLoading();this._recalculateTriggered=!1},_hideLoading:function(){var a=!0;dojo.forEach(this.tiles.childNodes,function(b){b.firstChild||(a=!1)});a?this.showLoading&&
dojo.style(this._loading,"display","none"):setTimeout(dojo.hitch(this,this._hideLoading),3E3)},_clearTilesLoading:function(){var a=[],b;for(b in this._tileRequests)a.push(b);for(b=0;b<a.length;b++)delete this._tileRequests[a[b]]},_checkTilesLoading:function(){for(var a in this._tileRequests)return;this._isLoadingTiles=!1;this.onTilesLoaded()},_loadTile:function(a,b,c,d){if(this._tileWasRequested(c,d)){if(a&&(a=dojo.byId(b)))this._removeDOMChildren(a),dojo._destroyElement(a);var a=this._assembleTileRequestString({request:"getImage",
zoom:this.zoom,col:c,row:d,paintDetailThreshold:self.paintDetailThreshold}),g=dojo.doc.createElement("div");g.setAttribute("id",b);this.tiles.appendChild(g);dojo.style(g,"display","block");dojo.style(g,"position","absolute");dojo.style(g,"left",c*this.tileSize+"px");dojo.style(g,"top",d*this.tileSize+"px");dojo.style(g,"width",this.tileSize+"px");dojo.style(g,"height",this.tileSize+"px");setTimeout(dojo.hitch(this,this._loadImage,a,g,b),0)}},_loadImage:function(a,b,c){var d=new Image(this.tileSize,
this.tileSize);dojo.style(d,"display","block");var g=this;d.onload=function(){d.onload=null;b&&b.parentNode&&(b.appendChild(d),delete g._tileRequests[a],g.tileLoaded(g.path,c),g._checkTilesLoading())};this._tileRequests[a]=!0;d.src=a},_removeTiles:function(){this.tiles&&this._removeDOMChildren(this.tiles);this._resetRequestedTile()},invalidateSVG:function(a){if(this.isSVGMode()&&null!=this.path&&0<this.path.length){this.onLoadSVG();var b=this;b.beforeRequest();e.get(this.baseURL+"/getWorldBounds?path="+
this.path+"&seq="+this._sequenceId,{handleAs:"json"}).then(function(c){b.requestDone(!0);b._setWorldBounds(c);b._setContentBounds(c.contentBounds);b.beforeRequest();b._loadSVG(function(){b.requestDone();"undefined"!==typeof a&&a()})},function(){b.requestDone(!1)})}},_loadSVG:function(a,b){if(null!=this.path&&0<this.path.length){if(void 0==b)b=this.zoom;var c=this;c._sequenceId=c._newSequenceId();var d=c._sequenceId;e.get(c._getSVG_URL(),{query:{border:c.svgBorder,prefix:c.svgPrefix,zoom:b,paintDetailThreshold:c.paintDetailThreshold},
handleAs:"xml"}).then(function(g){c.onSVGLoaded();c._sequenceId==d&&(c._hideLoading(),c._svgViewPort.showSVG(g,b),a())},function(){c.requestDone(!1)})}},_getSVG_URL:function(){return this.baseURL+"/getSVGImage?path="+this.path+"&seq="+this._sequenceId},_columnsAndRowsForArea:function(a){return a.scale(1/this.tileSize).round()},onLoadSVG:function(){},onSVGLoaded:function(){},onLoadTiles:function(){},onTilesLoaded:function(){},tileLoaded:function(){},pathSet:function(a){this.onPathSet(a)},onPathSet:function(){},
viewPortChanged:function(){},beforeRequest:function(){},requestDone:function(){},getMousePosition:function(){return{x:this._mouse.x,y:this._mouse.y}},getViewCoordinates:function(a,b){a=!isNaN(a)?a:this._mouse.x;b=!isNaN(b)?b:this._mouse.y;return{x:a-this.x,y:b-this.y}},getWorldCoordinates:function(a,b){var c=this.getViewCoordinates(a,b);return{x:c.x/this.zoom,y:c.y/this.zoom}},getHitTest:function(){return this._hitTest},getLastHitInfo:function(){return this._lastHit},_newSequenceId:function(){return new b(f())},
_removeDOMChildren:function(a){for(;a.hasChildNodes();)this._removeDOMChildren(a.firstChild),dojo._destroyElement(a.firstChild)},_removeDOMNodes:function(a){dojo.forEach(a,function(a){this._removeDOMChildren(a);var b=a.parentNode;b&&b.removeChild(a);dojo._destroyElement(a)},this)},updateWorldBounds:function(a,b){this._setWorldBounds({x:a.minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY});this._hitTest&&!b&&this._hitTest.setGraphParameters(this.baseURL,this.path,this._worldBounds)},_initializeGraphListeners:function(){this.connect(this._graph,
"onLoad","_onLoad");this.connect(this._graph,"onLoadFailed","_onLoadFailed");this.connect(this._graph,"onNodeCreated","_onBoundsChange");this.connect(this._graph,"onEdgeCreated","_onBoundsChange");this.connect(this._graph,"onNodesMoved","_onBoundsChange");this.connect(this._graph,"onNodesResized","_onBoundsChange");this.connect(this._graph,"onLabelSet","_onBoundsChange");this.connect(this._graph,"onRemove","_onBoundsChange")},_onLoad:function(){this.requestDone(!0);this._graphLoaded()},_onLoadFailed:function(){this.requestDone(!1)},
isAutoRefresh:function(){return this._autoRefresh},setAutoRefresh:function(a){this._autoRefresh=a},_onBoundsChange:function(){this._autoRefresh&&(this.refresh(),this.invalidateSVG())},_newHitTestData:function(){this._refreshOverlays();this.dispatchGraphItemEvents&&this._hitTest&&this._hitTest.isActive()&&this._mouseOverOutTest()},highlight:function(a){if(!this._highlightMap.item(a)){var b=this._createHighlightDiv(a);b&&(this.overlays.appendChild(b),this._highlightMap.add(a,b))}},unhighlight:function(a){var b=
this._highlightMap.item(a);b&&(this._removeDOMChildren(b),dojo._destroyElement(b));this._highlightMap.remove(a)},unhighlightAll:function(){this._highlightMap.clear();this._removeDOMChildren(this.overlays)},_createHighlightDiv:function(a){return"Edge"!=l.getElementType(a)?this._highlightRect(a):this._highlightEdge(a)},_refreshHighlight:function(a){var b=this._highlightMap.item(a);b&&(this._removeDOMChildren(b),dojo._destroyElement(b));(b=this._createHighlightDiv(a))&&this.overlays.appendChild(b);this._highlightMap.add(a,
b)},_highlightRect:function(a){if(null!=this._highlighter&&(a=this._hitTest.getBoundsForId(a))){var b=dojo.doc.createElement("div"),c=this.highlightNodeSurroundPixels;dojo.style(b,"left",a.minX*this.zoom-c+"px");dojo.style(b,"top",a.minY*this.zoom-c+"px");dojo.style(b,"width",a.width()*this.zoom+2*c+"px");dojo.style(b,"height",a.height()*this.zoom+2*c+"px");this._highlighter.drawNodeHighlight(this,b,a);return b}return null},_highlightEdge:function(a){if(null!=this._highlighter&&(a=this._hitTest.getControlPoints(a),
null!=a)){for(var b=dojo.doc.createElement("div"),c=0;c<a.length;c++)this._highlighter.drawEdgeHighlight(this,b,c,a);return b}return null}});s.RENDER_MODE_SVG="svg";s.RENDER_MODE_BITMAP="bitmap";return s})},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(i,e,c,a,b){var f={},d={},h={length:0,add:function(a){if(d[a.id])throw Error("Tried to register widget with id=="+a.id+" but that id is already registered");
d[a.id]=a;this.length++},remove:function(a){d[a]&&(delete d[a],this.length--)},byId:function(a){return"string"==typeof a?d[a]:a},byNode:function(a){return d[a.getAttribute("widgetId")]},toArray:function(){var a=[],b;for(b in d)a.push(d[b]);return a},getUniqueId:function(a){var c;do c=a+"_"+(a in f?++f[a]:f[a]=0);while(d[c]);return"dijit"==b._scopeName?c:b._scopeName+"_"+c},findWidgets:function(a,b){function c(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var g=a.getAttribute("widgetId");
g?(g=d[g])&&f.push(g):a!==b&&c(a)}}var f=[];c(a);return f},_destroyAll:function(){b._curFocus=null;b._prevFocus=null;b._activeStack=[];i.forEach(h.findWidgets(a.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var b=1==a.nodeType&&a.getAttribute("widgetId");if(b)return d[b];a=a.parentNode}return null},_hash:d};return b.registry=h})},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array",
"dojo/aspect","dojo/_base/declare"],function(i,e,c){return c("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){i.forEach(arguments,function(a){var b="destroyRecursive"in a?"destroyRecursive":"destroy"in a?"destroy":"remove",c=e.before(this,"destroy",function(c){a[b](c)}),d=e.after(a,b,function(){c.remove();d.remove()},!0)},this);return arguments}})})},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang",
"../registry","../main"],function(i,e,c,a,b){var f={};i.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),function(b){f[b]=a[b]});c.mixin(f,{defaultDuration:e.defaultDuration||200});c.mixin(b,f);return b})},"dojox/uuid/Uuid":function(){define("dojox/uuid/Uuid",["dojo/_base/lang","./_base"],function(i){dojox.uuid.Uuid=function(e){this._uuidString=dojox.uuid.NIL_UUID;if(e)dojox.uuid.assert(i.isString(e)),this._uuidString=e.toLowerCase(),dojox.uuid.assert(this.isValid());
else if(e=dojox.uuid.Uuid.getGenerator())this._uuidString=e(),dojox.uuid.assert(this.isValid())};dojox.uuid.Uuid.compare=function(e,c){var a=e.toString(),b=c.toString();return a>b?1:a<b?-1:0};dojox.uuid.Uuid.setGenerator=function(e){dojox.uuid.assert(!e||i.isFunction(e));dojox.uuid.Uuid._ourGenerator=e};dojox.uuid.Uuid.getGenerator=function(){return dojox.uuid.Uuid._ourGenerator};dojox.uuid.Uuid.prototype.toString=function(){return this._uuidString};dojox.uuid.Uuid.prototype.compare=function(e){return dojox.uuid.Uuid.compare(this,
e)};dojox.uuid.Uuid.prototype.isEqual=function(e){return 0==this.compare(e)};dojox.uuid.Uuid.prototype.isValid=function(){return dojox.uuid.isValid(this)};dojox.uuid.Uuid.prototype.getVariant=function(){return dojox.uuid.getVariant(this)};dojox.uuid.Uuid.prototype.getVersion=function(){if(!this._versionNumber)this._versionNumber=dojox.uuid.getVersion(this);return this._versionNumber};dojox.uuid.Uuid.prototype.getNode=function(){if(!this._nodeString)this._nodeString=dojox.uuid.getNode(this);return this._nodeString};
dojox.uuid.Uuid.prototype.getTimestamp=function(e){e||(e=null);switch(e){case "string":case String:return this.getTimestamp(Date).toUTCString();case "hex":if(!this._timestampAsHexString)this._timestampAsHexString=dojox.uuid.getTimestamp(this,"hex");return this._timestampAsHexString;case null:case "date":case Date:if(!this._timestampAsDate)this._timestampAsDate=dojox.uuid.getTimestamp(this,Date);return this._timestampAsDate;default:dojox.uuid.assert(!1,"The getTimestamp() method dojox.uuid.Uuid was passed a bogus returnType: "+
e)}};return dojox.uuid.Uuid})},"yfiles/client/tiles/NavigationInputMode":function(){define("yfiles/client/tiles/NavigationInputMode",["dojo/_base/declare","yfiles/client/tiles/InputMode","yfiles/client/tiles/MoveViewportInputMode","yfiles/client/tiles/PinchInputMode"],function(i,e,c,a){return i([e],{_connectHandles:null,moveViewportMode:null,pinchMode:null,constructor:function(){this._connectHandles=[];this.moveViewportMode=this.createMoveViewportInputMode();this.pinchMode=this.createPinchInputMode()},
_attachEventListeners:function(){this._connectHandles.push(dojo.connect(this._canvas,"onTouchStart",this,"_onTouchStart"));this._connectHandles.push(dojo.connect(this._canvas,"onTouchEnd",this,"_onTouchEnd"));this._connectHandles.push(dojo.connect(this._canvas,"onTouchLongPress",this,"_onTouchLongPress"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseDown",this,"_onMouseDown"))},_detachEventListeners:function(){for(;0<this._connectHandles.length;){var a=this._connectHandles.pop();dojo.disconnect(a)}},
createMoveViewportInputMode:function(){return new c(this._canvas)},createPinchInputMode:function(){return new a(this._canvas)},activate:function(){this.inherited(arguments)},deactivate:function(){this.inherited(arguments)},_onTouchStart:function(a,c){this._canvas.fixed||(this.setChild(this.moveViewportMode),this.moveViewportMode._onTouchStart(a,c))},_onTouchEnd:function(a,c){null!=this._parent&&(this.deactivate(),dojo.isFunction(this._parent._onTouchEnd)&&this._parent._onTouchEnd(a,c))},_onPinchStart:function(a,
c,d){this.setChild(this.pinchMode);this.pinchMode._onPinchStart(a,c,d)},_onPinchEnd:function(a,c,d){null!=this._parent&&(this.deactivate(),dojo.isFunction(this._parent._onPinchEnd)&&this._parent._onPinchEnd(a,c,d))},_onTouchLongPress:function(a,c){null!=this._parent&&(this.deactivate(),dojo.isFunction(this._parent._onTouchLongPress)&&this._parent._onTouchLongPress(a,c))},_onMouseDown:function(a){this._canvas.fixed||(this.setChild(this.moveViewportMode),this.moveViewportMode._onMouseDown(a))}})})},
"dijit/a11y":function(){define("dijit/a11y","dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),function(i,e,c,a,b,f,d,h){var g=h._isElementShown=function(a){var c=f.get(a);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=b.get(a,"type")};h.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return b.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;
case "iframe":var c;try{var d=a.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;c=d.body}catch(g){try{c=a.contentWindow.document.body}catch(f){return!1}}return c&&("true"==c.contentEditable||c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==a.contentEditable}};var l=h.isTabNavigable=function(a){return b.get(a,"disabled")?!1:b.has(a,"tabIndex")?0<=b.get(a,"tabIndex"):h.hasDefaultTabStop(a)};h._getTabNavigable=function(a){function c(a){return a&&"input"==a.tagName.toLowerCase()&&
a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var f,e,h,i,s,j,u={},v=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=d("ie")&&"HTML"!==a.scopeName||!g(a))){if(l(a)){var k=+b.get(a,"tabIndex");if(!b.has(a,"tabIndex")||0==k)f||(f=a),e=a;else if(0<k){if(!h||k<i)i=k,h=a;if(!s||k>=j)j=k,s=a}k=c(a);b.get(a,"checked")&&k&&(u[k]=a)}"SELECT"!=a.nodeName.toUpperCase()&&v(a)}};g(a)&&v(a);return{first:u[c(f)]||f,last:u[c(e)]||e,lowest:u[c(h)]||h,highest:u[c(s)]||
s}};h.getFirstInTabbingOrder=function(b,c){var d=h._getTabNavigable(a.byId(b,c));return d.lowest?d.lowest:d.first};h.getLastInTabbingOrder=function(b,c){var d=h._getTabNavigable(a.byId(b,c));return d.last?d.last:d.highest};return{hasDefaultTabStop:h.hasDefaultTabStop,isTabNavigable:h.isTabNavigable,_getTabNavigable:h._getTabNavigable,getFirstInTabbingOrder:h.getFirstInTabbingOrder,getLastInTabbingOrder:h.getLastInTabbingOrder}})},"url:yfiles/client/svg/widget/SVGViewPort.html":'<div data-dojo-attach-point="svgContainer" style="width:100%;height:100%;position:absolute;">\r\n</div>',
"yfiles/client/tiles/widget/ViewPortMarker":function(){define("yfiles/client/tiles/widget/ViewPortMarker","dojo/_base/declare,dojo/dnd/Moveable,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/registry,yfiles/client/tiles/widget/_MarkerMoveable".split(","),function(i,e,c,a,b,f){return i([c,a],{templateString:'<div class="yFilesViewPortMarker" data-dojo-attach-point="marker" style="padding:0pt;margin:0pt;position:absolute;display:block;font-size:1px;cursor:move;z-index:10;"></div>',dragDelay:30,marker:null,
canvasId:"",overviewId:"",lastBounds:null,canvas:null,overview:null,markerParent:null,_lateInitHandle:null,_dragging:!1,postCreate:function(){if(!this.canvas)this.canvas=b.byId(this.canvasId);if(!this.overview)this.overview=b.byId(this.overviewId);dojo.style(this.marker,"opacity",0.2);this._drag=this.createMovable();this.connect(this._drag,"onMoved","markerChanged");this.markerParent=this.overview.domNode;this.connect(this.overview,"viewPortChanged","overviewChanged");this.connect(this.markerParent,
"ondblclick","centerMarker");this.connect(this._drag,"onMouseDown",this._onMouseDown);this.connect(this.overview,"onMouseUp",this._onMouseUp);if(null==this.canvas)this._lateInitHandle=this.connect(b,"add","lateInitialization");else{with(this.canvas)this.lastBounds={width:width,height:height,x:x,y:y,zoom:zoom};this.connect(this.canvas,"viewPortChanged","canvasChanged")}},createMovable:function(){return new f(this.marker,this)},lateInitialization:function(a){if(a.id==this.canvasId){this.canvas=a;with(this.canvas)this.lastBounds=
{width:width,height:height,x:x,y:y,zoom:zoom};this.connect(this.canvas,"viewPortChanged","canvasChanged");this.disconnect(this._lateInitHandle)}},_onMouseDown:function(){this._dragging=!0},_onMouseUp:function(){this._dragging=!1},overviewChanged:function(){this.lastBounds&&this.canvasChanged(this.lastBounds.x,this.lastBounds.y,this.lastBounds.width,this.lastBounds.height,this.lastBounds.zoom)},canvasChanged:function(a,b,c,f,e){if(!this._dragging){this.lastBounds={width:c,height:f,x:a,y:b,zoom:e};
e=this.overview.zoom/e;c=Math.round(c*e);f=Math.round(f*e);dojo.isIE&&(c=Math.min(c,4090),f=Math.min(f,4090));var m=this.overview.y,a=Math.round(this.overview.x-a*e),b=Math.round(m-b*e);dojo.style(this.marker,{left:a+"px",top:b+"px",width:c+"px",height:f+"px"})}},markerChanged:function(){},centerMarker:function(a){var b=dojo.coords(this.markerParent,!1),c=a.pageX-b.x-parseInt(dojo.style(this.marker,"width"))/2,a=a.pageY-b.y-parseInt(dojo.style(this.marker,"height"))/2;this._drag._initDrag(this.marker);
this._drag.onMove(this.marker,{l:c,t:a})}})})},"dojo/dnd/common":function(){define("dojo/dnd/common",["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(i,e,c,a){var b=c.getObject("dojo.dnd",!0);b.getCopyKeyState=i.isCopyKey;b._uniqueId=0;b.getUniqueId=function(){var c;do c=e._scopeName+"Unique"+ ++b._uniqueId;while(a.byId(c));return c};b._empty={};b.isFormElement=function(a){a=a.target;if(3==a.nodeType)a=a.parentNode;return 0<=" button textarea input select option ".indexOf(" "+
a.tagName.toLowerCase()+" ")};return b})},"dijit/DialogUnderlay":function(){define("dijit/DialogUnderlay","dojo/_base/declare,dojo/dom-attr,dojo/window,./_Widget,./_TemplatedMixin,./BackgroundIframe".split(","),function(i,e,c,a,b,f){return i("dijit.DialogUnderlay",[a,b],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_setDialogIdAttr:function(a){e.set(this.node,"id",a+"_underlay");this._set("dialogId",
a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var g=c.getBox(this.ownerDocument);b.top=g.t+"px";b.left=g.l+"px";a.width=g.w+"px";a.height=g.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new f(this.domNode)},hide:function(){this.bgIframe.destroy();
delete this.bgIframe;this.domNode.style.display="none"}})})},"yfiles/client/tiles/ServerAction":function(){define("yfiles/client/tiles/ServerAction","dojo/_base/declare,dojo/request/xhr,yfiles/client/tiles/Graph,yfiles/client/tiles/HitTest,yfiles/client/tiles/HierarchyManager,yfiles/client/tiles/widget/GraphCanvas".split(","),function(i,e){return i(null,{_id:null,_url:null,_clientContext:null,_graphName:null,_graph:null,_canvas:null,_hitTest:null,_hierarchy:null,_selection:null,_customParameter:null,
_preRun:null,_postRun:null,_errorHandler:null,_customResponse:null,_worldBounds:null,constructor:function(c){c=dojo.mixin({url:"./yFilesAction",error:function(a){console.error(a)}},c);dojo.isString(c.id)?(this.setId(c.id),this.setUrl(c.url),this.setCanvas(c.canvas),this.setGraphName(c.graphName),this.setGraph(c.graph),this.setHitTest(c.hitTest),this.setHierarchyManager(c.hierarchy),this.setSelection(c.selection),this.setClientContext(c.clientContext),this.setCustomParameter(c.customParameter),this.setPreRun(c.preRun),
this.setPostRun(c.postRun),this.setErrorHandler(c.error)):console.error("no suitable id parameter in constructor for ServerAction: "+c.id)},getId:function(){return this._id},setId:function(c){this._id=c},getUrl:function(){return this._url},setUrl:function(c){this._url=c},getClientContext:function(){return this._clientContext},setClientContext:function(c){this._clientContext=c},getCustomParameter:function(){return this._customParameter},setCustomParameter:function(c){this._customParameter=c},getHitTest:function(){var c=
this._hitTest;return c?c:(c=this.getCanvas())?c.getHitTest():null},setHitTest:function(c){this._hitTest=c},getHierarchyManager:function(){return this._hierarchy},setHierarchyManager:function(c){this._hierarchy=c},getSelection:function(){return this._selection},setSelection:function(c){this._selection=c},getCanvas:function(){return this._canvas},setCanvas:function(c){this._canvas=c},getGraph:function(){if(this._graph)return this._graph;var c=this.getCanvas();return c?c.getGraph():(c=this.getHierarchyManager())?
c.getGraph():null},setGraph:function(c){this._graph=c},getPreRun:function(){return this._preRun},setPreRun:function(c){this._preRun=c},getPostRun:function(){return this._postRun},setPostRun:function(c){this._postRun=c},getErrorHandler:function(){return this._errorHandler},setErrorHandler:function(c){this._errorHandler=c},getCustomResponse:function(){return this._customResponse},getWorldBounds:function(){return this._worldBounds},getGraphName:function(){var c=this._graphName;if(c)return c;return(c=
this.getGraph())?c.getName():(c=this.getHitTest())?c.getGraphName():null},setGraphName:function(c){this._graphName=c},run:function(){var c=this.getPreRun(),a=!0;dojo.isFunction(c)&&(a=c.apply(this));this._worldBounds=this._customResponse=null;if(a){var b=this,b=this;e.post(this.getUrl(),{handleAs:"json",data:this._createContent()}).then(function(a){b._handleResponse(a)},function(a){var c=b.getErrorHandler();dojo.isFunction(c)&&c(a)})}},_createContent:function(){var c={id:this._id},a=this.getGraphName();
if(a){c.graphName=a;if(a=this.getHitTest())c.hasHitTest=!0,c.hitTypes=a.getEventMask();if(this.getHierarchyManager())c.hasHierarchy=!0}if(a=this.getCustomParameter())c.customParameter=a;var b=this.getCanvas();if(b){c.hasCanvas=!0;a=b.zoom;c.width=b.width/a;c.height=b.height/a;c.zoom=a;var f=b.x/a,d=b.y/a;c.viewpoint=f+","+d;b=b.getMousePosition();c.mouse=b.x/a+f+","+(b.y/a+d)}if(a=this.getSelection())if(c.hasSelection=!0,a=a.get(),0<a.length)c.selection=a.join(",");return c},_handleResponse:function(c){this._customResponse=
c.customResponse;this._updateClient(c);c=this.getPostRun();dojo.isFunction(c)&&c.apply(this)},_updateClient:function(c){this.getGraphName();if(c.worldBounds)this._worldBounds=c.worldBounds;if(c.hitTestData&&this.getHitTest()){var a=this;this.getHitTest().setData(c.hitTestData,function(){a._updateClientSecond(c)})}else this._updateClientSecond(c)},_updateClientSecond:function(c){c.hierarchyData&&this.getHierarchyManager()&&this.getHierarchyManager().setData(c.hierarchyData);dojo.isString(c.selection)&&
this.getSelection()&&this._handleSelection(c.selection);var a=this.getCanvas();a&&(this._updateCanvas(c),c.refreshCanvas&&(a.pushTiles(),a.recalculateTiles(!0),a.invalidateSVG()))},_handleSelection:function(c){if(dojo.isString(c)){var a=this.getSelection(),c=c.split(",");a.clear();a.addAll(c)}},_updateCanvas:function(c){var a=this.getCanvas(),b=this.getWorldBounds();b&&a.updateWorldBounds({minX:b.x,minY:b.y,maxX:b.x+b.width,maxY:b.y+b.height},!0);c.viewPoint&&a.setViewPoint(c.viewPoint.x*a.zoom,c.viewPoint.y*
a.zoom);c.zoom&&a.setZoom(c.zoom)}})})},"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',
"dijit/_Widget":function(){define("dijit/_Widget","dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),function(i,e,c,a,b,f,d,h,g,l,k,m,q){function n(){}function r(a){return function(b,g,f,e){return b&&"string"==typeof g&&b[g]==n?b.on(g.substring(2).toLowerCase(),d.hitch(f,e)):a.apply(c,arguments)}}i.around(c,"connect",r);f.connect&&
i.around(f,"connect",r);i=a("dijit._Widget",[k,m,q],{onClick:n,onDblClick:n,onKeyDown:n,onKeyPress:n,onKeyUp:n,onMouseDown:n,onMouseMove:n,onMouseOut:n,onMouseOver:n,onMouseLeave:n,onMouseEnter:n,onMouseUp:n,constructor:function(a){this._toConnect={};for(var b in a)this[b]===n&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===
n?c.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(e.isDebug){var c=arguments.callee._ach||(arguments.callee._ach={}),d=(arguments.callee.caller||"unknown caller").toString();c[d]||(f.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+
d,"","2.0"),c[d]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?h("[widgetId]",this.containerNode).map(l.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});b("dijit-legacy-requires")&&g(0,function(){require(["dijit/_base"])});return i})},
"dojo/cache":function(){define("dojo/cache",["./_base/kernel","./text"],function(i){return i.cache})},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(i,e,c,a){a.extend(e,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return c("dijit._FocusMixin",null,{_focusManager:i})})},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",
"dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(i,e,c,a,b,f,d,h){i=a("dijit._OnDijitClickMixin",null,{connect:function(a,b,c){return this.inherited(arguments,[a,"ondijitclick"==b?h:b,c])}});i.a11yclick=h;return i})},"dojox/gfx/_base":function(){define("dojox/gfx/_base","dojo/_base/kernel,dojo/_base/lang,dojo/_base/Color,dojo/_base/sniff,dojo/_base/window,dojo/_base/array,dojo/dom,dojo/dom-construct,dojo/dom-geometry".split(","),
function(i,e,c,a,b,f,d,h,g){var l=e.getObject("dojox.gfx",!0),k=l._base={};l._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};l._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||0>(" "+c+" ").indexOf(" "+b+" "))a.setAttribute("className",c+(c?" ":"")+b)};l._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};k._getFontMeasurements=function(){var c=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},d;if(a("ie"))b.doc.documentElement.style.fontSize="100%";var g=h.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},b.body());for(d in c)g.style.fontSize=d,c[d]=16*Math.round(12*g.offsetHeight/16)/12/1E3;b.body().removeChild(g);return c};var m=null;k._getCachedFontMeasurements=
function(a){if(a||!m)m=k._getFontMeasurements();return m};var q=null,n={};k._getTextBox=function(a,c,d){var f,e,m=arguments.length,l;q||(q=h.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},b.body()));f=q;f.className="";e=f.style;e.borderWidth="0";e.margin="0";e.padding="0";e.outline="0";if(1<m&&c)for(l in c)l in n||(e[l]=c[l]);if(2<m&&d)f.className=d;f.innerHTML=a;return f.getBoundingClientRect?(f=f.getBoundingClientRect(),{l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||
f.bottom-f.top}):g.getMarginBox(f)};var r=0;k._getUniqueId=function(){var a;do a=i._scopeName+"xUnique"+ ++r;while(d.byId(a));return a};e.mixin(l,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",
x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",
x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=l["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof c?a:new c(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return e.delegate(a);
var d={};for(c in a)c in d||(d[c]=e.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=l.getDefault("Font"),a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?
a[3]:a[3].substring(0,c);var d=4;0>c&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));if(d<a.length)b.family=a.slice(d).join(" ")}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return l._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*l.px_in_pt()},px2pt:function(a){return a/l.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=l.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*
c*b;case "pc":return 12*c*b;case "mm":return c*l.mm_in_pt*b;case "cm":return c*l.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?l[a]:a;b&&f.forEach("Group,Rect,Ellipse,Circle,Line,Polyline,Image,Text,Path,TextPath,Surface,createSurface,fixTarget".split(","),function(a){l[a]=
b[a]})}});return l})},"dijit/focus":function(){define("dijit/focus","dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),function(i,e,c,a,b,f,d,h,g,l,k,m,q,n,r,p,s){var j=new (e([k,f],{curNode:null,activeStack:[],constructor:function(){var a=d.hitch(this,function(a){c.isDescendant(this.curNode,a)&&this.set("curNode",null);
c.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});i.before(b,"empty",a);i.before(b,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=function(a){c._justMouseDowned=!0;setTimeout(function(){c._justMouseDowned=!1},0);if(!l("ie")||!a||!(a.srcElement&&null==a.srcElement.parentNode))c._onTouchNode(b||a.target||a.srcElement,"mouse")},g=l("ie")?a.document.documentElement:a.document;if(g){if(l("ie")){a.document.body.attachEvent("onmousedown",
d);var f=function(a){var d=a.srcElement.tagName.toLowerCase();"#document"==d||"body"==d||(r.isTabNavigable(a.srcElement)?c._onFocusNode(b||a.srcElement):c._onTouchNode(b||a.srcElement))};g.attachEvent("onfocusin",f);var e=function(a){c._onBlurNode(b||a.srcElement)};g.attachEvent("onfocusout",e);return{remove:function(){a.document.detachEvent("onmousedown",d);g.detachEvent("onfocusin",f);g.detachEvent("onfocusout",e);g=null}}}g.body.addEventListener("mousedown",d,!0);g.body.addEventListener("touchstart",
d,!0);var h=function(a){c._onFocusNode(b||a.target)};g.addEventListener("focus",h,!0);var m=function(a){c._onBlurNode(b||a.target)};g.addEventListener("blur",m,!0);return{remove:function(){g.body.removeEventListener("mousedown",d,!0);g.body.removeEventListener("touchstart",d,!0);g.removeEventListener("focus",h,!0);g.removeEventListener("blur",m,!0);g=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(d.hitch(this,function(){this.set("prevNode",
this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(d.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(b,c){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var d=[];try{for(;b;){var g=a.get(b,"dijitPopupParent");if(g)b=p.byId(g).domNode;else if(b.tagName&&
"body"==b.tagName.toLowerCase()){if(b===q.body())break;b=n.get(b.ownerDocument).frameElement}else{var f=b.getAttribute&&b.getAttribute("widgetId"),e=f&&p.byId(f);e&&!("mouse"==c&&e.get("disabled"))&&d.unshift(f);b=b.parentNode}}}catch(h){}this._setStack(d,c)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,
b){var c=this.activeStack;this.set("activeStack",a);for(var d=0;d<Math.min(c.length,a.length)&&!(c[d]!=a[d]);d++);for(var g,f=c.length-1;f>=d;f--)if(g=p.byId(c[f]))g._hasBeenBlurred=!0,g.set("focused",!1),g._focusManager==this&&g._onBlur(b),this.emit("widget-blur",g,b);for(f=d;f<a.length;f++)if(g=p.byId(a[f]))g.set("focused",!0),g._focusManager==this&&g._onFocus(b),this.emit("widget-focus",g,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));g(function(){var a=j.registerWin(n.get(q.doc));l("ie")&&
m.addOnWindowUnload(function(){a&&(a.remove(),a=null)})});s.focus=function(a){j.focus(a)};for(var u in j)/^_/.test(u)||(s.focus[u]="function"==typeof j[u]?d.hitch(j,u):j[u]);j.watch(function(a,b,c){s.focus[a]=c});return j})},"yfiles/client/tiles/Graph":function(){define("yfiles/client/tiles/Graph",["dojo/_base/declare","dojo/request/xhr","dojo/Evented"],function(i,e,c){return i([c],{_name:null,_baseURL:null,constructor:function(a,b){this._baseURL=a?a:".";if(b)this._name=b,this.load(b);this._knownResizeModes=
"NW,N,NE,W,E,SW,S,SE".split(",")},getName:function(){return this._name},getBaseURL:function(){return this._baseURL},load:function(a,b,c){var d={path:a};if(b)d.reload="true";var h=this;e.post(this._baseURL+"/loadGraph",{data:d}).then(function(){h._name=a;h.onLoad(a,c)},function(){h.onLoadFailed(a,c)})},createNode:function(a,b,c,d){var h={name:this._name,x:a,y:b};if(c)h.type=c;if(this._name){var g=this;e.post(this._baseURL+"/createNode",{handleAs:"json",data:h}).then(function(c){g.onNodeCreated(c.id,
c.bounds,this._name,a,b,d)},function(){g.onNodeCreationFailed(g._name,a,b,d)})}else this.onNodeCreationFailed(null,a,b,d)},createEdge:function(a,b,c,d){if(this._name){var h=this;e.post(this._baseURL+"/createEdge",{handleAs:"json",data:{name:this._name,source:a,target:b,route:c?1:0}}).then(function(c){h.onEdgeCreated(c.id,c.bounds,h._name,a,b,d)},function(){h.onEdgeCreationFailed(h._name,a,b,d)})}else this.onEdgeCreationFailed(null,a,b,d)},removeAt:function(a,b,c){if(this._name){var d=this;e.post(this._baseURL+
"/removeAt?name="+this._name+"&x="+a+"&y="+b,{handleAs:"json"}).then(function(e){d.onRemove([e.id],e.bounds,d._name,a,b,c)},function(){d.onRemoveFailed([],d._name,a,b,c)})}else this.onRemoveFailed([],null,a,b,c)},remove:function(a,b){if(this._name&&0<a.length){for(var c=a[0],d=1;d<a.length;d++)c=c+","+a[d];var h=this;e.post(this._baseURL+"/remove",{handleAs:"json",data:{name:this._name,ids:c}}).then(function(c){h.onRemove(a,c.bounds,h._name,b)},function(){h.onRemoveFailed(a,h._name,b)})}else this.onRemoveFailed(a,
null,b)},moveNodes:function(a,b,c,d,h){if(this._name&&0<a.length){for(var g=a[0],l=1;l<a.length;l++)g=g+","+a[l];var k=this;e.post(this._baseURL+"/moveNodes",{data:{name:this._name,ids:g,x:b,y:c,route:d?1:0},handleAs:"json"}).then(function(d){k.onNodesMoved(d.bounds,k._name,a,b,c,h)},function(){k.onNodesMoveFailed(k._name,a,b,c,h)})}else this.onNodesMoveFailed(null,a,b,c,h)},resizeNodes:function(a,b,c,d,h,g){if(this._name&&0<a.length&&0<=dojo.indexOf(this._knownResizeModes,b)){for(var l=a[0],k=1;k<
a.length;k++)l=l+","+a[k];var m=this;e.post(this._baseURL+"/resizeNodes",{handleAs:"json",data:{name:this._name,ids:l,m:b,dw:c,dh:d,route:h?1:0}}).then(function(b){m.onNodesResized(b.bounds,m._name,a,c,d,g)},function(){m.onNodesResizeFailed(m._name,a,c,d,g)})}else this.onNodesResizeFailed(null,a,c,d,g)},getLabel:function(a,b,c,d,h){if(this._name){var g=this;e.post(this._baseURL+"/getLabel",{data:{name:this._name,id:a},handleAs:"text"}).then(function(d){c.call(b,d,g._name,a,h)},function(){d&&d.call(b,
g._name,a,h)})}else d&&d.call(b,null,a,h)},setLabel:function(a,b,c){if(this._name){var d=this,h=encodeURIComponent(b);e.post(this._baseURL+"/setLabel",{data:{name:this._name,id:a,label:h},handleAs:"text"}).then(function(){d.onLabelSet(b,d._name,a,c)},function(){d.onLabelSetFailed(b,d._name,a,c)})}else this.onLabelSetFailed(b,null,a,c)},getBounds:function(a,b,c,d,h){var g={path:this._name};if(d)g.seq=d;if(this._name){var l=this;e.get(this._baseURL+"/getWorldBounds",{query:g,handleAs:"json"}).then(function(c){b.call(a,
c,l._name,h)},function(){c&&c.call(a,l._name,h)})}else c&&c.call(a,null,h)},onLoad:function(){},onLoadFailed:function(){},onNodeCreated:function(){},onNodeCreationFailed:function(){},onEdgeCreated:function(){},onEdgeCreationFailed:function(){},onRemove:function(){},onRemoveFailed:function(){},onNodesMoved:function(){},onNodesMoveFailed:function(){},onNodesResized:function(){},onNodesResizeFailed:function(){},onLabelSet:function(){},onLabelSetFailed:function(){}})})},"dojox/uuid/generateTimeBasedUuid":function(){define("dojox/uuid/generateTimeBasedUuid",
["dojo/_base/lang","./_base"],function(i){dojox.uuid.generateTimeBasedUuid=function(e){return dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(e)};dojox.uuid.generateTimeBasedUuid.isValidNode=function(e){var c=parseInt(e,16);return i.isString(e)&&12==e.length&&isFinite(c)};dojox.uuid.generateTimeBasedUuid.setNode=function(e){dojox.uuid.assert(null===e||this.isValidNode(e));this._uniformNode=e};dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode};dojox.uuid.generateTimeBasedUuid._generator=
new function(){function e(a){a[2]+=a[3]>>>16;a[3]&=65535;a[1]+=a[2]>>>16;a[2]&=65535;a[0]+=a[1]>>>16;a[1]&=65535;dojox.uuid.assert(0===a[0]>>>16)}function c(a){var b=[0,0,0,0];b[3]=a%65536;a-=b[3];a/=65536;b[2]=a%65536;a-=b[2];a/=65536;b[1]=a%65536;a-=b[1];b[0]=a/65536;return b}function a(a,b){dojox.uuid.assert(i.isArray(a));dojox.uuid.assert(i.isArray(b));dojox.uuid.assert(4==a.length);dojox.uuid.assert(4==b.length);var c=!1;0!==a[0]*b[0]&&(c=!0);0!==a[0]*b[1]&&(c=!0);0!==a[0]*b[2]&&(c=!0);0!==a[1]*
b[0]&&(c=!0);0!==a[1]*b[1]&&(c=!0);0!==a[2]*b[0]&&(c=!0);dojox.uuid.assert(!c);c=[0,0,0,0];c[0]+=a[0]*b[3];e(c);c[0]+=a[1]*b[2];e(c);c[0]+=a[2]*b[1];e(c);c[0]+=a[3]*b[0];e(c);c[1]+=a[1]*b[3];e(c);c[1]+=a[2]*b[2];e(c);c[1]+=a[3]*b[1];e(c);c[2]+=a[2]*b[3];e(c);c[2]+=a[3]*b[2];e(c);c[3]+=a[3]*b[3];e(c);return c}function b(a,b){for(;a.length<b;)a="0"+a;return a}this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var f=null,d=null,h=null,g=0,l=null,k=null;this.generateUuidString=function(m){if(m)dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(m));
else if(dojox.uuid.generateTimeBasedUuid._uniformNode)m=dojox.uuid.generateTimeBasedUuid._uniformNode;else{if(!f){for(var m=(32768|Math.floor(Math.random()%1*Math.pow(2,15))).toString(16),q=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>q.length;)q="0"+q;f=m+q}m=f}d||(d=(32768|Math.floor(Math.random()%1*Math.pow(2,14))).toString(16));var q=new Date,n=c(q.valueOf());if(!l){var r=c(3600),p=c(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS),r=a(p,r),p=c(1E3);l=
a(r,p);k=c(1E4)}r=l;dojox.uuid.assert(i.isArray(r));dojox.uuid.assert(i.isArray(n));dojox.uuid.assert(4==r.length);dojox.uuid.assert(4==n.length);p=[0,0,0,0];p[3]=r[3]+n[3];p[2]=r[2]+n[2];p[1]=r[1]+n[1];p[0]=r[0]+n[0];e(p);n=a(p,k);if(q.valueOf()==h){if(n[3]+=g,e(n),g+=1,1E4==g)for(;q.valueOf()==h;)q=new Date}else h=q.valueOf(),g=1;q=n[2].toString(16);r=n[3].toString(16);q=b(q,4)+b(r,4);r=n[1].toString(16);r=b(r,4);n=n[0].toString(16);n=b(n,3);m=q+"-"+r+"-1"+n+"-"+d+"-"+m;return m=m.toLowerCase()}};
return dojox.uuid.generateTimeBasedUuid})},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(i){return i.dijit})},"dojo/date/stamp":function(){define("dojo/date/stamp",["../_base/lang","../_base/array"],function(i,e){var c={};i.setObject("dojo.date.stamp",c);c.fromISOString=function(a,b){if(!c._isoRegExp)c._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var f=c._isoRegExp.exec(a),d=null;if(f){f.shift();
f[1]&&f[1]--;f[6]&&(f[6]*=1E3);b&&(b=new Date(b),e.forEach(e.map("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds".split(","),function(a){return b["get"+a]()}),function(a,b){f[b]=f[b]||a}));d=new Date(f[0]||1970,f[1]||0,f[2]||1,f[3]||0,f[4]||0,f[5]||0,f[6]||0);100>f[0]&&d.setFullYear(f[0]||1970);var h=0,g=f[7]&&f[7].charAt(0);"Z"!=g&&(h=60*(f[8]||0)+(Number(f[9])||0),"-"!=g&&(h*=-1));g&&(h-=d.getTimezoneOffset());h&&d.setTime(d.getTime()+6E4*h)}return d};c.toISOString=function(a,b){var c=function(a){return 10>
a?"0"+a:a},b=b||{},d=[],e=b.zulu?"getUTC":"get",g="";"time"!=b.selector&&(g=a[e+"FullYear"](),g=["0000".substr((g+"").length)+g,c(a[e+"Month"]()+1),c(a[e+"Date"]())].join("-"));d.push(g);if("date"!=b.selector){g=[c(a[e+"Hours"]()),c(a[e+"Minutes"]()),c(a[e+"Seconds"]())].join(":");e=a[e+"Milliseconds"]();b.milliseconds&&(g+="."+(100>e?"0":"")+c(e));if(b.zulu)g+="Z";else if("time"!=b.selector)var e=a.getTimezoneOffset(),l=Math.abs(e),g=g+((0<e?"-":"+")+c(Math.floor(l/60))+":"+c(l%60));d.push(g)}return d.join("T")};
return c})},"dojox/gfx":function(){define("dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(i,e,c){e.switchTo(c);return e})},"yfiles/client/tiles/CreateEdgeMode":function(){define("yfiles/client/tiles/CreateEdgeMode","dojo/_base/declare,yfiles/client/tiles/InputMode,yfiles/client/tiles/Graph,yfiles/client/tiles/HitTest,yfiles/client/tiles/widget/GraphCanvas,yfiles/client/tiles/widget/CanvasDragLine".split(","),function(i,e,c,a,b,f){return i([e],{startNode:null,routeEdges:!1,
_dragLine:null,_endNode:null,constructor:function(a,b){if(b)this.routeEdges=b},activate:function(){this.inherited(arguments);!this.startNode||!this.acceptSourceNode(this.startNode)?this.cancelEdgeCreation():this._startCreateEdge(this.startNode)},deactivate:function(){this.startNode=null;this.setTargetNode(null);if(null!=this._dragLine)this._dragLine.deactivate(),this._canvas.containerNode.removeChild(this._dragLine.domNode),this._dragLine=null;this.inherited(arguments)},cancelEdgeCreation:function(){this.deactivate()},
acceptSourceNode:function(){return null!=this.startNode},acceptTargetNode:function(){return!0},setTargetNode:function(a){this._endNode=a},createEdge:function(a,b,c){b&&c&&a.createEdge(b,c,this.routeEdges)},_attachEventListeners:function(){this._mouseOverHandle=dojo.connect(this._canvas,"onMouseOverNode",this,"_onMouseOverNode");this._mouseOutHandle=dojo.connect(this._canvas,"onMouseOutNode",this,"_onMouseOutNode");this._mouseOverLabelHandle=dojo.connect(this._canvas,"onMouseOverNodeLabel",this,"_onMouseOverNodeLabel");
this._mouseOutLabelHandle=dojo.connect(this._canvas,"onMouseOutNodeLabel",this,"_onMouseOutNodeLabel")},_detachEventListeners:function(){dojo.disconnect(this._mouseOverHandle);dojo.disconnect(this._mouseOutHandle);dojo.disconnect(this._mouseOverLabelHandle);dojo.disconnect(this._mouseOutLabelHandle);dojo.disconnect(this._lineDoneHandle)},_onMouseOverNode:function(a){this.acceptTargetNode(a)&&this.setTargetNode(a)},_onMouseOutNode:function(){this.setTargetNode(null)},_onMouseOverNodeLabel:function(a){if(a=
this._canvas.getHitTest().getLabelInfo(a))a=a.mainElementId,this.acceptTargetNode(a)&&this.setTargetNode(a)},_onMouseOutNodeLabel:function(){this.setTargetNode(null)},_startCreateEdge:function(){var a=this._canvas.getMousePosition(),b=dojo.coords(this._canvas.domNode,!1);a.x+=b.x;a.y+=b.y;if(null==this._dragLine)this._dragLine=new f({canvas:this._canvas}),this._canvas.containerNode.appendChild(this._dragLine.domNode);this._dragLine.activateAt(this._canvas,a);this._lineDoneHandle=dojo.connect(this._dragLine,
"onLineDone",this,"_finishCreateEdge")},_finishCreateEdge:function(){dojo.disconnect(this._lineDoneHandle);this.createEdge(this._canvas.getGraph(),this.startNode,this._endNode);this.startNode=null;this.setTargetNode(null);this.deactivate()}})})},"dojo/dnd/TimedMoveable":function(){define("dojo/dnd/TimedMoveable",["../_base/declare","./Moveable"],function(i,e){var c=e.prototype.onMove;return i("dojo.dnd.TimedMoveable",e,{timeout:40,constructor:function(a,b){b||(b={});if(b.timeout&&"number"==typeof b.timeout&&
0<=b.timeout)this.timeout=b.timeout},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),c.call(this,a,a._leftTop));e.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,b){a._leftTop=b;if(!a._timer){var e=this;a._timer=setTimeout(function(){a._timer=null;c.call(e,a,a._leftTop)},this.timeout)}}})})},"url:yfiles/client/tiles/widget/GraphCanvas.html":'<div class="yFilesGraphCanvas" data-dojo-attach-point="tilesFrame"\n     style="overflow:hidden;position:relative;width:100%;height:100%;bottom:auto;right:auto;"\n     >\n    <div class="loading" data-dojo-attach-point="_loading" style="position:absolute;width: 100%;height:100%;z-index:0;"></div>\n    <div class="movables" data-dojo-attach-point="movables" style="padding:0;margin:0;position:absolute;">\n        <div class="oldTiles" data-dojo-attach-point="oldTiles" style="position:absolute;z-index:1;"></div>\n        <div class="tiles" data-dojo-attach-point="tiles" style="position:absolute;z-index:2;width:100%;height:100%"></div>\n        <div data-dojo-attach-point="svgLayer" style="position:absolute;z-index:3;"></div>\n        <div class="overlays" data-dojo-attach-point="overlays" style="position:absolute;z-index:4;"></div>\n    </div>\n    <div data-dojo-attach-point="glassPane" style="position:absolute;z-index:5;opacity: 0.0;width:100%;height:100%"></div>\n    <div class="contents" data-dojo-attach-point="containerNode" style="position:absolute;z-index:6;opacity:1.0"></div>\n</div>',
"dojox/gfx/renderer":function(){define("dojox/gfx/renderer",["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(i,e,c,a,b){var f=null;return{load:function(d,h,g){function l(){h(["dojox/gfx/"+k],function(a){i.renderer=k;f=a;g(a)})}if(f&&"force"!=d)g(f);else{for(var k=b.forceGfxRenderer,d=!k&&(e.isString(b.gfxRenderer)?b.gfxRenderer:"svg,vml,canvas,silverlight").split(","),m,q;!k&&d.length;)switch(d.shift()){case "svg":"SVGAngle"in a.global&&(k="svg");break;
case "vml":c("ie")&&(k="vml");break;case "silverlight":try{c("ie")?(m=new ActiveXObject("AgControl.AgControl"))&&m.IsVersionSupported("1.0")&&(q=!0):navigator.plugins["Silverlight Plug-In"]&&(q=!0)}catch(n){q=!1}finally{m=null}q&&(k="silverlight");break;case "canvas":a.global.CanvasRenderingContext2D&&(k="canvas")}"canvas"===k&&!1!==b.canvasEvents&&(k="canvasWithEvents");"svg"==k&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(l):l()}}}})},"dojox/uuid/_base":function(){define("dojox/uuid/_base",
["dojo/_base/kernel","dojo/_base/lang"],function(i){i.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(e,c){if(!e)throw c||(c="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(c);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};
dojox.uuid.isValid=function(e){var e=e.toString(),c=i.isString(e)&&36==e.length&&e==e.toLowerCase();if(c){var e=e.split("-"),c=5==e.length&&8==e[0].length&&4==e[1].length&&4==e[2].length&&4==e[3].length&&12==e[4].length,a;for(a in e)var b=parseInt(e[a],16),c=c&&isFinite(b)}return c};dojox.uuid.getVariant=function(e){if(!dojox.uuid._ourVariantLookupTable){var c=dojox.uuid.variant,a=[];a[0]=c.NCS;a[1]=c.NCS;a[2]=c.NCS;a[3]=c.NCS;a[4]=c.NCS;a[5]=c.NCS;a[6]=c.NCS;a[7]=c.NCS;a[8]=c.DCE;a[9]=c.DCE;a[10]=
c.DCE;a[11]=c.DCE;a[12]=c.MICROSOFT;a[13]=c.MICROSOFT;a[14]=c.UNKNOWN;a[15]=c.UNKNOWN;dojox.uuid._ourVariantLookupTable=a}e=e.toString();e=e.charAt(19);e=parseInt(e,16);dojox.uuid.assert(0<=e&&16>=e);return dojox.uuid._ourVariantLookupTable[e]};dojox.uuid.getVersion=function(e){dojox.uuid.assert(dojox.uuid.getVariant(e)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");e=e.toString();e=e.charAt(14);return parseInt(e,16)};dojox.uuid.getNode=function(e){dojox.uuid.assert(dojox.uuid.getVersion(e)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");e=e.toString();return e.split("-")[4]};dojox.uuid.getTimestamp=function(e,c){dojox.uuid.assert(dojox.uuid.getVersion(e)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");e=e.toString();c||(c=null);switch(c){case "string":case String:return dojox.uuid.getTimestamp(e,Date).toUTCString();case "hex":var a=e.split("-"),b=a[0],f=a[1],a=a[2],a=a.slice(1),b=a+f+b;dojox.uuid.assert(15==
b.length);return b;case null:case "date":case Date:return a=e.split("-"),b=parseInt(a[0],16),f=parseInt(a[1],16),a=parseInt(a[2],16)&4095,new Date((4294967296*((a<<16)+f)+b)/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+c)}};return dojox.uuid})},"yfiles/client/tiles/EditMode":function(){define("yfiles/client/tiles/EditMode","dojo/_base/declare,dojo/_base/lang,dojo/on,yfiles/client/tiles/InputMode,yfiles/client/tiles/Graph,yfiles/client/tiles/HitTest,yfiles/client/tiles/HierarchyManager,yfiles/client/tiles/GroupNavigationMode,yfiles/client/tiles/CreateEdgeMode,yfiles/client/tiles/MoveSelectionMode,yfiles/client/tiles/ResizeNodesMode,yfiles/client/tiles/RectangularSelectionMode,yfiles/client/tiles/EditLabelMode,yfiles/client/tiles/widget/GraphCanvas,yfiles/client/tiles/ResizeHighlighter,yfiles/client/tiles/GraphSelection".split(","),
function(i,e,c,a,b,f,d,h,g,l,k,m,q,n,r,p){return i([a],{nodeType:null,hotSpotSize:10,_hierarchy:null,_groupNavigationMode:null,_createEdgeMode:null,_moveSelectionMode:null,_resizeNodesMode:null,_rectangularSelectionMode:null,_editLabelMode:null,_currentNode:null,_selection:null,_selectNodes:!1,_selectEdges:!1,_mouseDown:!1,_edgeTestSensitivity:5,_groupBorderWidth:5,_connectHandles:null,_allowEdgeCreation:!0,_allowNodeCreation:!0,_allowMoveSelection:!0,_allowResizeNodes:!0,_allowLabelEditing:!0,_allowElementRemoval:!0,
constructor:function(a,b,c,d,g){this._selectNodes=b;this._selectEdges=c;if(b||c)this._selection=new p(b,c);this._oldHighlighter=this._canvas.getHighlighter();if(g)this._hierarchy=g,this._groupNavigationMode=this.createGroupNavigationMode(a,g),this._groupNavigationMode.activate();this._createEdgeMode=this.createCreateEdgeMode(a,d);this._moveSelectionMode=this.createMoveSelectionMode(a,this._selection,g);this._resizeNodesMode=this.createResizeNodesMode(a,this._selection);this._rectangularSelectionMode=
this.createRectangularSelectionMode(a,this._selection,g);this._editLabelMode=this.createEditLabelMode(a);this._connectHandles=[]},createGroupNavigationMode:function(a,b){return new h(a,b)},createCreateEdgeMode:function(a,b){return new g(a,b)},createMoveSelectionMode:function(a,b,c){return new l(a,b,c)},createResizeNodesMode:function(a,b){return new k(a,b)},createRectangularSelectionMode:function(a,b,c){return new m(a,b,c)},createEditLabelMode:function(a){return new q(a)},createNode:function(a,b,c){a.createNode(b,
c,this.nodeType)},allowEdgeCreation:function(a){this._allowEdgeCreation=a},allowNodeCreation:function(a){this._allowNodeCreation=a},allowMoveSelection:function(a){this._allowMoveSelection=a},allowResizeNodes:function(a){(this._allowResizeNodes=a)&&null!=this.getResizeNodesMode()?this._canvas.setHighlighter(new r(this._oldHighlighter),this.hotSpotSize):this._canvas.setHighlighter(this._oldHighlighter)},allowLabelEditing:function(a){this._allowLabelEditing=a},allowElementRemoval:function(a){this._allowElementRemoval=
a},doAllowEdgeCreation:function(){return this._allowEdgeCreation},doAllowNodeCreation:function(){return this._allowNodeCreation},doAllowMoveSelection:function(){return this._allowMoveSelection},doAllowResizeNodes:function(){return this._allowResizeNodes},doAllowLabelEditing:function(){return this._allowLabelEditing},doAllowElementRemoval:function(){return this._allowElementRemoval},getCreateEdgeMode:function(){return this._createEdgeMode},getMoveSelectionMode:function(){return this._moveSelectionMode},
getResizeNodesMode:function(){return this._resizeNodesMode},getEditLabelMode:function(){return this._editLabelMode},setCreateEdgeMode:function(a){this._createEdgeMode=a},setMoveSelectionMode:function(a){this._moveSelectionMode=a},setResizeNodesMode:function(a){this._resizeNodesMode=a;null==this._resizeNodesMode?this._canvas.setHighlighter(this._oldHighlighter):this.doAllowResizeNodes()&&this._canvas.setHighlighter(new r(this._oldHighlighter),this.hotSpotSize)},setEditLabelMode:function(a){this._editLabelMode=
a},getSelection:function(){return this._selection},clearSelection:function(){this._selection.clear()},activate:function(){this.inherited(arguments);this._canvas.fixed=!0;this._canvas.navigationMode.isActive()&&this._canvas.navigationMode.deactivate();this.setCursor("crosshair","crosshair");this.doAllowResizeNodes()&&null!=this.getResizeNodesMode()&&this._canvas.setHighlighter(new r(this._oldHighlighter),this.hotSpotSize)},deactivate:function(){this._selection.clear();this._canvas.unhighlightAll();
this._canvas.fixed=!1;this._canvas.setHighlighter(this._oldHighlighter);this.setCursor("default","default");this.inherited(arguments)},editLabel:function(a){if(this.doAllowLabelEditing()){var b=this.getEditLabelMode();if(b)b.nodeOrLabel=a,this.setChild(b)}},removeElements:function(a,b){this.doAllowElementRemoval()&&a.remove(b)},getEdgeTestSensitivity:function(){return this._edgeTestSensitivity},setEdgeTestSensitivity:function(a){this._edgeTestSensitivity=a;this._hitTest.setEdgeTestSensitivity(this._edgeTestSensitivity/
this._canvas.zoom)},_onMouseOverNode:function(a){this._currentNode=a;this.setCursor("pointer","crosshair")},_onMouseOutNode:function(){this._currentNode=null;this.restoreCursor()},_onMouseOverNodeLabel:function(a){if(a=this._canvas.getHitTest().getLabelInfo(a))this._currentNode=a.mainElementId;this.setCursor("pointer","crosshair")},_onMouseOutNodeLabel:function(){this._currentNode=null;this.restoreCursor()},_onMouseOverEdge:function(){this.setCursor("pointer","crosshair")},_onMouseOutEdge:function(){this.restoreCursor()},
_onMouseDown:function(){var a=this._canvas.getLastHitInfo(),a=f.getElementType(a);if("Node"!=a&&"NodeLabel"!=a)this._currentNode=null,this._selectNodes&&this.restoreCursor();this._mouseDown=!0},_onMouseUp:function(){this._mouseDown=!1},_onClickNodeOrEdge:function(a,b,c){this._updateSelection(a,b,c)},_onClickNodeLabel:function(a,b,c){(a=this._canvas.getHitTest().getLabelInfo(a))&&this._updateSelection(a.mainElementId,b,c)},_onClickPaper:function(a,b){if(!b.ctrlKey&&!b.shiftKey&&!b.altKey){var c=this._selection.getSize();
this.clearSelection();if(0==c&&this.doAllowNodeCreation()){var c=this._canvas,d=c.getWorldCoordinates();this.createNode(c.getGraph(),d.x,d.y,this.nodeType)}}},_onMouseMove:function(a){if(this._mouseDown){this._mouseDown=!1;if(this.doAllowResizeNodes&&this._selection){var b=this._selection.getNodes();if(0<b.length)for(var c=this._canvas.getWorldCoordinates(),d=(this.hotSpotSize+this._canvas.highlightNodeSurroundPixels)/this._canvas.zoom,g=this.hotSpotSize/this._canvas.zoom,e=0;e<b.length;e++){var f=
b[e],h=this._hitTest.getBoundsForId(f);if(h.minX-d<=c.x&&c.x<=h.maxX+d&&h.minY-d<=c.y&&c.y<=h.maxY+d)if(c.y<=h.minY-d+g){if(c.x<=h.minX-d+g){this._startResizeNodes(f,"NW");return}if(h.maxX+d-g<=c.x){this._startResizeNodes(f,"NE");return}if(Math.abs((h.minX+h.maxX)/2-c.x)<=g/2){this._startResizeNodes(f,"N");return}}else if(h.maxY+d-g<=c.y){if(c.x<=h.minX-d+g){this._startResizeNodes(f,"SW");return}if(h.maxX+d-g<=c.x){this._startResizeNodes(f,"SE");return}if(Math.abs((h.minX+h.maxX)/2-c.x)<=g/2){this._startResizeNodes(f,
"S");return}}else if(Math.abs((h.minY+h.maxY)/2-c.y)<=g/2){if(c.x<=h.minX-d+g){this._startResizeNodes(f,"W");return}if(h.maxX+d-g<=c.x){this._startResizeNodes(f,"E");return}}}}this._currentNode?this._selection?this._selection.isSelected(this._currentNode)?this._startMoveSelection():this._hierarchy&&this._strictlyInsideGroupNode(this._currentNode)?this._startSelection(a):this._startCreateEdge():(!this._hierarchy||!this._strictlyInsideGroupNode(this._currentNode))&&this._startCreateEdge():this._selection&&
this._startSelection(a)}},_onKeyPress:function(a){this._canvas.isMouseOver()&&a.keyCode==dojo.keys.DELETE&&(a=this._selection.get(),this.removeElements(this.getGraph(),a))},_attachEventListeners:function(){if(0==this._connectHandles.length){this._canvas.fixed=!0;this._connectHandles=[];this._connectHandles.push(dojo.connect(this._canvas,"onMouseDown",this,"_onMouseDown"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseUp",this,"_onMouseUp"));this._connectHandles.push(dojo.connect(this._canvas,
"onClickPaper",this,"_onClickPaper"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseMove",this,"_onMouseMove"));this._connectHandles.push(dojo.connect(this._canvas,"onTouchMove",this,"_onMouseMove"));this._connectHandles.push(dojo.connect(this._canvas,"viewPortChanged",this,"_viewPortChanged"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOverNode",this,"_onMouseOverNode"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOutNode",this,"_onMouseOutNode"));this._connectHandles.push(dojo.connect(this._canvas,
"onClickNode",this,"_onClickNodeOrEdge"));this._connectHandles.push(dojo.connect(this._canvas,"onDblClickNode",this,"editLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOverNodeLabel",this,"_onMouseOverNodeLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOutNodeLabel",this,"_onMouseOutNodeLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onClickNodeLabel",this,"_onClickNodeLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onClickEdge",
this,"_onClickNodeOrEdge"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOverEdge",this,"_onMouseOverEdge"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOutEdge",this,"_onMouseOutEdge"));this._selectNodes&&(this._connectHandles.push(dojo.connect(this._selection,"onAddNode",this._canvas,"highlight")),this._connectHandles.push(dojo.connect(this._selection,"onRemoveNode",this._canvas,"unhighlight")));this._selectEdges&&(this._connectHandles.push(dojo.connect(this._selection,
"onAddEdge",this._canvas,"highlight")),this._connectHandles.push(dojo.connect(this._selection,"onRemoveEdge",this._canvas,"unhighlight")));this._connectHandles.push(dojo.connect(this._canvas,"onClickPaper",this._selection,"clear"));this._connectHandles.push(dojo.connect(this.getGraph(),"onRemove",this._selection,"removeAll"));this._connectHandles.push(dojo.connect(dojo.doc,"onkeypress",this,"_onKeyPress"));this._hitTest.setEdgeTestSensitivity(this._edgeTestSensitivity/this._canvas.zoom);var a=this._canvas.getLastHitInfo();
"Node"==f.getElementType(a)?this._onMouseOverNode(f.getHitId(a)):this._currentNode=null}},_detachEventListeners:function(){for(var a=0;a<this._connectHandles.length;a++){var b=this._connectHandles[a],c=b.disconnect?b.disconnect:b.remove;c&&c.call(b)}this._connectHandles=[]},_startSelection:function(a){this._selection&&(a.ctrlKey||this.clearSelection(),this.setChild(this._rectangularSelectionMode))},_startMoveSelection:function(){if(this.doAllowMoveSelection()){var a=this.getMoveSelectionMode();a&&
this.setChild(a)}},_startResizeNodes:function(a,b){if(this.doAllowResizeNodes()){var c=this.getResizeNodesMode();if(c&&a)this._canvas.getHighlighter()._hotSpotSize=this.hotSpotSize,c.mainNode=a,c.mode=b,this.setChild(c)}},_startCreateEdge:function(){if(this.doAllowEdgeCreation()){var a=this.getCreateEdgeMode();if(a)a.startNode=this._currentNode,this.setChild(a)}},_strictlyInsideGroupNode:function(a){if(this._hierarchy&&this._hierarchy.isGroupNode(a)){var a=this._canvas.getHitTest().getBoundsForId(a),
b=this._canvas.getWorldCoordinates(),c=this._groupBorderWidth;return b.x-a.minX>c&&b.y-a.minY>c&&a.maxX-b.x>c&&a.maxY-b.y>c}return!1},_updateSelection:function(a,b,c){if(this._selection&&(!c.ctrlKey||!c.shiftKey)){c.ctrlKey||this.clearSelection();if(!this._selectNodes||!this._selectEdges)if(b=f.getElementType(a),"Node"==b&&!this._selectNodes||"Edge"==b&&!this._selectEdges)return;this._selection.toggle(a)}},_viewPortChanged:function(a,b,c,d,g){this._hitTest.setEdgeTestSensitivity(this._edgeTestSensitivity/
g)}})})},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin","dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),function(i,e,c,a,b,f,d,h,g,l){var k=d("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(b){var c=this.declaredClass,
d=this;return a.substitute(b,this,function(a,b){"!"==b.charAt(0)&&(a=i.getObject(b.substr(1),!1,d));if("undefined"==typeof a)throw Error(c+" template:"+b);return null==a?"":"!"==b.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this.templateString)this.templateString=b(this.templatePath,{sanitize:!0});var a=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),c;if(i.isString(a)){if(c=h.toDom(this._stringRepl(a),this.ownerDocument),1!=
c.nodeType)throw Error("Invalid template: "+a);}else c=a.cloneNode(!0);this.domNode=c;this.inherited(arguments);this._attachTemplateNodes(c,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},_beforeFillContent:function(){},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){for(var c=i.isArray(a)?a:a.all||a.getElementsByTagName("*"),d=i.isArray(a)?0:-1;0>
d||c[d];d++){var g=-1==d?a:c[d];if(!this.widgetsInTemplate||!b(g,"dojoType")&&!b(g,"data-dojo-type")){var f=b(g,"dojoAttachPoint")||b(g,"data-dojo-attach-point");if(f)for(var h=f.split(/\s*,\s*/);f=h.shift();)i.isArray(this[f])?this[f].push(g):this[f]=g,this._attachPoints.push(f);if(f=b(g,"dojoAttachEvent")||b(g,"data-dojo-attach-event"))for(var h=f.split(/\s*,\s*/),l=i.trim;f=h.shift();)if(f){var k=null;-1!=f.indexOf(":")?(k=f.split(":"),f=l(k[0]),k=l(k[1])):f=l(f);k||(k=f);this._attachEvents.push(this.connect(g,
e[f]||f,k))}}}},destroyRendering:function(){f.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];f.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});k._templateCache={};k.getCachedTemplate=function(b,c,d){var g=k._templateCache,e=b,f=g[e];if(f){try{if(!f.ownerDocument||f.ownerDocument==(d||document))return f}catch(l){}h.destroy(f)}b=a.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return g[e]=b;c=h.toDom(b,d);if(1!=c.nodeType)throw Error("Invalid template: "+
b);return g[e]=c};g("ie")&&l.addOnWindowUnload(function(){var a=k._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&h.destroy(c);delete a[b]}});i.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return k})},"yfiles/client/tiles/HitTest":function(){define("yfiles/client/tiles/HitTest","dojo/_base/declare,dojo/request/xhr,dojo/Evented,dojox/collections/Dictionary,yfiles/client/tiles/GraphBounds,yfiles/client/support/HitInfo,yfiles/client/support/HitInfoData".split(","),function(i,e,c,a,b,
f,d){var h=i([c],{_edgeTestSensitivity:5,_nodeEvents:!1,_edgeEvents:!1,_nodeLabelEvents:!1,_edgeLabelEvents:!1,_paperEvents:!1,_baseURL:".",_path:null,_worldBounds:null,_nodes:null,_nodeLabels:null,_edges:null,_edgeLabels:null,_NODE_EVENTS:1,_EDGE_EVENTS:2,_NODE_LABEL_EVENTS:4,_EDGE_LABEL_EVENTS:8,_PAPER_EVENTS:16,_eventMask:0,constructor:function(a,b,c,d,e,f,h,i){this._baseURL=a;this._path=b;this._worldBounds=c;this.setEventTypes(d,e,f,h,i)},getGraphName:function(){return this._path},getEventMask:function(){return this._eventMask},
setEventTypes:function(a,b,c,d,e){this._createMaps();this._nodeEvents=a;this._edgeEvents=b;this._nodeLabelEvents=c;this._edgeLabelEvents=d;this._paperEvents=e;this._nodeEvents&&(this._eventMask|=this._NODE_EVENTS);this._edgeEvents&&(this._eventMask|=this._EDGE_EVENTS);this._nodeLabelEvents&&(this._eventMask|=this._NODE_LABEL_EVENTS);this._edgeLabelEvents&&(this._eventMask|=this._EDGE_LABEL_EVENTS);this._getElementBounds()},setGraphParameters:function(a,b,c,d){this._setParams(a,b,c);a||b||c?(this.clear(),
this._getElementBounds(c,d)):dojo.isFunction(d)&&d(this._baseURL,this._path,this._worldBounds)},setData:function(a,b,c,d,e){this._setParams(c,d,e);this.clear();this._createGraph(a,b)},setEdgeTestSensitivity:function(a){this._edgeTestSensitivity=a},getEmptyHitInfo:function(a,b){return new f(a,b)},getHitInfo:function(a,b,c){var d=this.getEmptyHitInfo(a,b),e=!1;this._edgeLabelEvents&&(e=this._rectangleHitTest(this._edgeLabels,a,b,c,d.edgeLabels));if(e)d.firstHit=d.edgeLabels[0],d.hit=!0;if(d.hit&&c)return d;
if(this._edgeEvents)e=this._polyLineHitTest(this._edges,a,b,c,d.edges),d.hit=d.hit||e;if(e&&!d.firstHit)d.firstHit=d.edges[0];if(d.hit&&c)return d;if(this._nodeLabelEvents)e=this._rectangleHitTest(this._nodeLabels,a,b,c,d.nodeLabels),d.hit=d.hit||e;if(e&&!d.firstHit)d.firstHit=d.nodeLabels[0];if(d.hit&&c)return d;if(this._nodeEvents)e=this._rectangleHitTest(this._nodes,a,b,c,d.nodes),d.hit=d.hit||e;if(e&&!d.firstHit)d.firstHit=d.nodes[0];if(d.hit&&c)return d;if(this._paperEvents)d.hit=!0;return d},
getOverlaps:function(a,b,c,d){var e=this.getEmptyHitInfo(a,b);this._nodeLabelEvents&&this._rectangleOverlapTest(this._nodeLabels,a,b,c,d,e.nodeLabels);this._nodeEvents&&this._rectangleOverlapTest(this._nodes,a,b,c,d,e.nodes);this._edgeLabelEvents&&this._rectangleOverlapTest(this._edgeLabels,a,b,c,d,e.edgeLabels);this._edgeEvents&&this._polyLineOverlapTest(this._edges,a,b,c,d,e.edges);return e},getBoundsForId:function(a){return(a=this._byId(a))?"e"!=a.t?h._getRectBounds(a):h._getEdgeBounds(a):null},
getControlPoints:function(a){return(a=this._byId(a))&&"e"==a.t?a.p:null},getLabelInfo:function(a){var b=this._byId(a);if(!b)return null;var c=a.lastIndexOf("-");return c?(c=a.substring(2,c),{mainElementId:a.substring(0,1)+c,labelIndex:b.p}):null},refresh:function(){this.clear();this._getElementBounds()},clear:function(){this._nodes.clear();this._nodeLabels.clear();this._edges.clear();this._edgeLabels.clear()},isActive:function(){return 0!=this._eventMask},onNewData:function(){},getNodes:function(){return this._nodes.getValueList()},
getEdges:function(){return this._edges.getValueList()},getNodeLabels:function(){return this._nodeLabels.getValueList()},getEdgeLabels:function(){return this._edgeLabels.getValueList()},_createMaps:function(){this._nodes=new a;this._nodeLabels=new a;this._edges=new a;this._edgeLabels=new a},_setParams:function(a,b,c){if(a)this._baseURL=a;if(b)this._path=b;if(c)this._worldBounds=c},_getElementBounds:function(a,b){var c=a?a:this._worldBounds,d=dojo.isFunction(b)?b:function(){};if(!c||!this._path||""==
this._path)d(this._baseURL,this._path,this._worldBounds);else if(!this._nodeEvents&&!this._edgeEvents&&!this._nodeLabelEvents&&!this._edgeLabelEvents)d(this._baseURL,this._path,this._worldBounds);else{var f=this;e.post(this._baseURL+"/getElementBounds?path="+this._path+"&x="+c.minX+"&y="+c.minY+"&width="+c.width()+"&height="+c.height()+"&types="+this._eventMask,{handleAs:"json"}).then(function(a){setTimeout(dojo.hitch(f,f._createGraph,a,d),0)})}},_getCategory:function(a){switch(a.t){case "n":return this._nodes;
case "nl":return this._nodeLabels;case "e":return this._edges;case "el":return this._edgeLabels}return null},_byId:function(a,b){if(b)return b.item(a);for(var c=null,d=[this._nodes,this._edges,this._nodeLabels,this._edgeLabels],e=0;e<d.length;e++)if(b=d[e],c=b.item(a))return c;return null},_createGraph:function(a,b){var c=dojo.isFunction(b)?b:function(){},d=a.length;if(0<d)for(var e=0;e<d;e++)setTimeout(dojo.hitch(this,this._createElement,a[e],e==d-1,c),0);else b(this._baseURL,this._path,this._worldBounds)},
_createElement:function(a,b,c){var d=a.i;this._getCategory(a).add(d,a);b&&(c(this._baseURL,this._path,this._worldBounds),this.onNewData())},_rectangleHitTest:function(a,b,c,e,f){for(var h=!1,a=a.getIterator(),i=a.get();i;){i=i.value;if(i.x<=b&&i.x+i.w>=b&&i.y<=c&&i.y+i.h>=c){f.push(new d(i));if(e)return!0;h=!0}i=a.get()}return h},_rectangleOverlapTest:function(a,b,c,e,f,h){for(var a=a.getIterator(),i=a.get();i;)i=i.value,this._rectangleIntersection(b,c,e,f,i.x,i.y,i.x+i.w,i.y+i.h)&&h.push(new d(i)),
i=a.get()},_rectangleIntersection:function(a,b,c,d,e,f,h,i){return Math.max(a,e)<=Math.min(c,h)&&Math.max(b,f)<=Math.min(d,i)},_lineSegmentIntersection:function(a,b,c,d,e,f,h,i){var s=d-b,j=a-c,u=s*a+j*b,v=i-f,o=e-h,t=v*e+o*f,C=s*o-v*j;if(1.0E-7>=Math.abs(C))return!1;j=(o*u-j*t)/C;s=(s*t-v*u)/C;return Math.min(a,c)<=j&&j<=Math.max(a,c)&&Math.min(b,d)<=s&&s<=Math.max(b,d)&&Math.min(e,h)<=j&&j<=Math.max(e,h)&&Math.min(f,i)<=s&&s<=Math.max(f,i)},_polyLineHitTest:function(a,b,c,e,f){for(var h=this._edgeTestSensitivity,
i=!1,a=a.getIterator(),p=a.get();p;){p=p.value;if(this._polyLineContains(p.p,b,c,h)){f.push(new d(p));if(e)return!0;i=!0}p=a.get()}return i},_polyLineOverlapTest:function(a,b,c,e,f,h){for(var a=a.getIterator(),i=a.get();i;)i=i.value,(this._controlPointsIn(i.p,b,c,e,f)||this._intersects(i.p,b,c,e,f))&&h.push(new d(i)),i=a.get()},_polyLineContains:function(a,b,c,d){for(var e=a[0].x,f=a[0].y,h,i,s=1;s<a.length;s++){h=a[s].x;i=a[s].y;if(this._lineContains(e,f,h,i,b,c,d))return!0;e=h;f=i}return!1},_controlPointsIn:function(a,
b,c,d,e){for(var f=0;f<a.length;f++)if(b<=a[f].x&&d>=a[f].x&&c<=a[f].y&&e>=a[f].y)return!0;return!1},_intersects:function(a,b,c,d,e){for(var f=1;f<a.length;f++){var h=a[f-1],i=a[f];if(this._lineSegmentIntersection(h.x,h.y,i.x,i.y,b,c,d,c)||this._lineSegmentIntersection(h.x,h.y,i.x,i.y,d,c,d,e)||this._lineSegmentIntersection(h.x,h.y,i.x,i.y,b,e,d,e)||this._lineSegmentIntersection(h.x,h.y,i.x,i.y,b,c,b,e))return!0}return!1},_lineContains:function(a,b,c,d,e,f,h){if(e+h<Math.min(a,c)||f+h<Math.min(b,
d)||e-h>Math.max(a,c)||f-h>Math.max(b,d))return!1;var i=e-a,s=f-b,j=h*h,u=i*i+s*s;if(u<j)return!0;e-=c;f-=d;if(e*e+f*f<j)return!0;a=c-a;d-=b;b=Math.sqrt(a*a+d*d);if(0==b)return!1;i=(a*i+d*s)/b;return i<-h||i>b+h?!1:u-i*i<j}});h.getElementType=function(a){if(!a)return null;var b="";if(dojo.isString(a)){var c=a.indexOf("-");0<c&&(b=a.substring(0,c))}else if(a.firstHit)b=a.firstHit.t;switch(b){case "n":return"Node";case "nl":return"NodeLabel";case "e":return"Edge";case "el":return"EdgeLabel"}return"Paper"};
h.getHitId=function(a){return a&&a.firstHit?a.firstHit.i:null};h.getHitIds=function(a){var b=[];if(a)for(var c=["nodes","edges","nodeLabels","edgeLabels"],d=0;d<c.length;d++)for(var e=a[c[d]],f=0;f<e.length;f++)b.push(e[f].i);return b};h.getBounds=function(a){return!a||!a.firstHit?null:"e"!=a.t?this._getRectBounds(a.firstHit):this._getEdgeBounds(a.firstHit)};h.getHitCount=function(a){if(!a)return 0;for(var b=0,a=[a.nodes,a.edges,a.nodeLabels,a.edgeLabels],c=0;c<a.length;c++)b+=a[c].length;return b};
h.getUrl=function(a){return a&&a.firstHit&&a.firstHit.u?a.firstHit.u:null};h.getDescription=function(a){return a&&a.firstHit&&a.firstHit.d?a.firstHit.d:null};h.setCoords=function(a,b,c){a.x=b;a.y=c};h._getRectBounds=function(a){return new b(a.x,a.x+a.w,a.y,a.y+a.h)};h._getEdgeBounds=function(a){for(var a=a.p,c=a[0],c=new b(c.x,c.x,c.y,c.y),d=1;d<a.length;d++)c=c.union(new b(a[d].x,a[d].x,a[d].y,a[d].y));return c};return h})},"dojo/window":function(){define("dojo/window","./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style".split(","),
function(i,e,c,a,b,f){var d={getBox:function(a){var a=a||c.doc,f="BackCompat"==a.compatMode?c.body(a):a.documentElement,i=b.docScroll(a);if(e("touch"))var k=d.get(a),a=k.innerWidth||f.clientWidth,f=k.innerHeight||f.clientHeight;else a=f.clientWidth,f=f.clientHeight;return{l:i.x,t:i.y,w:a,h:f}},get:function(a){if(e("ie")&&d!==document.parentWindow){a.parentWindow.execScript("document._parentWindow = window;","Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},
scrollIntoView:function(d,g){try{var d=a.byId(d),i=d.ownerDocument||c.doc,k=c.body(i),m=i.documentElement||k.parentNode,q=e("ie"),n=e("webkit");if((!e("mozilla")&&!q&&!n&&!e("opera")||d==k||d==m)&&"undefined"!=typeof d.scrollIntoView)d.scrollIntoView(!1);else{var r="BackCompat"==i.compatMode,p=9<=q&&"frameElement"in d.ownerDocument.parentWindow?0<m.clientHeight&&0<m.clientWidth&&(0==k.clientHeight||0==k.clientWidth||k.clientHeight>m.clientHeight||k.clientWidth>m.clientWidth)?m:k:r?k:m,n=n?k:p,s=p.clientWidth,
j=p.clientHeight,u=!b.isBodyLtr(i),v=g||b.position(d),o=d.parentNode,i=function(a){return 6>=q||q&&r?!1:"fixed"==f.get(a,"position").toLowerCase()};if(!i(d))for(;o;){o==k&&(o=n);var t=b.position(o),C=i(o);if(o==n){t.w=s;t.h=j;n==m&&q&&u&&(t.x+=n.offsetWidth-t.w);if(0>t.x||!q)t.x=0;if(0>t.y||!q)t.y=0}else{var B=b.getPadBorderExtents(o);t.w-=B.w;t.h-=B.h;t.x+=B.l;t.y+=B.t;var D=o.clientWidth,J=t.w-D;if(0<D&&0<J)t.w=D,t.x+=u&&(q||o.clientLeft>B.l)?J:0;D=o.clientHeight;J=t.h-D;if(0<D&&0<J)t.h=D}if(C){if(0>
t.y)t.h+=t.y,t.y=0;if(0>t.x)t.w+=t.x,t.x=0;if(t.y+t.h>j)t.h=j-t.y;if(t.x+t.w>s)t.w=s-t.x}var L=v.x-t.x,H=v.y-Math.max(t.y,0),N=L+v.w-t.w,O=H+v.h-t.h;if(0<N*L){var M=Math[0>L?"max":"min"](L,N);if(u&&(8==q&&!r||9<=q))M=-M;v.x+=o.scrollLeft;o.scrollLeft+=M;v.x-=o.scrollLeft}0<O*H&&(v.y+=o.scrollTop,o.scrollTop+=Math[0>H?"max":"min"](H,O),v.y-=o.scrollTop);o=o!=n&&!C&&o.parentNode}}}catch(F){console.error("scrollIntoView: "+F),d.scrollIntoView(!1)}}};i.setObject("dojo.window",d);return d})},"dojox/collections/Dictionary":function(){define("dojox/collections/Dictionary",
["dojo/_base/kernel","dojo/_base/array","./_base"],function(i,e,c){c.Dictionary=function(a){var b={};this.count=0;var e={};this.add=function(a,e){var f=a in b;b[a]=new c.DictionaryEntry(a,e);f||this.count++};this.clear=function(){b={};this.count=0};this.clone=function(){return new c.Dictionary(this)};this.contains=this.containsKey=function(a){return e[a]?!1:null!=b[a]};this.containsValue=function(a){for(var b=this.getIterator();b.get();)if(b.element.value==a)return!0;return!1};this.entry=function(a){return b[a]};
this.forEach=function(a,c){var g=[],l;for(l in b)e[l]||g.push(b[l]);i.forEach(g,a,c)};this.getKeyList=function(){return this.getIterator().map(function(a){return a.key})};this.getValueList=function(){return this.getIterator().map(function(a){return a.value})};this.item=function(a){if(a in b)return b[a].valueOf()};this.getIterator=function(){return new c.DictionaryIterator(b)};this.remove=function(a){return a in b&&!e[a]?(delete b[a],this.count--,!0):!1};if(a)for(a=a.getIterator();a.get();)this.add(a.element.key,
a.element.value)};return c.Dictionary})},"yfiles/client/tiles/GraphHighlighter":function(){define("yfiles/client/tiles/GraphHighlighter",["dojo/_base/declare"],function(i){return i(null,{constructor:function(){},drawNodeHighlight:function(e,c){dojo.style(c,"opacity",0.3);dojo.style(c,"display","block");dojo.style(c,"position","absolute");dojo.addClass(c,"yFilesGraphCanvasOverlay")},drawEdgeHighlight:function(e,c,a,b){var f=b[a],d=dojo.doc.createElement("div");dojo.style(d,"left",f.x*e.zoom-5+"px");
dojo.style(d,"top",f.y*e.zoom-5+"px");dojo.style(d,"width","10px");dojo.style(d,"height","10px");dojo.style(d,"opacity",0.7);dojo.style(d,"display","block");dojo.style(d,"position","absolute");dojo.addClass(d,"yFilesGraphCanvasOverlay");c.appendChild(d);0<a&&(a=b[a-1],d=dojo.doc.createElement("div"),b=(f.y+a.y)/2,dojo.style(d,"left",(f.x+a.x)/2*e.zoom-5+"px"),dojo.style(d,"top",b*e.zoom-5+"px"),dojo.style(d,"width","10px"),dojo.style(d,"height","10px"),dojo.style(d,"opacity",0.7),dojo.style(d,"display",
"block"),dojo.style(d,"position","absolute"),dojo.addClass(d,"yFilesGraphCanvasOverlay"),c.appendChild(d))}})})},"yfiles/client/support/HitInfo":function(){define("yfiles/client/support/HitInfo",["dojo/_base/declare"],function(i){return i(null,{hit:!1,x:null,y:null,nodes:null,edges:null,nodeLabels:null,edgeLabels:null,firstHit:null,constructor:function(e,c){this.x=e;this.y=c;this.nodes=[];this.edges=[];this.nodeLabels=[];this.edgeLabels=[];this.hit=!1;this.firstHit=null}})})},"yfiles/client/tiles/PinchInputMode":function(){define("yfiles/client/tiles/PinchInputMode",
["dojo/_base/declare","yfiles/client/tiles/InputMode"],function(i,e){return i([e],{_connectHandles:[],_oldZoom:1,_primaryDownLocation:null,_secondaryDownLocation:null,_primaryViewDown:null,_secondaryViewDown:null,_pinchAllowed:!0,pinchTimeout:20,constructor:function(){this._connectHandles=[];this._primaryDownLocation={x:0,y:0};this._secondaryDownLocation={x:0,y:0};this._primaryViewDown={x:0,y:0};this._secondaryViewDown={x:0,y:0}},_attachEventListeners:function(){this._connectHandles.push(dojo.connect(this._canvas,
"onPinchStart",this,"_onPinchStart"));this._connectHandles.push(dojo.connect(this._canvas,"onPinch",this,"_onPinch"));this._connectHandles.push(dojo.connect(this._canvas,"onPinchEnd",this,"_onPinchEnd"))},_detachEventListeners:function(){for(;0<this._connectHandles.length;){var c=this._connectHandles.pop();dojo.disconnect(c)}},activate:function(){this.inherited(arguments)},deactivate:function(){this.inherited(arguments)},_onPinchStart:function(c,a,b){this._primaryDownLocation=c;this._secondaryDownLocation=
a;this._primaryViewDown=this._canvas.toLocal(b[0].pageX,b[0].pageY);this._secondaryViewDown=this._canvas.toLocal(b[1].pageX,b[1].pageY);this._oldZoom=this._canvas.zoom},_onPinch:function(c,a,b){if(this._pinchAllowed)this._limitedPinch(c,a,b),this._pinchAllowed=!1,setTimeout(dojo.hitch(this,function(){this._pinchAllowed=!0}),this.pinchTimeout)},_onPinchEnd:function(c,a,b){this._pinchAllowed=!0;this._limitedPinch(c,a,b);null!=this._parent&&(this.deactivate(),dojo.isFunction(this._parent._onPinchEnd)&&
this._parent._onPinchEnd(c,a,b))},_limitedPinch:function(c,a,b){var e=this._primaryViewDown,d=this._secondaryViewDown,h=this._primaryDownLocation,g=this._secondaryDownLocation,i=this._canvas.toLocal(b[0].pageX,b[0].pageY),b=this._canvas.toLocal(b[1].pageX,b[1].pageY),k=this._vectorSubtract(b,i),m=this._vectorSubtract(d,e),k=this._vectorLength(k),m=this._vectorLength(m);this._canvas.setZoom(this._oldZoom*(k/m));c=this._vectorSubtract(h,c);a=this._vectorSubtract(g,a);e=this._vectorLength(this._vectorSubtract(e,
i));d=this._vectorLength(this._vectorSubtract(d,b));e=0==e?1:d/(d+e);d=c.x*e+(1-e)*a.x;e=c.y*e+(1-e)*a.y;i=this._canvas.getViewport();this._canvas.zoomTo(this._canvas.viewportLimiter.limitViewport(this._canvas,{x:i.x+d,y:i.y+e,width:i.width,height:i.height}))},_vectorSubtract:function(c,a){return{x:c.x-a.x,y:c.y-a.y}},_vectorLength:function(c){return Math.sqrt(c.x*c.x+c.y*c.y)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dijit/layout/_ContentPaneResizeMixin","dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/query,dojo/sniff,../registry,../Viewport,./utils".split(","),
function(i,e,c,a,b,f,d,h,g,l,k){return e("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(l.on("resize",f.hitch(this,"resize")))}},_checkIfSingleChild:function(){var a=[],b=!1;d("> *",this.containerNode).some(function(c){var d=
g.byNode(c);d&&d.resize?a.push(d):c.offsetHeight&&(b=!0)});this._singleChild=1==a.length&&!b?a[0]:null;c.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(b,c){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();b&&a.setMarginBox(this.domNode,
b);var d=this.containerNode;if(d===this.domNode){var e=c||{};f.mixin(e,b||{});if(!("h"in e)||!("w"in e))e=f.mixin(a.getMarginBox(d),e);this._contentBox=k.marginBox2contentBox(d,e)}else this._contentBox=a.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||a.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else i.forEach(this.getChildren(),function(a){a.resize&&
a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!c.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",
"require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),function(i,e,c,a,b,f,d,h,g,l,k,m,q,n,r,p,s,j,u,v,o,t){function C(a){return function(b){h[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}q.add("dijit-legacy-requires",!n.isAsync);
q("dijit-legacy-requires")&&s(0,function(){i(["dijit/_base/manager"])});var B={};return f("dijit._WidgetBase",[j,o],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:C("lang"),dir:"",_setDirAttr:C("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:a.blankGif||i.toUrl("dojo/resources/blank.gif"),
postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=d.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,r.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=t.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:v.doc);this.ownerDocumentBody=
v.body(this.ownerDocument);t.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&e.parentNode&&this.domNode!==e&&(e.parentNode.replaceChild(this.domNode,e),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],c;for(c in this.attributeMap)b.push(c);var a=a.prototype,d;for(d in a)d in this.attributeMap||
"_set"+d.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(d)}var f={},g;for(g in this.params||{})f[g]=this[g];e.forEach(b,function(a){a in f||this[a]&&this.set(a,this[a])},this);for(g in f)this.set(g,f[g])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(e.map(a,function(a){return a+
"Rtl"})));g.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,e.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&r.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();e.forEach(this._connects,
r.hitch(this,"disconnect"));e.forEach(this._supportingWidgets,b);this.domNode&&e.forEach(t.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);t.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?h.remove(this.domNode,"widgetId"):l.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||l.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){e.forEach(this.getChildren(),
function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;r.isObject(a)?m.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];e.forEach(r.isArray(c)?c:[c],function(c){var d=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":r.isFunction(b)&&(b=r.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?
a.toLowerCase():a;d.tagName?h.set(d,c,b):d.set(c,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":d.innerHTML=b;break;case "class":g.replace(d,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(r.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,
1));else{var d=this.focusNode&&!r.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d].tagName,g;if(!(g=B[f])){g=this[d];var h={},i;for(i in g)h[i.toLowerCase()]=!0;g=B[f]=h}i=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:c.l in g&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=i&&this._attrToDom(a,b,i);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,
function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._created&&b!==c&&(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},emit:function(a,b,c){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail={};b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,
c?c:[b]));this._started&&!this._beingDestroyed&&p.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var d=this._onMap(a);return d?c.after(this,d,b,!0):this.own(p(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
t.findWidgets(this.containerNode):[]},getParent:function(){return t.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,c,d){return this.own(b.connect(a,c,this,d))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(u.subscribe(a,r.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=m.get(this.domNode,"display")},placeAt:function(a,
b){var c=!a.tagName&&t.byId(a);c&&c.addChild&&(!b||"number"===typeof b)?c.addChild(this,b):(c=c?c.containerNode&&!/after|before|replace/.test(b||"")?c.containerNode:c.domNode:d.byId(a,this.ownerDocument),l.place(this.domNode,c,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var c=setTimeout(r.hitch(this,function(){c=null;this._destroyed||r.hitch(this,a)()}),b||0);return{remove:function(){c&&
(clearTimeout(c),c=null);return null}}}})})},"dojo/dnd/Moveable":function(){define("dojo/dnd/Moveable","../_base/array,../_base/declare,../_base/event,../_base/lang,../dom,../dom-class,../Evented,../on,../topic,../touch,./common,./Mover,../_base/window".split(","),function(i,e,c,a,b,f,d,h,g,l,k,m,q){return e("dojo.dnd.Moveable",[d],{handle:"",delay:0,skip:!1,constructor:function(c,d){this.node=b.byId(c);d||(d={});this.handle=d.handle?b.byId(d.handle):null;if(!this.handle)this.handle=this.node;this.delay=
0<d.delay?d.delay:0;this.skip=d.skip;this.mover=d.mover?d.mover:m;this.events=[h(this.handle,l.press,a.hitch(this,"onMouseDown")),h(this.handle,"dragstart",a.hitch(this,"onSelectStart")),h(this.handle,"selectstart",a.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){i.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!k.isFormElement(b)){if(this.delay)this.events.push(h(this.handle,
l.move,a.hitch(this,"onMouseMove")),h(this.handle,l.release,a.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);c.stop(b)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);c.stop(a)},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();c.stop(a)},onSelectStart:function(a){(!this.skip||!k.isFormElement(a))&&c.stop(a)},onDragDetected:function(a){new this.mover(this.node,
a,this)},onMoveStart:function(a){g.publish("/dnd/move/start",a);f.add(q.body(),"dojoMove");f.add(this.node,"dojoMoveItem")},onMoveStop:function(a){g.publish("/dnd/move/stop",a);f.remove(q.body(),"dojoMove");f.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/html":function(){define("dojo/html","./_base/kernel,./_base/lang,./_base/array,./_base/declare,./dom,./dom-construct,./parser".split(","),
function(i,e,c,a,b,f,d){var h={};e.setObject("dojo.html",h);var g=0;h._secureForInnerHtml=function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};h._emptyNode=f.empty;h._setNodeContent=function(a,b){f.empty(a);if(b)if("string"==typeof b&&(b=f.toDom(b,a.ownerDocument)),!b.nodeType&&e.isArrayLike(b))for(var c=b.length,d=0;d<b.length;d=c==b.length?d+1:0)f.place(b[d],a,"last");else f.place(b,a,"last");return a};h._ContentSetter=a("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:i._scopeName,startup:!0,constructor:function(a,c){e.mixin(this,a||{});c=this.node=b.byId(this.node||c);if(!this.id)this.id=["Setter",c?c.id||c.tagName:"",g++].join("_")},set:function(a,b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");
try{a=h._setNodeContent(a,this.content)}catch(b){var c=this.onContentError(b);try{a.innerHTML=c}catch(d){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+d.message,d)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(c.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);f.empty(this.node)},
onBegin:function(){var a=this.content;if(e.isString(a)&&(this.cleanContent&&(a=h._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+
a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};c.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var e=this;this.parseDeferred=d.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return e.parseResults=a})}catch(f){this._onError("Content",f,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c?console.error(c,
b):a&&h._setNodeContent(this.node,a,!0)}});h.set=function(a,b,c){void 0==b&&(b="");return c?(new h._ContentSetter(e.mixin(c,{content:b,node:a}))).set():h._setNodeContent(a,b,!0)};return h})},"*now":function(i){i(['dojo/i18n!*preload*dojo/nls/yfiles-ajax*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});define("dojo/yfiles-ajax",[],1);